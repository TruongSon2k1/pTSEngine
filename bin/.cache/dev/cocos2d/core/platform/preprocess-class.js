
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/platform/preprocess-class.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2013-2016 Chukong Technologies Inc.
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
  worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
  not use Cocos Creator software for developing other software or tools that's
  used for developing games. You are not granted to publish, distribute,
  sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var js = require('./js');

var Attrs = require('./attribute'); // 增加预处理属性这个步骤的目的是降低 CCClass 的实现难度，将比较稳定的通用逻辑和一些需求比较灵活的属性需求分隔开。


var SerializableAttrs = {
  "default": {},
  serializable: {},
  editorOnly: {},
  formerlySerializedAs: {}
};
var TYPO_TO_CORRECT_DEV = CC_DEV && {
  extend: 'extends',
  property: 'properties',
  "static": 'statics',
  constructor: 'ctor'
}; // 预处理 notify 等扩展属性

function parseNotify(val, propName, notify, properties) {
  if (val.get || val.set) {
    if (CC_DEV) {
      cc.warnID(5500);
    }

    return;
  }

  if (val.hasOwnProperty('default')) {
    // 添加新的内部属性，将原来的属性修改为 getter/setter 形式
    // （以 _ 开头将自动设置property 为 visible: false）
    var newKey = "_N$" + propName;

    val.get = function () {
      return this[newKey];
    };

    val.set = function (value) {
      var oldValue = this[newKey];
      this[newKey] = value;
      notify.call(this, oldValue);
    };

    if (CC_EDITOR) {
      val.notifyFor = newKey;
    }

    var newValue = {};
    properties[newKey] = newValue; // 将不能用于get方法中的属性移动到newValue中

    for (var attr in SerializableAttrs) {
      var v = SerializableAttrs[attr];

      if (val.hasOwnProperty(attr)) {
        newValue[attr] = val[attr];

        if (!v.canUsedInGet) {
          delete val[attr];
        }
      }
    }
  } else if (CC_DEV) {
    cc.warnID(5501);
  }
}

function parseType(val, type, className, propName) {
  var STATIC_CHECK = CC_EDITOR && CC_DEV || CC_TEST;

  if (Array.isArray(type)) {
    if (STATIC_CHECK && 'default' in val) {
      var isArray = require('./CCClass').isArray; // require lazily to avoid circular require() calls


      if (!isArray(val["default"])) {
        cc.warnID(5507, className, propName);
      }
    }

    if (type.length > 0) {
      val.type = type = type[0];
    } else {
      return cc.errorID(5508, className, propName);
    }
  }

  if (typeof type === 'function') {
    if (type === String) {
      val.type = cc.String;

      if (STATIC_CHECK) {
        cc.warnID(3608, "\"" + className + "." + propName + "\"");
      }
    } else if (type === Boolean) {
      val.type = cc.Boolean;

      if (STATIC_CHECK) {
        cc.warnID(3609, "\"" + className + "." + propName + "\"");
      }
    } else if (type === Number) {
      val.type = cc.Float;

      if (STATIC_CHECK) {
        cc.warnID(3610, "\"" + className + "." + propName + "\"");
      }
    }
  } else if (STATIC_CHECK) {
    switch (type) {
      case 'Number':
        cc.warnID(5510, className, propName);
        break;

      case 'String':
        cc.warn("The type of \"" + className + "." + propName + "\" must be cc.String, not \"String\".");
        break;

      case 'Boolean':
        cc.warn("The type of \"" + className + "." + propName + "\" must be cc.Boolean, not \"Boolean\".");
        break;

      case 'Float':
        cc.warn("The type of \"" + className + "." + propName + "\" must be cc.Float, not \"Float\".");
        break;

      case 'Integer':
        cc.warn("The type of \"" + className + "." + propName + "\" must be cc.Integer, not \"Integer\".");
        break;

      case null:
        cc.warnID(5511, className, propName);
        break;
    }
  }

  if (CC_EDITOR && typeof type === 'function') {
    if (cc.Class._isCCClass(type) && val.serializable !== false && !js._getClassId(type, false)) {
      cc.warnID(5512, className, propName, className, propName);
    }
  }
}

function getBaseClassWherePropertyDefined_DEV(propName, cls) {
  if (CC_DEV) {
    var res;

    for (; cls && cls.__props__ && cls.__props__.indexOf(propName) !== -1; cls = cls.$super) {
      res = cls;
    }

    if (!res) {
      cc.error('unknown error');
    }

    return res;
  }
}

function _wrapOptions(isES6Getset, _default, type) {
  var res = isES6Getset ? {
    _short: true
  } : {
    _short: true,
    "default": _default
  };

  if (type) {
    res.type = type;
  }

  return res;
}

exports.getFullFormOfProperty = function (options, isES6Getset) {
  var isLiteral = options && options.constructor === Object;

  if (isLiteral) {
    return null;
  }

  if (Array.isArray(options) && options.length > 0) {
    return _wrapOptions(isES6Getset, [], options);
  } else if (typeof options === 'function') {
    return _wrapOptions(isES6Getset, js.isChildClassOf(options, cc.ValueType) ? new options() : null, options);
  } else if (options instanceof Attrs.PrimitiveType) {
    return _wrapOptions(isES6Getset, options["default"]);
  } else {
    return _wrapOptions(isES6Getset, options);
  }
};

exports.preprocessAttrs = function (properties, className, cls, es6) {
  for (var propName in properties) {
    var val = properties[propName];
    var fullForm = exports.getFullFormOfProperty(val, false);

    if (fullForm) {
      val = properties[propName] = fullForm;
    }

    if (val) {
      if (CC_EDITOR) {
        if ('default' in val) {
          if (val.get) {
            cc.errorID(5513, className, propName);
          } else if (val.set) {
            cc.errorID(5514, className, propName);
          } else if (cc.Class._isCCClass(val["default"])) {
            val["default"] = null;
            cc.errorID(5515, className, propName);
          }
        } else if (!val.get && !val.set) {
          var maybeTypeScript = es6;

          if (!maybeTypeScript) {
            cc.errorID(5516, className, propName);
          }
        }
      }

      if (CC_DEV && !val.override && cls.__props__.indexOf(propName) !== -1) {
        // check override
        var baseClass = js.getClassName(getBaseClassWherePropertyDefined_DEV(propName, cls));
        cc.warnID(5517, className, propName, baseClass, propName);
      }

      var notify = val.notify;

      if (notify) {
        if (CC_DEV && es6) {
          cc.error('not yet support notify attribute for ES6 Classes');
        } else {
          parseNotify(val, propName, notify, properties);
        }
      }

      if ('type' in val) {
        parseType(val, val.type, className, propName);
      }
    }
  }
};

if (CC_DEV) {
  var CALL_SUPER_DESTROY_REG_DEV = /\b\._super\b|destroy\s*\.\s*call\s*\(\s*\w+\s*[,|)]/;

  exports.doValidateMethodWithProps_DEV = function (func, funcName, className, cls, base) {
    if (cls.__props__ && cls.__props__.indexOf(funcName) >= 0) {
      // find class that defines this method as a property
      var baseClassName = js.getClassName(getBaseClassWherePropertyDefined_DEV(funcName, cls));
      cc.errorID(3648, className, funcName, baseClassName);
      return false;
    }

    if (funcName === 'destroy' && js.isChildClassOf(base, cc.Component) && !CALL_SUPER_DESTROY_REG_DEV.test(func)) {
      cc.error("Overwriting '" + funcName + "' function in '" + className + "' class without calling super is not allowed. Call the super function in '" + funcName + "' please.");
    }
  };
}

exports.validateMethodWithProps = function (func, funcName, className, cls, base) {
  if (CC_DEV && funcName === 'constructor') {
    cc.errorID(3643, className);
    return false;
  }

  if (typeof func === 'function' || func === null) {
    if (CC_DEV) {
      this.doValidateMethodWithProps_DEV(func, funcName, className, cls, base);
    }
  } else {
    if (CC_DEV) {
      if (func === false && base && base.prototype) {
        // check override
        var overrided = base.prototype[funcName];

        if (typeof overrided === 'function') {
          var baseFuc = js.getClassName(base) + '.' + funcName;
          var subFuc = className + '.' + funcName;
          cc.warnID(3624, subFuc, baseFuc, subFuc, subFuc);
        }
      }

      var correct = TYPO_TO_CORRECT_DEV[funcName];

      if (correct) {
        cc.warnID(3621, className, funcName, correct);
      } else if (func) {
        cc.errorID(3622, className, funcName);
      }
    }

    return false;
  }

  return true;
};
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXGNvcmVcXHBsYXRmb3JtXFxwcmVwcm9jZXNzLWNsYXNzLmpzIl0sIm5hbWVzIjpbImpzIiwicmVxdWlyZSIsIkF0dHJzIiwiU2VyaWFsaXphYmxlQXR0cnMiLCJzZXJpYWxpemFibGUiLCJlZGl0b3JPbmx5IiwiZm9ybWVybHlTZXJpYWxpemVkQXMiLCJUWVBPX1RPX0NPUlJFQ1RfREVWIiwiQ0NfREVWIiwiZXh0ZW5kIiwicHJvcGVydHkiLCJjb25zdHJ1Y3RvciIsInBhcnNlTm90aWZ5IiwidmFsIiwicHJvcE5hbWUiLCJub3RpZnkiLCJwcm9wZXJ0aWVzIiwiZ2V0Iiwic2V0IiwiY2MiLCJ3YXJuSUQiLCJoYXNPd25Qcm9wZXJ0eSIsIm5ld0tleSIsInZhbHVlIiwib2xkVmFsdWUiLCJjYWxsIiwiQ0NfRURJVE9SIiwibm90aWZ5Rm9yIiwibmV3VmFsdWUiLCJhdHRyIiwidiIsImNhblVzZWRJbkdldCIsInBhcnNlVHlwZSIsInR5cGUiLCJjbGFzc05hbWUiLCJTVEFUSUNfQ0hFQ0siLCJDQ19URVNUIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiZXJyb3JJRCIsIlN0cmluZyIsIkJvb2xlYW4iLCJOdW1iZXIiLCJGbG9hdCIsIndhcm4iLCJDbGFzcyIsIl9pc0NDQ2xhc3MiLCJfZ2V0Q2xhc3NJZCIsImdldEJhc2VDbGFzc1doZXJlUHJvcGVydHlEZWZpbmVkX0RFViIsImNscyIsInJlcyIsIl9fcHJvcHNfXyIsImluZGV4T2YiLCIkc3VwZXIiLCJlcnJvciIsIl93cmFwT3B0aW9ucyIsImlzRVM2R2V0c2V0IiwiX2RlZmF1bHQiLCJfc2hvcnQiLCJleHBvcnRzIiwiZ2V0RnVsbEZvcm1PZlByb3BlcnR5Iiwib3B0aW9ucyIsImlzTGl0ZXJhbCIsIk9iamVjdCIsImlzQ2hpbGRDbGFzc09mIiwiVmFsdWVUeXBlIiwiUHJpbWl0aXZlVHlwZSIsInByZXByb2Nlc3NBdHRycyIsImVzNiIsImZ1bGxGb3JtIiwibWF5YmVUeXBlU2NyaXB0Iiwib3ZlcnJpZGUiLCJiYXNlQ2xhc3MiLCJnZXRDbGFzc05hbWUiLCJDQUxMX1NVUEVSX0RFU1RST1lfUkVHX0RFViIsImRvVmFsaWRhdGVNZXRob2RXaXRoUHJvcHNfREVWIiwiZnVuYyIsImZ1bmNOYW1lIiwiYmFzZSIsImJhc2VDbGFzc05hbWUiLCJDb21wb25lbnQiLCJ0ZXN0IiwidmFsaWRhdGVNZXRob2RXaXRoUHJvcHMiLCJwcm90b3R5cGUiLCJvdmVycmlkZWQiLCJiYXNlRnVjIiwic3ViRnVjIiwiY29ycmVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFsQjs7QUFDQSxJQUFNQyxLQUFLLEdBQUdELE9BQU8sQ0FBQyxhQUFELENBQXJCLEVBRUE7OztBQUVBLElBQUlFLGlCQUFpQixHQUFHO0FBQ3BCLGFBQVMsRUFEVztBQUVwQkMsRUFBQUEsWUFBWSxFQUFFLEVBRk07QUFHcEJDLEVBQUFBLFVBQVUsRUFBRSxFQUhRO0FBSXBCQyxFQUFBQSxvQkFBb0IsRUFBRTtBQUpGLENBQXhCO0FBT0EsSUFBSUMsbUJBQW1CLEdBQUdDLE1BQU0sSUFBSTtBQUNoQ0MsRUFBQUEsTUFBTSxFQUFFLFNBRHdCO0FBRWhDQyxFQUFBQSxRQUFRLEVBQUUsWUFGc0I7QUFHaEMsWUFBUSxTQUh3QjtBQUloQ0MsRUFBQUEsV0FBVyxFQUFFO0FBSm1CLENBQXBDLEVBT0E7O0FBQ0EsU0FBU0MsV0FBVCxDQUFzQkMsR0FBdEIsRUFBMkJDLFFBQTNCLEVBQXFDQyxNQUFyQyxFQUE2Q0MsVUFBN0MsRUFBeUQ7QUFDckQsTUFBSUgsR0FBRyxDQUFDSSxHQUFKLElBQVdKLEdBQUcsQ0FBQ0ss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NkIsSUFBbkU7QUFDSDtBQUNKLEdBSkQsTUFLSztBQUNELFFBQUl2RSxNQUFKLEVBQVk7QUFDUixVQUFJcUUsSUFBSSxLQUFLLEtBQVQsSUFBa0JFLElBQWxCLElBQTBCQSxJQUFJLENBQUNLLFNBQW5DLEVBQThDO0FBQzFDO0FBQ0EsWUFBSUMsU0FBUyxHQUFHTixJQUFJLENBQUNLLFNBQUwsQ0FBZU4sUUFBZixDQUFoQjs7QUFDQSxZQUFJLE9BQU9PLFNBQVAsS0FBcUIsVUFBekIsRUFBcUM7QUFDakMsY0FBSUMsT0FBTyxHQUFHdEYsRUFBRSxDQUFDMEUsWUFBSCxDQUFnQkssSUFBaEIsSUFBd0IsR0FBeEIsR0FBOEJELFFBQTVDO0FBQ0EsY0FBSVMsTUFBTSxHQUFHckQsU0FBUyxHQUFHLEdBQVosR0FBa0I0QyxRQUEvQjtBQUNBM0QsVUFBQUEsRUFBRSxDQUFDQyxNQUFILENBQVUsSUFBVixFQUFnQm1FLE1BQWhCLEVBQXdCRCxPQUF4QixFQUFpQ0MsTUFBakMsRUFBeUNBLE1BQXpDO0FBQ0g7QUFDSjs7QUFDRCxVQUFJQyxPQUFPLEdBQUdqRixtQkFBbUIsQ0FBQ3VFLFFBQUQsQ0FBakM7O0FBQ0EsVUFBSVUsT0FBSixFQUFhO0FBQ1RyRSxRQUFBQSxFQUFFLENBQUNDLE1BQUgsQ0FBVSxJQUFWLEVBQWdCYyxTQUFoQixFQUEyQjRDLFFBQTNCLEVBQXFDVSxPQUFyQztBQUNILE9BRkQsTUFHSyxJQUFJWCxJQUFKLEVBQVU7QUFDWDFELFFBQUFBLEVBQUUsQ0FBQ3FCLE9BQUgsQ0FBVyxJQUFYLEVBQWlCTixTQUFqQixFQUE0QjRDLFFBQTVCO0FBQ0g7QUFDSjs7QUFDRCxXQUFPLEtBQVA7QUFDSDs7QUFDRCxTQUFPLElBQVA7QUFDSCxDQWhDRCIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNiBDaHVrb25nIFRlY2hub2xvZ2llcyBJbmMuXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cclxuXHJcbiBodHRwczovL3d3dy5jb2Nvcy5jb20vXHJcblxyXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBlbmdpbmUgc291cmNlIGNvZGUgKHRoZSBcIlNvZnR3YXJlXCIpLCBhIGxpbWl0ZWQsXHJcbiAgd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuICBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXHJcbiAgdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxyXG4gIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IGpzID0gcmVxdWlyZSgnLi9qcycpO1xyXG5jb25zdCBBdHRycyA9IHJlcXVpcmUoJy4vYXR0cmlidXRlJyk7XHJcblxyXG4vLyDlop7liqDpooTlpITnkIblsZ7mgKfov5nkuKrmraXpqqTnmoTnm67nmoTmmK/pmY3kvY4gQ0NDbGFzcyDnmoTlrp7njrDpmr7luqbvvIzlsIbmr5TovoPnqLPlrprnmoTpgJrnlKjpgLvovpHlkozkuIDkupvpnIDmsYLmr5TovoPngbXmtLvnmoTlsZ7mgKfpnIDmsYLliIbpmpTlvIDjgIJcclxuXHJcbnZhciBTZXJpYWxpemFibGVBdHRycyA9IHtcclxuICAgIGRlZmF1bHQ6IHt9LFxyXG4gICAgc2VyaWFsaXphYmxlOiB7fSxcclxuICAgIGVkaXRvck9ubHk6IHt9LFxyXG4gICAgZm9ybWVybHlTZXJpYWxpemVkQXM6IHt9XHJcbn07XHJcblxyXG52YXIgVFlQT19UT19DT1JSRUNUX0RFViA9IENDX0RFViAmJiB7XHJcbiAgICBleHRlbmQ6ICdleHRlbmRzJyxcclxuICAgIHByb3BlcnR5OiAncHJvcGVydGllcycsXHJcbiAgICBzdGF0aWM6ICdzdGF0aWNzJyxcclxuICAgIGNvbnN0cnVjdG9yOiAnY3RvcidcclxufTtcclxuXHJcbi8vIOmihOWkhOeQhiBub3RpZnkg562J5omp5bGV5bGe5oCnXHJcbmZ1bmN0aW9uIHBhcnNlTm90aWZ5ICh2YWwsIHByb3BOYW1lLCBub3RpZnksIHByb3BlcnRpZXMpIHtcclxuICAgIGlmICh2YWwuZ2V0IHx8IHZhbC5zZXQpIHtcclxuICAgICAgICBpZiAoQ0NfREVWKSB7XHJcbiAgICAgICAgICAgIGNjLndhcm5JRCg1NTAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpKSB7XHJcbiAgICAgICAgLy8g5re75Yqg5paw55qE5YaF6YOo5bGe5oCn77yM5bCG5Y6f5p2l55qE5bGe5oCn5L+u5pS55Li6IGdldHRlci9zZXR0ZXIg5b2i5byPXHJcbiAgICAgICAgLy8g77yI5LulIF8g5byA5aS05bCG6Ieq5Yqo6K6+572ucHJvcGVydHkg5Li6IHZpc2libGU6IGZhbHNl77yJXHJcbiAgICAgICAgdmFyIG5ld0tleSA9IFwiX04kXCIgKyBwcm9wTmFtZTtcclxuXHJcbiAgICAgICAgdmFsLmdldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbbmV3S2V5XTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhbC5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpc1tuZXdLZXldO1xyXG4gICAgICAgICAgICB0aGlzW25ld0tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgbm90aWZ5LmNhbGwodGhpcywgb2xkVmFsdWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChDQ19FRElUT1IpIHtcclxuICAgICAgICAgICAgdmFsLm5vdGlmeUZvciA9IG5ld0tleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHt9O1xyXG4gICAgICAgIHByb3BlcnRpZXNbbmV3S2V5XSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIC8vIOWwhuS4jeiDveeUqOS6jmdldOaWueazleS4reeahOWxnuaAp+enu+WKqOWIsG5ld1ZhbHVl5LitXHJcbiAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBTZXJpYWxpemFibGVBdHRycykge1xyXG4gICAgICAgICAgICB2YXIgdiA9IFNlcmlhbGl6YWJsZUF0dHJzW2F0dHJdO1xyXG4gICAgICAgICAgICBpZiAodmFsLmhhc093blByb3BlcnR5KGF0dHIpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZVthdHRyXSA9IHZhbFthdHRyXTtcclxuICAgICAgICAgICAgICAgIGlmICghdi5jYW5Vc2VkSW5HZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdmFsW2F0dHJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoQ0NfREVWKSB7XHJcbiAgICAgICAgY2Mud2FybklEKDU1MDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVR5cGUgKHZhbCwgdHlwZSwgY2xhc3NOYW1lLCBwcm9wTmFtZSkge1xyXG4gICAgY29uc3QgU1RBVElDX0NIRUNLID0gKENDX0VESVRPUiAmJiBDQ19ERVYpIHx8IENDX1RFU1Q7XHJcblxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcclxuICAgICAgICBpZiAoU1RBVElDX0NIRUNLICYmICdkZWZhdWx0JyBpbiB2YWwpIHtcclxuICAgICAgICAgICAgdmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL0NDQ2xhc3MnKS5pc0FycmF5OyAgIC8vIHJlcXVpcmUgbGF6aWx5IHRvIGF2b2lkIGNpcmN1bGFyIHJlcXVpcmUoKSBjYWxsc1xyXG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkodmFsLmRlZmF1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICBjYy53YXJuSUQoNTUwNywgY2xhc3NOYW1lLCBwcm9wTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YWwudHlwZSA9IHR5cGUgPSB0eXBlWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNjLmVycm9ySUQoNTUwOCwgY2xhc3NOYW1lLCBwcm9wTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFN0cmluZykge1xyXG4gICAgICAgICAgICB2YWwudHlwZSA9IGNjLlN0cmluZztcclxuICAgICAgICAgICAgaWYgKFNUQVRJQ19DSEVDSykge1xyXG4gICAgICAgICAgICAgICAgY2Mud2FybklEKDM2MDgsIGBcIiR7Y2xhc3NOYW1lfS4ke3Byb3BOYW1lfVwiYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xyXG4gICAgICAgICAgICB2YWwudHlwZSA9IGNjLkJvb2xlYW47XHJcbiAgICAgICAgICAgIGlmIChTVEFUSUNfQ0hFQ0spIHtcclxuICAgICAgICAgICAgICAgIGNjLndhcm5JRCgzNjA5LCBgXCIke2NsYXNzTmFtZX0uJHtwcm9wTmFtZX1cImApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xyXG4gICAgICAgICAgICB2YWwudHlwZSA9IGNjLkZsb2F0O1xyXG4gICAgICAgICAgICBpZiAoU1RBVElDX0NIRUNLKSB7XHJcbiAgICAgICAgICAgICAgICBjYy53YXJuSUQoMzYxMCwgYFwiJHtjbGFzc05hbWV9LiR7cHJvcE5hbWV9XCJgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKFNUQVRJQ19DSEVDSykge1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ051bWJlcic6XHJcbiAgICAgICAgICAgIGNjLndhcm5JRCg1NTEwLCBjbGFzc05hbWUsIHByb3BOYW1lKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnU3RyaW5nJzpcclxuICAgICAgICAgICAgY2Mud2FybihgVGhlIHR5cGUgb2YgXCIke2NsYXNzTmFtZX0uJHtwcm9wTmFtZX1cIiBtdXN0IGJlIGNjLlN0cmluZywgbm90IFwiU3RyaW5nXCIuYCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0Jvb2xlYW4nOlxyXG4gICAgICAgICAgICBjYy53YXJuKGBUaGUgdHlwZSBvZiBcIiR7Y2xhc3NOYW1lfS4ke3Byb3BOYW1lfVwiIG11c3QgYmUgY2MuQm9vbGVhbiwgbm90IFwiQm9vbGVhblwiLmApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdGbG9hdCc6XHJcbiAgICAgICAgICAgIGNjLndhcm4oYFRoZSB0eXBlIG9mIFwiJHtjbGFzc05hbWV9LiR7cHJvcE5hbWV9XCIgbXVzdCBiZSBjYy5GbG9hdCwgbm90IFwiRmxvYXRcIi5gKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnSW50ZWdlcic6XHJcbiAgICAgICAgICAgIGNjLndhcm4oYFRoZSB0eXBlIG9mIFwiJHtjbGFzc05hbWV9LiR7cHJvcE5hbWV9XCIgbXVzdCBiZSBjYy5JbnRlZ2VyLCBub3QgXCJJbnRlZ2VyXCIuYCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgbnVsbDpcclxuICAgICAgICAgICAgY2Mud2FybklEKDU1MTEsIGNsYXNzTmFtZSwgcHJvcE5hbWUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKENDX0VESVRPUiAmJiB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGlmIChjYy5DbGFzcy5faXNDQ0NsYXNzKHR5cGUpICYmIHZhbC5zZXJpYWxpemFibGUgIT09IGZhbHNlICYmICFqcy5fZ2V0Q2xhc3NJZCh0eXBlLCBmYWxzZSkpIHtcclxuICAgICAgICAgICAgY2Mud2FybklEKDU1MTIsIGNsYXNzTmFtZSwgcHJvcE5hbWUsIGNsYXNzTmFtZSwgcHJvcE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QmFzZUNsYXNzV2hlcmVQcm9wZXJ0eURlZmluZWRfREVWIChwcm9wTmFtZSwgY2xzKSB7XHJcbiAgICBpZiAoQ0NfREVWKSB7XHJcbiAgICAgICAgdmFyIHJlcztcclxuICAgICAgICBmb3IgKDsgY2xzICYmIGNscy5fX3Byb3BzX18gJiYgY2xzLl9fcHJvcHNfXy5pbmRleE9mKHByb3BOYW1lKSAhPT0gLTE7IGNscyA9IGNscy4kc3VwZXIpIHtcclxuICAgICAgICAgICAgcmVzID0gY2xzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXJlcykge1xyXG4gICAgICAgICAgICBjYy5lcnJvcigndW5rbm93biBlcnJvcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBfd3JhcE9wdGlvbnMgKGlzRVM2R2V0c2V0LCBfZGVmYXVsdCwgdHlwZSkge1xyXG4gICAgbGV0IHJlcyA9IGlzRVM2R2V0c2V0ID8geyBfc2hvcnQ6IHRydWUgfSA6IHsgX3Nob3J0OiB0cnVlLCBkZWZhdWx0OiBfZGVmYXVsdCB9O1xyXG4gICAgaWYgKHR5cGUpIHtcclxuICAgICAgICByZXMudHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnRzLmdldEZ1bGxGb3JtT2ZQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvcHRpb25zLCBpc0VTNkdldHNldCkge1xyXG4gICAgdmFyIGlzTGl0ZXJhbCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xyXG4gICAgaWYgKGlzTGl0ZXJhbCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykgJiYgb3B0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmV0dXJuIF93cmFwT3B0aW9ucyhpc0VTNkdldHNldCwgW10sIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gX3dyYXBPcHRpb25zKGlzRVM2R2V0c2V0LCBqcy5pc0NoaWxkQ2xhc3NPZihvcHRpb25zLCBjYy5WYWx1ZVR5cGUpID8gbmV3IG9wdGlvbnMoKSA6IG51bGwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIEF0dHJzLlByaW1pdGl2ZVR5cGUpIHtcclxuICAgICAgICByZXR1cm4gX3dyYXBPcHRpb25zKGlzRVM2R2V0c2V0LCBvcHRpb25zLmRlZmF1bHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIF93cmFwT3B0aW9ucyhpc0VTNkdldHNldCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnRzLnByZXByb2Nlc3NBdHRycyA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzLCBjbGFzc05hbWUsIGNscywgZXM2KSB7XHJcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IHByb3BlcnRpZXNbcHJvcE5hbWVdO1xyXG4gICAgICAgIHZhciBmdWxsRm9ybSA9IGV4cG9ydHMuZ2V0RnVsbEZvcm1PZlByb3BlcnR5KHZhbCwgZmFsc2UpO1xyXG4gICAgICAgIGlmIChmdWxsRm9ybSkge1xyXG4gICAgICAgICAgICB2YWwgPSBwcm9wZXJ0aWVzW3Byb3BOYW1lXSA9IGZ1bGxGb3JtO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGlmIChDQ19FRElUT1IpIHtcclxuICAgICAgICAgICAgICAgIGlmICgnZGVmYXVsdCcgaW4gdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC5nZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZXJyb3JJRCg1NTEzLCBjbGFzc05hbWUsIHByb3BOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsLnNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5lcnJvcklEKDU1MTQsIGNsYXNzTmFtZSwgcHJvcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjYy5DbGFzcy5faXNDQ0NsYXNzKHZhbC5kZWZhdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwuZGVmYXVsdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmVycm9ySUQoNTUxNSwgY2xhc3NOYW1lLCBwcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXZhbC5nZXQgJiYgIXZhbC5zZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVUeXBlU2NyaXB0ID0gZXM2O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWF5YmVUeXBlU2NyaXB0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmVycm9ySUQoNTUxNiwgY2xhc3NOYW1lLCBwcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChDQ19ERVYgJiYgIXZhbC5vdmVycmlkZSAmJiBjbHMuX19wcm9wc19fLmluZGV4T2YocHJvcE5hbWUpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgb3ZlcnJpZGVcclxuICAgICAgICAgICAgICAgIHZhciBiYXNlQ2xhc3MgPSBqcy5nZXRDbGFzc05hbWUoZ2V0QmFzZUNsYXNzV2hlcmVQcm9wZXJ0eURlZmluZWRfREVWKHByb3BOYW1lLCBjbHMpKTtcclxuICAgICAgICAgICAgICAgIGNjLndhcm5JRCg1NTE3LCBjbGFzc05hbWUsIHByb3BOYW1lLCBiYXNlQ2xhc3MsIHByb3BOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbm90aWZ5ID0gdmFsLm5vdGlmeTtcclxuICAgICAgICAgICAgaWYgKG5vdGlmeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKENDX0RFViAmJiBlczYpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5lcnJvcignbm90IHlldCBzdXBwb3J0IG5vdGlmeSBhdHRyaWJ1dGUgZm9yIEVTNiBDbGFzc2VzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZU5vdGlmeSh2YWwsIHByb3BOYW1lLCBub3RpZnksIHByb3BlcnRpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoJ3R5cGUnIGluIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgcGFyc2VUeXBlKHZhbCwgdmFsLnR5cGUsIGNsYXNzTmFtZSwgcHJvcE5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuaWYgKENDX0RFVikge1xyXG4gICAgY29uc3QgQ0FMTF9TVVBFUl9ERVNUUk9ZX1JFR19ERVYgPSAvXFxiXFwuX3N1cGVyXFxifGRlc3Ryb3lcXHMqXFwuXFxzKmNhbGxcXHMqXFwoXFxzKlxcdytcXHMqWyx8KV0vO1xyXG4gICAgZXhwb3J0cy5kb1ZhbGlkYXRlTWV0aG9kV2l0aFByb3BzX0RFViA9IGZ1bmN0aW9uIChmdW5jLCBmdW5jTmFtZSwgY2xhc3NOYW1lLCBjbHMsIGJhc2UpIHtcclxuICAgICAgICBpZiAoY2xzLl9fcHJvcHNfXyAmJiBjbHMuX19wcm9wc19fLmluZGV4T2YoZnVuY05hbWUpID49IDApIHtcclxuICAgICAgICAgICAgLy8gZmluZCBjbGFzcyB0aGF0IGRlZmluZXMgdGhpcyBtZXRob2QgYXMgYSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICB2YXIgYmFzZUNsYXNzTmFtZSA9IGpzLmdldENsYXNzTmFtZShnZXRCYXNlQ2xhc3NXaGVyZVByb3BlcnR5RGVmaW5lZF9ERVYoZnVuY05hbWUsIGNscykpO1xyXG4gICAgICAgICAgICBjYy5lcnJvcklEKDM2NDgsIGNsYXNzTmFtZSwgZnVuY05hbWUsIGJhc2VDbGFzc05hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmdW5jTmFtZSA9PT0gJ2Rlc3Ryb3knICYmXHJcbiAgICAgICAgICAgIGpzLmlzQ2hpbGRDbGFzc09mKGJhc2UsIGNjLkNvbXBvbmVudCkgJiZcclxuICAgICAgICAgICAgIUNBTExfU1VQRVJfREVTVFJPWV9SRUdfREVWLnRlc3QoZnVuYylcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY2MuZXJyb3IoYE92ZXJ3cml0aW5nICcke2Z1bmNOYW1lfScgZnVuY3Rpb24gaW4gJyR7Y2xhc3NOYW1lfScgY2xhc3Mgd2l0aG91dCBjYWxsaW5nIHN1cGVyIGlzIG5vdCBhbGxvd2VkLiBDYWxsIHRoZSBzdXBlciBmdW5jdGlvbiBpbiAnJHtmdW5jTmFtZX0nIHBsZWFzZS5gKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnRzLnZhbGlkYXRlTWV0aG9kV2l0aFByb3BzID0gZnVuY3Rpb24gKGZ1bmMsIGZ1bmNOYW1lLCBjbGFzc05hbWUsIGNscywgYmFzZSkge1xyXG4gICAgaWYgKENDX0RFViAmJiBmdW5jTmFtZSA9PT0gJ2NvbnN0cnVjdG9yJykge1xyXG4gICAgICAgIGNjLmVycm9ySUQoMzY0MywgY2xhc3NOYW1lKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbicgfHwgZnVuYyA9PT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChDQ19ERVYpIHtcclxuICAgICAgICAgICAgdGhpcy5kb1ZhbGlkYXRlTWV0aG9kV2l0aFByb3BzX0RFVihmdW5jLCBmdW5jTmFtZSwgY2xhc3NOYW1lLCBjbHMsIGJhc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChDQ19ERVYpIHtcclxuICAgICAgICAgICAgaWYgKGZ1bmMgPT09IGZhbHNlICYmIGJhc2UgJiYgYmFzZS5wcm90b3R5cGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIG92ZXJyaWRlXHJcbiAgICAgICAgICAgICAgICB2YXIgb3ZlcnJpZGVkID0gYmFzZS5wcm90b3R5cGVbZnVuY05hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvdmVycmlkZWQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZUZ1YyA9IGpzLmdldENsYXNzTmFtZShiYXNlKSArICcuJyArIGZ1bmNOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJGdWMgPSBjbGFzc05hbWUgKyAnLicgKyBmdW5jTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBjYy53YXJuSUQoMzYyNCwgc3ViRnVjLCBiYXNlRnVjLCBzdWJGdWMsIHN1YkZ1Yyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGNvcnJlY3QgPSBUWVBPX1RPX0NPUlJFQ1RfREVWW2Z1bmNOYW1lXTtcclxuICAgICAgICAgICAgaWYgKGNvcnJlY3QpIHtcclxuICAgICAgICAgICAgICAgIGNjLndhcm5JRCgzNjIxLCBjbGFzc05hbWUsIGZ1bmNOYW1lLCBjb3JyZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChmdW5jKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5lcnJvcklEKDM2MjIsIGNsYXNzTmFtZSwgZnVuY05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59O1xyXG4iXSwic291cmNlUm9vdCI6Ii8ifQ==