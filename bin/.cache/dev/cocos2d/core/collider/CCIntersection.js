
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/collider/CCIntersection.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/

/**
 * !#en Intersection helper class
 * !#zh 辅助类，用于测试形状与形状是否相交
 * @class Intersection
 * @static
 */
var Intersection = {};
/**
 * !#en Test line and line
 * !#zh 测试线段与线段是否相交
 * @method lineLine
 * @param {Vec2} a1 - The start point of the first line
 * @param {Vec2} a2 - The end point of the first line
 * @param {Vec2} b1 - The start point of the second line
 * @param {Vec2} b2 - The end point of the second line
 * @return {boolean}
 */

function lineLine(a1, a2, b1, b2) {
  // jshint camelcase:false
  var ua_t = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);
  var ub_t = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x);
  var u_b = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);

  if (u_b !== 0) {
    var ua = ua_t / u_b;
    var ub = ub_t / u_b;

    if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {
      return true;
    }
  }

  return false;
}

Intersection.lineLine = lineLine;
/**
 * !#en Test line and rect
 * !#zh 测试线段与矩形是否相交
 * @method lineRect
 * @param {Vec2} a1 - The start point of the line
 * @param {Vec2} a2 - The end point of the line
 * @param {Rect} b - The rect
 * @return {boolean}
 */

function lineRect(a1, a2, b) {
  var r0 = new cc.Vec2(b.x, b.y);
  var r1 = new cc.Vec2(b.x, b.yMax);
  var r2 = new cc.Vec2(b.xMax, b.yMax);
  var r3 = new cc.Vec2(b.xMax, b.y);
  if (lineLine(a1, a2, r0, r1)) return true;
  if (lineLine(a1, a2, r1, r2)) return true;
  if (lineLine(a1, a2, r2, r3)) return true;
  if (lineLine(a1, a2, r3, r0)) return true;
  return false;
}

Intersection.lineRect = lineRect;
/**
 * !#en Test line and polygon
 * !#zh 测试线段与多边形是否相交
 * @method linePolygon
 * @param {Vec2} a1 - The start point of the line
 * @param {Vec2} a2 - The end point of the line
 * @param {Vec2[]} b - The polygon, a set of points
 * @return {boolean}
 */

function linePolygon(a1, a2, b) {
  var length = b.length;

  for (var i = 0; i < length; ++i) {
    var b1 = b[i];
    var b2 = b[(i + 1) % length];
    if (lineLine(a1, a2, b1, b2)) return true;
  }

  return false;
}

Intersection.linePolygon = linePolygon;
/**
 * !#en Test rect and rect
 * !#zh 测试矩形与矩形是否相交
 * @method rectRect
 * @param {Rect} a - The first rect
 * @param {Rect} b - The second rect
 * @return {boolean}
 */

function rectRect(a, b) {
  // jshint camelcase:false
  var a_min_x = a.x;
  var a_min_y = a.y;
  var a_max_x = a.x + a.width;
  var a_max_y = a.y + a.height;
  var b_min_x = b.x;
  var b_min_y = b.y;
  var b_max_x = b.x + b.width;
  var b_max_y = b.y + b.height;
  return a_min_x <= b_max_x && a_max_x >= b_min_x && a_min_y <= b_max_y && a_max_y >= b_min_y;
}

Intersection.rectRect = rectRect;
/**
 * !#en Test rect and polygon
 * !#zh 测试矩形与多边形是否相交
 * @method rectPolygon
 * @param {Rect} a - The rect
 * @param {Vec2[]} b - The polygon, a set of points
 * @return {boolean}
 */

function rectPolygon(a, b) {
  var i, l;
  var r0 = new cc.Vec2(a.x, a.y);
  var r1 = new cc.Vec2(a.x, a.yMax);
  var r2 = new cc.Vec2(a.xMax, a.yMax);
  var r3 = new cc.Vec2(a.xMax, a.y); // intersection check

  if (linePolygon(r0, r1, b)) return true;
  if (linePolygon(r1, r2, b)) return true;
  if (linePolygon(r2, r3, b)) return true;
  if (linePolygon(r3, r0, b)) return true; // check if a contains b

  for (i = 0, l = b.length; i < l; ++i) {
    if (pointInPolygon(b[i], a)) return true;
  } // check if b contains a


  if (pointInPolygon(r0, b)) return true;
  if (pointInPolygon(r1, b)) return true;
  if (pointInPolygon(r2, b)) return true;
  if (pointInPolygon(r3, b)) return true;
  return false;
}

Intersection.rectPolygon = rectPolygon;
/**
 * !#en Test polygon and polygon
 * !#zh 测试多边形与多边形是否相交
 * @method polygonPolygon
 * @param {Vec2[]} a - The first polygon, a set of points
 * @param {Vec2[]} b - The second polygon, a set of points
 * @return {boolean}
 */

function polygonPolygon(a, b) {
  var i, l; // check if a intersects b

  for (i = 0, l = a.length; i < l; ++i) {
    var a1 = a[i];
    var a2 = a[(i + 1) % l];
    if (linePolygon(a1, a2, b)) return true;
  } // check if a contains b


  for (i = 0, l = b.length; i < l; ++i) {
    if (pointInPolygon(b[i], a)) return true;
  } // check if b contains a


  for (i = 0, l = a.length; i < l; ++i) {
    if (pointInPolygon(a[i], b)) return true;
  }

  return false;
}

Intersection.polygonPolygon = polygonPolygon;
/**
 * !#en Test circle and circle
 * !#zh 测试圆形与圆形是否相交
 * @method circleCircle
 * @param {Object} a - Object contains position and radius
 * @param {Object} b - Object contains position and radius
 * @return {boolean}
 * @typescript circleCircle(a: {position: Vec2, radius: number}, b: {position: Vec2, radius: number}): boolean
 */

function circleCircle(a, b) {
  var distance = a.position.sub(b.position).mag();
  return distance < a.radius + b.radius;
}

Intersection.circleCircle = circleCircle;
/**
 * !#en Test polygon and circle
 * !#zh 测试矩形与圆形是否相交
 * @method polygonCircle
 * @param {Vec2[]} polygon - The Polygon, a set of points
 * @param {Object} circle - Object contains position and radius
 * @return {boolean}
 * @typescript polygonCircle(polygon: Vec2[], circle: {position: Vec2, radius: number}): boolean
 */

function polygonCircle(polygon, circle) {
  var position = circle.position;

  if (pointInPolygon(position, polygon)) {
    return true;
  }

  for (var i = 0, l = polygon.length; i < l; i++) {
    var start = i === 0 ? polygon[polygon.length - 1] : polygon[i - 1];
    var end = polygon[i];

    if (pointLineDistance(position, start, end, true) < circle.radius) {
      return true;
    }
  }

  return false;
}

Intersection.polygonCircle = polygonCircle;
/**
 * !#en Test whether the point is in the polygon
 * !#zh 测试一个点是否在一个多边形中
 * @method pointInPolygon
 * @param {Vec2} point - The point
 * @param {Vec2[]} polygon - The polygon, a set of points
 * @return {boolean}
 */

function pointInPolygon(point, polygon) {
  var inside = false;
  var x = point.x;
  var y = point.y; // use some raycasting to test hits
  // https://github.com/substack/point-in-polygon/blob/master/index.js

  var length = polygon.length;

  for (var i = 0, j = length - 1; i < length; j = i++) {
    var xi = polygon[i].x,
        yi = polygon[i].y,
        xj = polygon[j].x,
        yj = polygon[j].y,
        intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;
    if (intersect) inside = !inside;
  }

  return inside;
}

Intersection.pointInPolygon = pointInPolygon;
/**
 * !#en Calculate the distance of point to line.
 * !#zh 计算点到直线的距离。如果这是一条线段并且垂足不在线段内，则会计算点到线段端点的距离。
 * @method pointLineDistance
 * @param {Vec2} point - The point
 * @param {Vec2} start - The start point of line
 * @param {Vec2} end - The end point of line
 * @param {boolean} isSegment - whether this line is a segment
 * @return {number}
 */

function pointLineDistance(point, start, end, isSegment) {
  var dx = end.x - start.x;
  var dy = end.y - start.y;
  var d = dx * dx + dy * dy;
  var t = ((point.x - start.x) * dx + (point.y - start.y) * dy) / d;
  var p;

  if (!isSegment) {
    p = cc.v2(start.x + t * dx, start.y + t * dy);
  } else {
    if (d) {
      if (t < 0) p = start;else if (t > 1) p = end;else p = cc.v2(start.x + t * dx, start.y + t * dy);
    } else {
      p = start;
    }
  }

  dx = point.x - p.x;
  dy = point.y - p.y;
  return Math.sqrt(dx * dx + dy * dy);
}

Intersection.pointLineDistance = pointLineDistance;
cc.Intersection = module.exports = Intersection;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXGNvcmVcXGNvbGxpZGVyXFxDQ0ludGVyc2VjdGlvbi5qcyJdLCJuYW1lcyI6WyJJbnRlcnNlY3Rpb24iLCJsaW5lTGluZSIsImExIiwiYTIiLCJiMSIsImIyIiwidWFfdCIsIngiLCJ5IiwidWJfdCIsInVfYiIsInVhIiwidWIiLCJsaW5lUmVjdCIsImIiLCJyMCIsImNjIiwiVmVjMiIsInIxIiwieU1heCIsInIyIiwieE1heCIsInIzIiwibGluZVBvbHlnb24iLCJsZW5ndGgiLCJpIiwicmVjdFJlY3QiLCJhIiwiYV9taW5feCIsImFfbWluX3kiLCJhX21heF94Iiwid2lkdGgiLCJhX21heF95IiwiaGVpZ2h0IiwiYl9taW5feCIsImJfbWluX3kiLCJiX21heF94IiwiYl9tYXhfeSIsInJlY3RQb2x5Z29uIiwibCIsInBvaW50SW5Qb2x5Z29uIiwicG9seWdvblBvbHlnb24iLCJjaXJjbGVDaXJjbGUiLCJkaXN0YW5jZSIsInBvc2l0aW9uIiwic3ViIiwibWFnIiwicmFkaXVzIiwicG9seWdvbkNpcmNsZSIsInBvbHlnb24iLCJjaXJjbGUiLCJzdGFydCIsImVuZCIsInBvaW50TGluZURpc3RhbmNlIiwicG9pbnQiLCJpbnNpZGUiLCJqIiwieGkiLCJ5aSIsInhqIiwieWoiLCJpbnRlcnNlY3QiLCJpc1NlZ21lbnQiLCJkeCIsImR5IiwiZCIsInQiLCJwIiwidjIiLCJNYXRoIiwic3FydCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSUEsWUFBWSxHQUFHLEVBQW5CO0FBRUE7QUFDQTtBQUNBO0FB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SztBQUNERyxNQUFBQSxDQUFDLEdBQUdoQixLQUFKO0FBQ0g7QUFDSjs7QUFFRFksRUFBQUEsRUFBRSxHQUFHVCxLQUFLLENBQUMvQyxDQUFOLEdBQVU0RCxDQUFDLENBQUM1RCxDQUFqQjtBQUNBeUQsRUFBQUEsRUFBRSxHQUFHVixLQUFLLENBQUM5QyxDQUFOLEdBQVUyRCxDQUFDLENBQUMzRCxDQUFqQjtBQUNBLFNBQU82RCxJQUFJLENBQUNDLElBQUwsQ0FBVVAsRUFBRSxHQUFDQSxFQUFILEdBQVFDLEVBQUUsR0FBQ0EsRUFBckIsQ0FBUDtBQUNIOztBQUVEaEUsWUFBWSxDQUFDcUQsaUJBQWIsR0FBaUNBLGlCQUFqQztBQUdBckMsRUFBRSxDQUFDaEIsWUFBSCxHQUFrQnVFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnhFLFlBQW5DIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cclxuXHJcbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcclxuIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcclxuIHRvIHVzZSBDb2NvcyBDcmVhdG9yIHNvbGVseSB0byBkZXZlbG9wIGdhbWVzIG9uIHlvdXIgdGFyZ2V0IHBsYXRmb3Jtcy4gWW91IHNoYWxsXHJcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXHJcbiB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXHJcbiBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgQ29jb3MgQ3JlYXRvci5cclxuXHJcbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxyXG4gWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuIHJlc2VydmVzIGFsbCByaWdodHMgbm90IGV4cHJlc3NseSBncmFudGVkIHRvIHlvdS5cclxuXHJcbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuIFRIRSBTT0ZUV0FSRS5cclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogISNlbiBJbnRlcnNlY3Rpb24gaGVscGVyIGNsYXNzXHJcbiAqICEjemgg6L6F5Yqp57G777yM55So5LqO5rWL6K+V5b2i54q25LiO5b2i54q25piv5ZCm55u45LqkXHJcbiAqIEBjbGFzcyBJbnRlcnNlY3Rpb25cclxuICogQHN0YXRpY1xyXG4gKi9cclxudmFyIEludGVyc2VjdGlvbiA9IHt9O1xyXG5cclxuLyoqXHJcbiAqICEjZW4gVGVzdCBsaW5lIGFuZCBsaW5lXHJcbiAqICEjemgg5rWL6K+V57q/5q615LiO57q/5q615piv5ZCm55u45LqkXHJcbiAqIEBtZXRob2QgbGluZUxpbmVcclxuICogQHBhcmFtIHtWZWMyfSBhMSAtIFRoZSBzdGFydCBwb2ludCBvZiB0aGUgZmlyc3QgbGluZVxyXG4gKiBAcGFyYW0ge1ZlYzJ9IGEyIC0gVGhlIGVuZCBwb2ludCBvZiB0aGUgZmlyc3QgbGluZVxyXG4gKiBAcGFyYW0ge1ZlYzJ9IGIxIC0gVGhlIHN0YXJ0IHBvaW50IG9mIHRoZSBzZWNvbmQgbGluZVxyXG4gKiBAcGFyYW0ge1ZlYzJ9IGIyIC0gVGhlIGVuZCBwb2ludCBvZiB0aGUgc2Vjb25kIGxpbmVcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXHJcbmZ1bmN0aW9uIGxpbmVMaW5lICggYTEsIGEyLCBiMSwgYjIgKSB7XHJcbiAgICAvLyBqc2hpbnQgY2FtZWxjYXNlOmZhbHNlXHJcblxyXG4gICAgdmFyIHVhX3QgPSAoYjIueCAtIGIxLngpICogKGExLnkgLSBiMS55KSAtIChiMi55IC0gYjEueSkgKiAoYTEueCAtIGIxLngpO1xyXG4gICAgdmFyIHViX3QgPSAoYTIueCAtIGExLngpICogKGExLnkgLSBiMS55KSAtIChhMi55IC0gYTEueSkgKiAoYTEueCAtIGIxLngpO1xyXG4gICAgdmFyIHVfYiAgPSAoYjIueSAtIGIxLnkpICogKGEyLnggLSBhMS54KSAtIChiMi54IC0gYjEueCkgKiAoYTIueSAtIGExLnkpO1xyXG5cclxuICAgIGlmICggdV9iICE9PSAwICkge1xyXG4gICAgICAgIHZhciB1YSA9IHVhX3QgLyB1X2I7XHJcbiAgICAgICAgdmFyIHViID0gdWJfdCAvIHVfYjtcclxuXHJcbiAgICAgICAgaWYgKCAwIDw9IHVhICYmIHVhIDw9IDEgJiYgMCA8PSB1YiAmJiB1YiA8PSAxICkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5JbnRlcnNlY3Rpb24ubGluZUxpbmUgPSBsaW5lTGluZTtcclxuXHJcbi8qKlxyXG4gKiAhI2VuIFRlc3QgbGluZSBhbmQgcmVjdFxyXG4gKiAhI3poIOa1i+ivlee6v+auteS4juefqeW9ouaYr+WQpuebuOS6pFxyXG4gKiBAbWV0aG9kIGxpbmVSZWN0XHJcbiAqIEBwYXJhbSB7VmVjMn0gYTEgLSBUaGUgc3RhcnQgcG9pbnQgb2YgdGhlIGxpbmVcclxuICogQHBhcmFtIHtWZWMyfSBhMiAtIFRoZSBlbmQgcG9pbnQgb2YgdGhlIGxpbmVcclxuICogQHBhcmFtIHtSZWN0fSBiIC0gVGhlIHJlY3RcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXHJcbmZ1bmN0aW9uIGxpbmVSZWN0ICggYTEsIGEyLCBiICkge1xyXG4gICAgdmFyIHIwID0gbmV3IGNjLlZlYzIoIGIueCwgYi55ICk7XHJcbiAgICB2YXIgcjEgPSBuZXcgY2MuVmVjMiggYi54LCBiLnlNYXggKTtcclxuICAgIHZhciByMiA9IG5ldyBjYy5WZWMyKCBiLnhNYXgsIGIueU1heCApO1xyXG4gICAgdmFyIHIzID0gbmV3IGNjLlZlYzIoIGIueE1heCwgYi55ICk7XHJcblxyXG4gICAgaWYgKCBsaW5lTGluZSggYTEsIGEyLCByMCwgcjEgKSApXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgaWYgKCBsaW5lTGluZSggYTEsIGEyLCByMSwgcjIgKSApXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgaWYgKCBsaW5lTGluZSggYTEsIGEyLCByMiwgcjMgKSApXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgaWYgKCBsaW5lTGluZSggYTEsIGEyLCByMywgcjAgKSApXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5JbnRlcnNlY3Rpb24ubGluZVJlY3QgPSBsaW5lUmVjdDtcclxuXHJcbi8qKlxyXG4gKiAhI2VuIFRlc3QgbGluZSBhbmQgcG9seWdvblxyXG4gKiAhI3poIOa1i+ivlee6v+auteS4juWkmui+ueW9ouaYr+WQpuebuOS6pFxyXG4gKiBAbWV0aG9kIGxpbmVQb2x5Z29uXHJcbiAqIEBwYXJhbSB7VmVjMn0gYTEgLSBUaGUgc3RhcnQgcG9pbnQgb2YgdGhlIGxpbmVcclxuICogQHBhcmFtIHtWZWMyfSBhMiAtIFRoZSBlbmQgcG9pbnQgb2YgdGhlIGxpbmVcclxuICogQHBhcmFtIHtWZWMyW119IGIgLSBUaGUgcG9seWdvbiwgYSBzZXQgb2YgcG9pbnRzXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAqL1xyXG5mdW5jdGlvbiBsaW5lUG9seWdvbiAoIGExLCBhMiwgYiApIHtcclxuICAgIHZhciBsZW5ndGggPSBiLmxlbmd0aDtcclxuXHJcbiAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSApIHtcclxuICAgICAgICB2YXIgYjEgPSBiW2ldO1xyXG4gICAgICAgIHZhciBiMiA9IGJbKGkrMSklbGVuZ3RoXTtcclxuXHJcbiAgICAgICAgaWYgKCBsaW5lTGluZSggYTEsIGEyLCBiMSwgYjIgKSApXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuSW50ZXJzZWN0aW9uLmxpbmVQb2x5Z29uID0gbGluZVBvbHlnb247XHJcblxyXG4vKipcclxuICogISNlbiBUZXN0IHJlY3QgYW5kIHJlY3RcclxuICogISN6aCDmtYvor5Xnn6nlvaLkuI7nn6nlvaLmmK/lkKbnm7jkuqRcclxuICogQG1ldGhvZCByZWN0UmVjdFxyXG4gKiBAcGFyYW0ge1JlY3R9IGEgLSBUaGUgZmlyc3QgcmVjdFxyXG4gKiBAcGFyYW0ge1JlY3R9IGIgLSBUaGUgc2Vjb25kIHJlY3RcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXHJcbmZ1bmN0aW9uIHJlY3RSZWN0ICggYSwgYiApIHtcclxuICAgIC8vIGpzaGludCBjYW1lbGNhc2U6ZmFsc2VcclxuXHJcbiAgICB2YXIgYV9taW5feCA9IGEueDtcclxuICAgIHZhciBhX21pbl95ID0gYS55O1xyXG4gICAgdmFyIGFfbWF4X3ggPSBhLnggKyBhLndpZHRoO1xyXG4gICAgdmFyIGFfbWF4X3kgPSBhLnkgKyBhLmhlaWdodDtcclxuXHJcbiAgICB2YXIgYl9taW5feCA9IGIueDtcclxuICAgIHZhciBiX21pbl95ID0gYi55O1xyXG4gICAgdmFyIGJfbWF4X3ggPSBiLnggKyBiLndpZHRoO1xyXG4gICAgdmFyIGJfbWF4X3kgPSBiLnkgKyBiLmhlaWdodDtcclxuXHJcbiAgICByZXR1cm4gYV9taW5feCA8PSBiX21heF94ICYmXHJcbiAgICAgICAgICAgYV9tYXhfeCA+PSBiX21pbl94ICYmXHJcbiAgICAgICAgICAgYV9taW5feSA8PSBiX21heF95ICYmXHJcbiAgICAgICAgICAgYV9tYXhfeSA+PSBiX21pbl95XHJcbiAgICAgICAgICAgO1xyXG59XHJcblxyXG5JbnRlcnNlY3Rpb24ucmVjdFJlY3QgPSByZWN0UmVjdDtcclxuXHJcbi8qKlxyXG4gKiAhI2VuIFRlc3QgcmVjdCBhbmQgcG9seWdvblxyXG4gKiAhI3poIOa1i+ivleefqeW9ouS4juWkmui+ueW9ouaYr+WQpuebuOS6pFxyXG4gKiBAbWV0aG9kIHJlY3RQb2x5Z29uXHJcbiAqIEBwYXJhbSB7UmVjdH0gYSAtIFRoZSByZWN0XHJcbiAqIEBwYXJhbSB7VmVjMltdfSBiIC0gVGhlIHBvbHlnb24sIGEgc2V0IG9mIHBvaW50c1xyXG4gKiBAcmV0dXJuIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gcmVjdFBvbHlnb24gKCBhLCBiICkge1xyXG4gICAgdmFyIGksIGw7XHJcbiAgICB2YXIgcjAgPSBuZXcgY2MuVmVjMiggYS54LCBhLnkgKTtcclxuICAgIHZhciByMSA9IG5ldyBjYy5WZWMyKCBhLngsIGEueU1heCApO1xyXG4gICAgdmFyIHIyID0gbmV3IGNjLlZlYzIoIGEueE1heCwgYS55TWF4ICk7XHJcbiAgICB2YXIgcjMgPSBuZXcgY2MuVmVjMiggYS54TWF4LCBhLnkgKTtcclxuXHJcbiAgICAvLyBpbnRlcnNlY3Rpb24gY2hlY2tcclxuICAgIGlmICggbGluZVBvbHlnb24oIHIwLCByMSwgYiApIClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICBpZiAoIGxpbmVQb2x5Z29uKCByMSwgcjIsIGIgKSApXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgaWYgKCBsaW5lUG9seWdvbiggcjIsIHIzLCBiICkgKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgIGlmICggbGluZVBvbHlnb24oIHIzLCByMCwgYiApIClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAvLyBjaGVjayBpZiBhIGNvbnRhaW5zIGJcclxuICAgIGZvciAoIGkgPSAwLCBsID0gYi5sZW5ndGg7IGkgPCBsOyArK2kgKSB7XHJcbiAgICAgICAgaWYgKCBwb2ludEluUG9seWdvbihiW2ldLCBhKSApXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIGlmIGIgY29udGFpbnMgYVxyXG4gICAgaWYgKCBwb2ludEluUG9seWdvbihyMCwgYikgKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgIGlmICggcG9pbnRJblBvbHlnb24ocjEsIGIpIClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICBpZiAoIHBvaW50SW5Qb2x5Z29uKHIyLCBiKSApXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgaWYgKCBwb2ludEluUG9seWdvbihyMywgYikgKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuSW50ZXJzZWN0aW9uLnJlY3RQb2x5Z29uID0gcmVjdFBvbHlnb247XHJcblxyXG4vKipcclxuICogISNlbiBUZXN0IHBvbHlnb24gYW5kIHBvbHlnb25cclxuICogISN6aCDmtYvor5XlpJrovrnlvaLkuI7lpJrovrnlvaLmmK/lkKbnm7jkuqRcclxuICogQG1ldGhvZCBwb2x5Z29uUG9seWdvblxyXG4gKiBAcGFyYW0ge1ZlYzJbXX0gYSAtIFRoZSBmaXJzdCBwb2x5Z29uLCBhIHNldCBvZiBwb2ludHNcclxuICogQHBhcmFtIHtWZWMyW119IGIgLSBUaGUgc2Vjb25kIHBvbHlnb24sIGEgc2V0IG9mIHBvaW50c1xyXG4gKiBAcmV0dXJuIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gcG9seWdvblBvbHlnb24gKCBhLCBiICkge1xyXG4gICAgdmFyIGksIGw7XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgYSBpbnRlcnNlY3RzIGJcclxuICAgIGZvciAoIGkgPSAwLCBsID0gYS5sZW5ndGg7IGkgPCBsOyArK2kgKSB7XHJcbiAgICAgICAgdmFyIGExID0gYVtpXTtcclxuICAgICAgICB2YXIgYTIgPSBhWyhpKzEpJWxdO1xyXG5cclxuICAgICAgICBpZiAoIGxpbmVQb2x5Z29uKCBhMSwgYTIsIGIgKSApXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIGlmIGEgY29udGFpbnMgYlxyXG4gICAgZm9yICggaSA9IDAsIGwgPSBiLmxlbmd0aDsgaSA8IGw7ICsraSApIHtcclxuICAgICAgICBpZiAoIHBvaW50SW5Qb2x5Z29uKGJbaV0sIGEpIClcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgYiBjb250YWlucyBhXHJcbiAgICBmb3IgKCBpID0gMCwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgKytpICkge1xyXG4gICAgICAgIGlmICggcG9pbnRJblBvbHlnb24oIGFbaV0sIGIgKSApXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuSW50ZXJzZWN0aW9uLnBvbHlnb25Qb2x5Z29uID0gcG9seWdvblBvbHlnb247XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiAhI2VuIFRlc3QgY2lyY2xlIGFuZCBjaXJjbGVcclxuICogISN6aCDmtYvor5XlnIblvaLkuI7lnIblvaLmmK/lkKbnm7jkuqRcclxuICogQG1ldGhvZCBjaXJjbGVDaXJjbGVcclxuICogQHBhcmFtIHtPYmplY3R9IGEgLSBPYmplY3QgY29udGFpbnMgcG9zaXRpb24gYW5kIHJhZGl1c1xyXG4gKiBAcGFyYW0ge09iamVjdH0gYiAtIE9iamVjdCBjb250YWlucyBwb3NpdGlvbiBhbmQgcmFkaXVzXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAqIEB0eXBlc2NyaXB0IGNpcmNsZUNpcmNsZShhOiB7cG9zaXRpb246IFZlYzIsIHJhZGl1czogbnVtYmVyfSwgYjoge3Bvc2l0aW9uOiBWZWMyLCByYWRpdXM6IG51bWJlcn0pOiBib29sZWFuXHJcbiAqL1xyXG5mdW5jdGlvbiBjaXJjbGVDaXJjbGUgKGEsIGIpIHtcclxuICAgIHZhciBkaXN0YW5jZSA9IGEucG9zaXRpb24uc3ViKGIucG9zaXRpb24pLm1hZygpO1xyXG4gICAgcmV0dXJuIGRpc3RhbmNlIDwgKGEucmFkaXVzICsgYi5yYWRpdXMpO1xyXG59XHJcblxyXG5JbnRlcnNlY3Rpb24uY2lyY2xlQ2lyY2xlID0gY2lyY2xlQ2lyY2xlO1xyXG5cclxuXHJcbi8qKlxyXG4gKiAhI2VuIFRlc3QgcG9seWdvbiBhbmQgY2lyY2xlXHJcbiAqICEjemgg5rWL6K+V55+p5b2i5LiO5ZyG5b2i5piv5ZCm55u45LqkXHJcbiAqIEBtZXRob2QgcG9seWdvbkNpcmNsZVxyXG4gKiBAcGFyYW0ge1ZlYzJbXX0gcG9seWdvbiAtIFRoZSBQb2x5Z29uLCBhIHNldCBvZiBwb2ludHNcclxuICogQHBhcmFtIHtPYmplY3R9IGNpcmNsZSAtIE9iamVjdCBjb250YWlucyBwb3NpdGlvbiBhbmQgcmFkaXVzXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAqIEB0eXBlc2NyaXB0IHBvbHlnb25DaXJjbGUocG9seWdvbjogVmVjMltdLCBjaXJjbGU6IHtwb3NpdGlvbjogVmVjMiwgcmFkaXVzOiBudW1iZXJ9KTogYm9vbGVhblxyXG4gKi9cclxuZnVuY3Rpb24gcG9seWdvbkNpcmNsZSAocG9seWdvbiwgY2lyY2xlKSB7XHJcbiAgICB2YXIgcG9zaXRpb24gPSBjaXJjbGUucG9zaXRpb247XHJcbiAgICBpZiAocG9pbnRJblBvbHlnb24ocG9zaXRpb24sIHBvbHlnb24pKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwb2x5Z29uLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHZhciBzdGFydCA9IGkgPT09IDAgPyBwb2x5Z29uW3BvbHlnb24ubGVuZ3RoIC0gMV0gOiBwb2x5Z29uW2ktIDFdO1xyXG4gICAgICAgIHZhciBlbmQgPSBwb2x5Z29uW2ldO1xyXG5cclxuICAgICAgICBpZiAocG9pbnRMaW5lRGlzdGFuY2UocG9zaXRpb24sIHN0YXJ0LCBlbmQsIHRydWUpIDwgY2lyY2xlLnJhZGl1cykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5JbnRlcnNlY3Rpb24ucG9seWdvbkNpcmNsZSA9IHBvbHlnb25DaXJjbGU7XHJcblxyXG4vKipcclxuICogISNlbiBUZXN0IHdoZXRoZXIgdGhlIHBvaW50IGlzIGluIHRoZSBwb2x5Z29uXHJcbiAqICEjemgg5rWL6K+V5LiA5Liq54K55piv5ZCm5Zyo5LiA5Liq5aSa6L655b2i5LitXHJcbiAqIEBtZXRob2QgcG9pbnRJblBvbHlnb25cclxuICogQHBhcmFtIHtWZWMyfSBwb2ludCAtIFRoZSBwb2ludFxyXG4gKiBAcGFyYW0ge1ZlYzJbXX0gcG9seWdvbiAtIFRoZSBwb2x5Z29uLCBhIHNldCBvZiBwb2ludHNcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXHJcbmZ1bmN0aW9uIHBvaW50SW5Qb2x5Z29uIChwb2ludCwgcG9seWdvbikge1xyXG4gICAgdmFyIGluc2lkZSA9IGZhbHNlO1xyXG4gICAgdmFyIHggPSBwb2ludC54O1xyXG4gICAgdmFyIHkgPSBwb2ludC55O1xyXG5cclxuICAgIC8vIHVzZSBzb21lIHJheWNhc3RpbmcgdG8gdGVzdCBoaXRzXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc3Vic3RhY2svcG9pbnQtaW4tcG9seWdvbi9ibG9iL21hc3Rlci9pbmRleC5qc1xyXG4gICAgdmFyIGxlbmd0aCA9IHBvbHlnb24ubGVuZ3RoO1xyXG5cclxuICAgIGZvciAoIHZhciBpID0gMCwgaiA9IGxlbmd0aC0xOyBpIDwgbGVuZ3RoOyBqID0gaSsrICkge1xyXG4gICAgICAgIHZhciB4aSA9IHBvbHlnb25baV0ueCwgeWkgPSBwb2x5Z29uW2ldLnksXHJcbiAgICAgICAgICAgIHhqID0gcG9seWdvbltqXS54LCB5aiA9IHBvbHlnb25bal0ueSxcclxuICAgICAgICAgICAgaW50ZXJzZWN0ID0gKCh5aSA+IHkpICE9PSAoeWogPiB5KSkgJiYgKHggPCAoeGogLSB4aSkgKiAoeSAtIHlpKSAvICh5aiAtIHlpKSArIHhpKTtcclxuXHJcbiAgICAgICAgaWYgKCBpbnRlcnNlY3QgKSBpbnNpZGUgPSAhaW5zaWRlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbnNpZGU7XHJcbn1cclxuXHJcbkludGVyc2VjdGlvbi5wb2ludEluUG9seWdvbiA9IHBvaW50SW5Qb2x5Z29uO1xyXG5cclxuLyoqXHJcbiAqICEjZW4gQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBvZiBwb2ludCB0byBsaW5lLlxyXG4gKiAhI3poIOiuoeeul+eCueWIsOebtOe6v+eahOi3neemu+OAguWmguaenOi/meaYr+S4gOadoee6v+auteW5tuS4lOWegui2s+S4jeWcqOe6v+auteWGhe+8jOWImeS8muiuoeeul+eCueWIsOe6v+auteerr+eCueeahOi3neemu+OAglxyXG4gKiBAbWV0aG9kIHBvaW50TGluZURpc3RhbmNlXHJcbiAqIEBwYXJhbSB7VmVjMn0gcG9pbnQgLSBUaGUgcG9pbnRcclxuICogQHBhcmFtIHtWZWMyfSBzdGFydCAtIFRoZSBzdGFydCBwb2ludCBvZiBsaW5lXHJcbiAqIEBwYXJhbSB7VmVjMn0gZW5kIC0gVGhlIGVuZCBwb2ludCBvZiBsaW5lXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNTZWdtZW50IC0gd2hldGhlciB0aGlzIGxpbmUgaXMgYSBzZWdtZW50XHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmZ1bmN0aW9uIHBvaW50TGluZURpc3RhbmNlKHBvaW50LCBzdGFydCwgZW5kLCBpc1NlZ21lbnQpIHtcclxuICAgIHZhciBkeCA9IGVuZC54IC0gc3RhcnQueDtcclxuICAgIHZhciBkeSA9IGVuZC55IC0gc3RhcnQueTtcclxuICAgIHZhciBkID0gZHgqZHggKyBkeSpkeTtcclxuICAgIHZhciB0ID0gKChwb2ludC54IC0gc3RhcnQueCkgKiBkeCArIChwb2ludC55IC0gc3RhcnQueSkgKiBkeSkgLyBkO1xyXG4gICAgdmFyIHA7XHJcblxyXG4gICAgaWYgKCFpc1NlZ21lbnQpIHtcclxuICAgICAgICBwID0gY2MudjIoc3RhcnQueCArIHQgKiBkeCwgc3RhcnQueSArIHQgKiBkeSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAoZCkge1xyXG4gICAgICAgICAgICBpZiAodCA8IDApIHAgPSBzdGFydDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodCA+IDEpIHAgPSBlbmQ7XHJcbiAgICAgICAgICAgIGVsc2UgcCA9IGNjLnYyKHN0YXJ0LnggKyB0ICogZHgsIHN0YXJ0LnkgKyB0ICogZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCA9IHN0YXJ0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICAgICBcclxuICAgIGR4ID0gcG9pbnQueCAtIHAueDtcclxuICAgIGR5ID0gcG9pbnQueSAtIHAueTtcclxuICAgIHJldHVybiBNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSk7XHJcbn1cclxuXHJcbkludGVyc2VjdGlvbi5wb2ludExpbmVEaXN0YW5jZSA9IHBvaW50TGluZURpc3RhbmNlO1xyXG5cclxuXHJcbmNjLkludGVyc2VjdGlvbiA9IG1vZHVsZS5leHBvcnRzID0gSW50ZXJzZWN0aW9uO1xyXG4iXSwic291cmNlUm9vdCI6Ii8ifQ==