
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/canvas/renderers/sprite/sliced.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _assembler = _interopRequireDefault(require("../../../assembler"));

var _renderData = _interopRequireDefault(require("../render-data"));

var _simple = _interopRequireDefault(require("./simple"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

var utils = require('../utils');

var CanvasSlicedSprite = /*#__PURE__*/function (_CanvasSimpleSprite) {
  _inheritsLoose(CanvasSlicedSprite, _CanvasSimpleSprite);

  function CanvasSlicedSprite() {
    return _CanvasSimpleSprite.apply(this, arguments) || this;
  }

  var _proto = CanvasSlicedSprite.prototype;

  _proto.init = function init() {
    this._renderData = new _renderData["default"]();
    this._renderData.dataLength = 4;
  };

  _proto.updateUVs = function updateUVs(sprite) {
    var frame = sprite.spriteFrame;
    var renderData = this._renderData;
    var rect = frame._rect; // caculate texture coordinate

    var leftWidth = frame.insetLeft;
    var rightWidth = frame.insetRight;
    var centerWidth = rect.width - leftWidth - rightWidth;
    var topHeight = frame.insetTop;
    var bottomHeight = frame.insetBottom;
    var centerHeight = rect.height - topHeight - bottomHeight; // uv computation should take spritesheet into account.

    var verts = renderData.vertices;

    if (frame._rotated) {
      verts[0].u = rect.x;
      verts[1].u = bottomHeight + rect.x;
      verts[2].u = bottomHeight + centerHeight + rect.x;
      verts[3].u = rect.x + rect.height;
      verts[3].v = rect.y;
      verts[2].v = leftWidth + rect.y;
      verts[1].v = leftWidth + centerWidth + rect.y;
      verts[0].v = rect.y + rect.width;
    } else {
      verts[0].u = rect.x;
      verts[1].u = leftWidth + rect.x;
      verts[2].u = leftWidth + centerWidth + rect.x;
      verts[3].u = rect.x + rect.width;
      verts[3].v = rect.y;
      verts[2].v = topHeight + rect.y;
      verts[1].v = topHeight + centerHeight + rect.y;
      verts[0].v = rect.y + rect.height;
    }
  };

  _proto.updateVerts = function updateVerts(sprite) {
    var renderData = this._renderData,
        verts = renderData.vertices,
        node = sprite.node,
        width = node.width,
        height = node.height,
        appx = node.anchorX * width,
        appy = node.anchorY * height;
    var frame = sprite.spriteFrame;
    var leftWidth = frame.insetLeft;
    var rightWidth = frame.insetRight;
    var topHeight = frame.insetTop;
    var bottomHeight = frame.insetBottom;
    var sizableWidth = width - leftWidth - rightWidth;
    var sizableHeight = height - topHeight - bottomHeight;
    var xScale = width / (leftWidth + rightWidth);
    var yScale = height / (topHeight + bottomHeight);
    xScale = isNaN(xScale) || xScale > 1 ? 1 : xScale;
    yScale = isNaN(yScale) || yScale > 1 ? 1 : yScale;
    sizableWidth = sizableWidth < 0 ? 0 : sizableWidth;
    sizableHeight = sizableHeight < 0 ? 0 : sizableHeight;

    if (frame._rotated) {
      verts[0].y = -appx;
      verts[0].x = -appy;
      verts[1].y = rightWidth * xScale - appx;
      verts[1].x = bottomHeight * yScale - appy;
      verts[2].y = verts[1].y + sizableWidth;
      verts[2].x = verts[1].x + sizableHeight;
      verts[3].y = width - appx;
      verts[3].x = height - appy;
    } else {
      verts[0].x = -appx;
      verts[0].y = -appy;
      verts[1].x = leftWidth * xScale - appx;
      verts[1].y = bottomHeight * yScale - appy;
      verts[2].x = verts[1].x + sizableWidth;
      verts[2].y = verts[1].y + sizableHeight;
      verts[3].x = width - appx;
      verts[3].y = height - appy;
    }

    sprite._vertsDirty = false;
  };

  _proto.draw = function draw(ctx, comp) {
    var node = comp.node;
    var frame = comp._spriteFrame; // Transform

    var matrix = node._worldMatrix;
    var matrixm = matrix.m;
    var a = matrixm[0],
        b = matrixm[1],
        c = matrixm[4],
        d = matrixm[5],
        tx = matrixm[12],
        ty = matrixm[13];
    ctx.transform(a, b, c, d, tx, ty);
    ctx.scale(1, -1);

    if (frame._rotated) {
      ctx.rotate(-Math.PI / 2);
    } // TODO: handle blend function
    // opacity


    utils.context.setGlobalAlpha(ctx, node.opacity / 255);
    var tex = frame._texture,
        verts = this._renderData.vertices;
    var image = utils.getColorizedImage(tex, node._color);
    var drawCall = 0;
    var off, ld, rd, td, bd, x, y, w, h, sx, sy, sw, sh;

    for (var r = 0; r < 3; ++r) {
      bd = verts[r];
      td = verts[r + 1];

      for (var _c = 0; _c < 3; ++_c) {
        ld = verts[_c];
        rd = verts[_c + 1];
        x = ld.x;
        y = bd.y;
        w = rd.x - x;
        h = td.y - y;
        y = -y - h;
        sx = ld.u; // invert texture because texture uv is in UI coordinates (origin at top left)

        sy = td.v;
        sw = rd.u - sx;
        sh = bd.v - sy;

        if (sw > 0 && sh > 0 && w > 0 && h > 0) {
          ctx.drawImage(image, sx, sy, sw, sh, x, y, w, h);
          drawCall++;
        }
      }
    }

    return drawCall;
  };

  return CanvasSlicedSprite;
}(_simple["default"]);

exports["default"] = CanvasSlicedSprite;
module.exports = exports["default"];
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXGNvcmVcXHJlbmRlcmVyXFxjYW52YXNcXHJlbmRlcmVyc1xcc3ByaXRlXFxzbGljZWQuanMiXSwibmFtZXMiOlsidXRpbHMiLCJyZXF1aXJlIiwiQ2FudmFzU2xpY2VkU3ByaXRlIiwiaW5pdCIsIl9yZW5kZXJEYXRhIiwiUmVuZGVyRGF0YSIsImRhdGFMZW5ndGgiLCJ1cGRhdGVVVnMiLCJzcHJpdGUiLCJmcmFtZSIsInNwcml0ZUZyYW1lIiwicmVuZGVyRGF0YSIsInJlY3QiLCJfcmVjdCIsImxlZnRXaWR0aCIsImluc2V0TGVmdCIsInJpZ2h0V2lkdGgiLCJpbnNldFJpZ2h0IiwiY2VudGVyV2lkdGgiLCJ3aWR0aCIsInRvcEhlaWdodCIsImluc2V0VG9wIiwiYm90dG9tSGVpZ2h0IiwiaW5zZXRCb3R0b20iLCJjZW50ZXJIZWlnaHQiLCJoZWlnaHQiLCJ2ZXJ0cyIsInZlcnRpY2VzIiwiX3JvdGF0ZWQiLCJ1IiwieCIsInYiLCJ5IiwidXBkYXRlVmVydHMiLCJub2RlIiwiYXBweCIsImFuY2hvclgiLCJhcHB5IiwiYW5jaG9yWSIsInNpemFibGVXaWR0aCIsInNpemFibGVIZWlnaHQiLCJ4U2NhbGUiLCJ5U2NhbGUiLCJpc05hTiIsIl92ZXJ0c0RpcnR5IiwiZHJhdyIsImN0eCIsImNvbXAiLCJfc3ByaXRlRnJhbWUiLCJtYXRyaXgiLCJfd29ybGRNYXRyaXgiLCJtYXRyaXhtIiwibSIsImEiLCJiIiwiYyIsImQiLCJ0eCIsInR5IiwidHJhbnNmb3JtIiwic2NhbGUiLCJyb3RhdGUiLCJNYXRoIiwiUEkiLCJjb250ZXh0Iiwic2V0R2xvYmFsQWxwaGEiLCJvcGFjaXR5IiwidGV4IiwiX3RleHR1cmUiLCJpbWFnZSIsImdldENvbG9yaXplZEltYWdlIiwiX2NvbG9yIiwiZHJhd0NhbGwiLCJvZmYiLCJsZCIsInJkIiwidGQiLCJiZCIsInciLCJoIiwic3giLCJzeSIsInN3Iiwic2giLCJyIiwiZHJhd0ltYWdlIiwi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b0QsUUFBQUEsRUFBRSxHQUFHTCxFQUFFLENBQUM3QyxDQUFSO0FBQ0FtRCxRQUFBQSxFQUFFLEdBQUdQLEVBQUUsQ0FBQzlDLENBQUgsR0FBT21ELEVBQVo7QUFDQUcsUUFBQUEsRUFBRSxHQUFHTixFQUFFLENBQUM5QyxDQUFILEdBQU9rRCxFQUFaOztBQUVBLFlBQUlDLEVBQUUsR0FBRyxDQUFMLElBQVVDLEVBQUUsR0FBRyxDQUFmLElBQW9CTCxDQUFDLEdBQUcsQ0FBeEIsSUFBNkJDLENBQUMsR0FBRyxDQUFyQyxFQUF3QztBQUNwQ2pDLFVBQUFBLEdBQUcsQ0FBQ3VDLFNBQUosQ0FBY2hCLEtBQWQsRUFDSVcsRUFESixFQUNRQyxFQURSLEVBQ1lDLEVBRFosRUFDZ0JDLEVBRGhCLEVBRUlyRCxDQUZKLEVBRU9FLENBRlAsRUFFVThDLENBRlYsRUFFYUMsQ0FGYjtBQUdBUCxVQUFBQSxRQUFRO0FBQ1g7QUFDSjtBQUNKOztBQUNELFdBQU9BLFFBQVA7QUFDSDs7O0VBOUkyQ2MiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gQ29weXJpZ2h0IChjKSAyMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cclxuXHJcbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcclxuIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcclxuIHRvIHVzZSBDb2NvcyBDcmVhdG9yIHNvbGVseSB0byBkZXZlbG9wIGdhbWVzIG9uIHlvdXIgdGFyZ2V0IHBsYXRmb3Jtcy4gWW91IHNoYWxsXHJcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXHJcbiB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXHJcbiBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgQ29jb3MgQ3JlYXRvci5cclxuXHJcbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxyXG4gWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuIHJlc2VydmVzIGFsbCByaWdodHMgbm90IGV4cHJlc3NseSBncmFudGVkIHRvIHlvdS5cclxuXHJcbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuIFRIRSBTT0ZUV0FSRS5cclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5pbXBvcnQgQXNzZW1ibGVyIGZyb20gJy4uLy4uLy4uL2Fzc2VtYmxlcic7XHJcbmltcG9ydCBSZW5kZXJEYXRhIGZyb20gJy4uL3JlbmRlci1kYXRhJztcclxuaW1wb3J0IENhbnZhc1NpbXBsZVNwcml0ZSBmcm9tICcuL3NpbXBsZSc7XHJcblxyXG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNTbGljZWRTcHJpdGUgZXh0ZW5kcyBDYW52YXNTaW1wbGVTcHJpdGUge1xyXG4gICAgaW5pdCAoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyRGF0YSA9IG5ldyBSZW5kZXJEYXRhKCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyRGF0YS5kYXRhTGVuZ3RoID0gNDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVVnMgKHNwcml0ZSkge1xyXG4gICAgICAgIGxldCBmcmFtZSA9IHNwcml0ZS5zcHJpdGVGcmFtZTtcclxuICAgICAgICBsZXQgcmVuZGVyRGF0YSA9IHRoaXMuX3JlbmRlckRhdGE7XHJcbiAgICAgICAgbGV0IHJlY3QgPSBmcmFtZS5fcmVjdDtcclxuICAgIFxyXG4gICAgICAgIC8vIGNhY3VsYXRlIHRleHR1cmUgY29vcmRpbmF0ZVxyXG4gICAgICAgIGxldCBsZWZ0V2lkdGggPSBmcmFtZS5pbnNldExlZnQ7XHJcbiAgICAgICAgbGV0IHJpZ2h0V2lkdGggPSBmcmFtZS5pbnNldFJpZ2h0O1xyXG4gICAgICAgIGxldCBjZW50ZXJXaWR0aCA9IHJlY3Qud2lkdGggLSBsZWZ0V2lkdGggLSByaWdodFdpZHRoO1xyXG4gICAgICAgIGxldCB0b3BIZWlnaHQgPSBmcmFtZS5pbnNldFRvcDtcclxuICAgICAgICBsZXQgYm90dG9tSGVpZ2h0ID0gZnJhbWUuaW5zZXRCb3R0b207XHJcbiAgICAgICAgbGV0IGNlbnRlckhlaWdodCA9IHJlY3QuaGVpZ2h0IC0gdG9wSGVpZ2h0IC0gYm90dG9tSGVpZ2h0O1xyXG4gICAgXHJcbiAgICAgICAgLy8gdXYgY29tcHV0YXRpb24gc2hvdWxkIHRha2Ugc3ByaXRlc2hlZXQgaW50byBhY2NvdW50LlxyXG4gICAgICAgIGxldCB2ZXJ0cyA9IHJlbmRlckRhdGEudmVydGljZXM7XHJcbiAgICAgICAgaWYgKGZyYW1lLl9yb3RhdGVkKSB7XHJcbiAgICAgICAgICAgIHZlcnRzWzBdLnUgPSByZWN0Lng7XHJcbiAgICAgICAgICAgIHZlcnRzWzFdLnUgPSBib3R0b21IZWlnaHQgKyByZWN0Lng7XHJcbiAgICAgICAgICAgIHZlcnRzWzJdLnUgPSBib3R0b21IZWlnaHQgKyBjZW50ZXJIZWlnaHQgKyByZWN0Lng7XHJcbiAgICAgICAgICAgIHZlcnRzWzNdLnUgPSByZWN0LnggKyByZWN0LmhlaWdodDtcclxuICAgICAgICAgICAgdmVydHNbM10udiA9IHJlY3QueTtcclxuICAgICAgICAgICAgdmVydHNbMl0udiA9IGxlZnRXaWR0aCArIHJlY3QueTtcclxuICAgICAgICAgICAgdmVydHNbMV0udiA9IGxlZnRXaWR0aCArIGNlbnRlcldpZHRoICsgcmVjdC55O1xyXG4gICAgICAgICAgICB2ZXJ0c1swXS52ID0gcmVjdC55ICsgcmVjdC53aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZlcnRzWzBdLnUgPSByZWN0Lng7XHJcbiAgICAgICAgICAgIHZlcnRzWzFdLnUgPSBsZWZ0V2lkdGggKyByZWN0Lng7XHJcbiAgICAgICAgICAgIHZlcnRzWzJdLnUgPSBsZWZ0V2lkdGggKyBjZW50ZXJXaWR0aCArIHJlY3QueDtcclxuICAgICAgICAgICAgdmVydHNbM10udSA9IHJlY3QueCArIHJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgIHZlcnRzWzNdLnYgPSByZWN0Lnk7XHJcbiAgICAgICAgICAgIHZlcnRzWzJdLnYgPSB0b3BIZWlnaHQgKyByZWN0Lnk7XHJcbiAgICAgICAgICAgIHZlcnRzWzFdLnYgPSB0b3BIZWlnaHQgKyBjZW50ZXJIZWlnaHQgKyByZWN0Lnk7XHJcbiAgICAgICAgICAgIHZlcnRzWzBdLnYgPSByZWN0LnkgKyByZWN0LmhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHVwZGF0ZVZlcnRzIChzcHJpdGUpIHtcclxuICAgICAgICBsZXQgcmVuZGVyRGF0YSA9IHRoaXMuX3JlbmRlckRhdGEsXHJcbiAgICAgICAgICAgIHZlcnRzID0gcmVuZGVyRGF0YS52ZXJ0aWNlcyxcclxuICAgICAgICAgICAgbm9kZSA9IHNwcml0ZS5ub2RlLFxyXG4gICAgICAgICAgICB3aWR0aCA9IG5vZGUud2lkdGgsIGhlaWdodCA9IG5vZGUuaGVpZ2h0LFxyXG4gICAgICAgICAgICBhcHB4ID0gbm9kZS5hbmNob3JYICogd2lkdGgsIGFwcHkgPSBub2RlLmFuY2hvclkgKiBoZWlnaHQ7XHJcbiAgICBcclxuICAgICAgICBsZXQgZnJhbWUgPSBzcHJpdGUuc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgbGV0IGxlZnRXaWR0aCA9IGZyYW1lLmluc2V0TGVmdDtcclxuICAgICAgICBsZXQgcmlnaHRXaWR0aCA9IGZyYW1lLmluc2V0UmlnaHQ7XHJcbiAgICAgICAgbGV0IHRvcEhlaWdodCA9IGZyYW1lLmluc2V0VG9wO1xyXG4gICAgICAgIGxldCBib3R0b21IZWlnaHQgPSBmcmFtZS5pbnNldEJvdHRvbTtcclxuICAgIFxyXG4gICAgICAgIGxldCBzaXphYmxlV2lkdGggPSB3aWR0aCAtIGxlZnRXaWR0aCAtIHJpZ2h0V2lkdGg7XHJcbiAgICAgICAgbGV0IHNpemFibGVIZWlnaHQgPSBoZWlnaHQgLSB0b3BIZWlnaHQgLSBib3R0b21IZWlnaHQ7XHJcbiAgICAgICAgbGV0IHhTY2FsZSA9IHdpZHRoIC8gKGxlZnRXaWR0aCArIHJpZ2h0V2lkdGgpO1xyXG4gICAgICAgIGxldCB5U2NhbGUgPSBoZWlnaHQgLyAodG9wSGVpZ2h0ICsgYm90dG9tSGVpZ2h0KTtcclxuICAgICAgICB4U2NhbGUgPSAoaXNOYU4oeFNjYWxlKSB8fCB4U2NhbGUgPiAxKSA/IDEgOiB4U2NhbGU7XHJcbiAgICAgICAgeVNjYWxlID0gKGlzTmFOKHlTY2FsZSkgfHwgeVNjYWxlID4gMSkgPyAxIDogeVNjYWxlO1xyXG4gICAgICAgIHNpemFibGVXaWR0aCA9IHNpemFibGVXaWR0aCA8IDAgPyAwIDogc2l6YWJsZVdpZHRoO1xyXG4gICAgICAgIHNpemFibGVIZWlnaHQgPSBzaXphYmxlSGVpZ2h0IDwgMCA/IDAgOiBzaXphYmxlSGVpZ2h0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChmcmFtZS5fcm90YXRlZCkge1xyXG4gICAgICAgICAgICB2ZXJ0c1swXS55ID0gLWFwcHg7XHJcbiAgICAgICAgICAgIHZlcnRzWzBdLnggPSAtYXBweTtcclxuICAgICAgICAgICAgdmVydHNbMV0ueSA9IHJpZ2h0V2lkdGggKiB4U2NhbGUgLSBhcHB4O1xyXG4gICAgICAgICAgICB2ZXJ0c1sxXS54ID0gYm90dG9tSGVpZ2h0ICogeVNjYWxlIC0gYXBweTtcclxuICAgICAgICAgICAgdmVydHNbMl0ueSA9IHZlcnRzWzFdLnkgKyBzaXphYmxlV2lkdGg7XHJcbiAgICAgICAgICAgIHZlcnRzWzJdLnggPSB2ZXJ0c1sxXS54ICsgc2l6YWJsZUhlaWdodDtcclxuICAgICAgICAgICAgdmVydHNbM10ueSA9IHdpZHRoIC0gYXBweDtcclxuICAgICAgICAgICAgdmVydHNbM10ueCA9IGhlaWdodCAtIGFwcHk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmVydHNbMF0ueCA9IC1hcHB4O1xyXG4gICAgICAgICAgICB2ZXJ0c1swXS55ID0gLWFwcHk7XHJcbiAgICAgICAgICAgIHZlcnRzWzFdLnggPSBsZWZ0V2lkdGggKiB4U2NhbGUgLSBhcHB4O1xyXG4gICAgICAgICAgICB2ZXJ0c1sxXS55ID0gYm90dG9tSGVpZ2h0ICogeVNjYWxlIC0gYXBweTtcclxuICAgICAgICAgICAgdmVydHNbMl0ueCA9IHZlcnRzWzFdLnggKyBzaXphYmxlV2lkdGg7XHJcbiAgICAgICAgICAgIHZlcnRzWzJdLnkgPSB2ZXJ0c1sxXS55ICsgc2l6YWJsZUhlaWdodDtcclxuICAgICAgICAgICAgdmVydHNbM10ueCA9IHdpZHRoIC0gYXBweDtcclxuICAgICAgICAgICAgdmVydHNbM10ueSA9IGhlaWdodCAtIGFwcHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBzcHJpdGUuX3ZlcnRzRGlydHkgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3IChjdHgsIGNvbXApIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGNvbXAubm9kZTtcclxuICAgICAgICBsZXQgZnJhbWUgPSBjb21wLl9zcHJpdGVGcmFtZTtcclxuICAgICAgICAvLyBUcmFuc2Zvcm1cclxuICAgICAgICBsZXQgbWF0cml4ID0gbm9kZS5fd29ybGRNYXRyaXg7XHJcbiAgICAgICAgbGV0IG1hdHJpeG0gPSBtYXRyaXgubTtcclxuICAgICAgICBsZXQgYSA9IG1hdHJpeG1bMF0sIGIgPSBtYXRyaXhtWzFdLCBjID0gbWF0cml4bVs0XSwgZCA9IG1hdHJpeG1bNV0sXHJcbiAgICAgICAgICAgIHR4ID0gbWF0cml4bVsxMl0sIHR5ID0gbWF0cml4bVsxM107XHJcbiAgICAgICAgY3R4LnRyYW5zZm9ybShhLCBiLCBjLCBkLCB0eCwgdHkpO1xyXG4gICAgICAgIGN0eC5zY2FsZSgxLCAtMSk7XHJcbiAgICAgICAgaWYgKGZyYW1lLl9yb3RhdGVkKSB7XHJcbiAgICAgICAgICAgIGN0eC5yb3RhdGUoLSBNYXRoLlBJIC8gMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE86IGhhbmRsZSBibGVuZCBmdW5jdGlvblxyXG5cclxuICAgICAgICAvLyBvcGFjaXR5XHJcbiAgICAgICAgdXRpbHMuY29udGV4dC5zZXRHbG9iYWxBbHBoYShjdHgsIG5vZGUub3BhY2l0eSAvIDI1NSk7XHJcblxyXG4gICAgICAgIGxldCB0ZXggPSBmcmFtZS5fdGV4dHVyZSxcclxuICAgICAgICAgICAgdmVydHMgPSB0aGlzLl9yZW5kZXJEYXRhLnZlcnRpY2VzO1xyXG5cclxuICAgICAgICBsZXQgaW1hZ2UgPSB1dGlscy5nZXRDb2xvcml6ZWRJbWFnZSh0ZXgsIG5vZGUuX2NvbG9yKTtcclxuXHJcbiAgICAgICAgbGV0IGRyYXdDYWxsID0gMDtcclxuICAgICAgICBsZXQgb2ZmLCBsZCwgcmQsIHRkLCBiZCxcclxuICAgICAgICAgICAgeCwgeSwgdywgaCxcclxuICAgICAgICAgICAgc3gsIHN5LCBzdywgc2g7XHJcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCAzOyArK3IpIHtcclxuICAgICAgICAgICAgYmQgPSB2ZXJ0c1tyXTtcclxuICAgICAgICAgICAgdGQgPSB2ZXJ0c1tyKzFdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IDM7ICsrYykge1xyXG4gICAgICAgICAgICAgICAgbGQgPSB2ZXJ0c1tjXTtcclxuICAgICAgICAgICAgICAgIHJkID0gdmVydHNbYysxXTtcclxuICAgICAgICAgICAgICAgIHggPSBsZC54O1xyXG4gICAgICAgICAgICAgICAgeSA9IGJkLnk7XHJcbiAgICAgICAgICAgICAgICB3ID0gcmQueCAtIHg7XHJcbiAgICAgICAgICAgICAgICBoID0gdGQueSAtIHk7XHJcbiAgICAgICAgICAgICAgICB5ID0gLSB5IC0gaDtcclxuXHJcbiAgICAgICAgICAgICAgICBzeCA9IGxkLnU7XHJcbiAgICAgICAgICAgICAgICAvLyBpbnZlcnQgdGV4dHVyZSBiZWNhdXNlIHRleHR1cmUgdXYgaXMgaW4gVUkgY29vcmRpbmF0ZXMgKG9yaWdpbiBhdCB0b3AgbGVmdClcclxuICAgICAgICAgICAgICAgIHN5ID0gdGQudjtcclxuICAgICAgICAgICAgICAgIHN3ID0gcmQudSAtIHN4O1xyXG4gICAgICAgICAgICAgICAgc2ggPSBiZC52IC0gc3k7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN3ID4gMCAmJiBzaCA+IDAgJiYgdyA+IDAgJiYgaCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzeCwgc3ksIHN3LCBzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeCwgeSwgdywgaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhd0NhbGwrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZHJhd0NhbGw7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIvIn0=