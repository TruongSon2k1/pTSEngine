
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/webgl/assemblers/graphics/impl.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var Helper = require('../../../../graphics/helper');

var PointFlags = require('../../../../graphics/types').PointFlags;

var Point = cc.Graphics.Point = cc.Class({
  name: 'cc.GraphicsPoint',
  "extends": cc.Vec2,
  ctor: function ctor(x, y) {
    this.reset();
  },
  reset: function reset() {
    this.dx = 0;
    this.dy = 0;
    this.dmx = 0;
    this.dmy = 0;
    this.flags = 0;
    this.len = 0;
  }
});

function Path() {
  this.reset();
}

cc.js.mixin(Path.prototype, {
  reset: function reset() {
    this.closed = false;
    this.nbevel = 0;
    this.complex = true;

    if (this.points) {
      this.points.length = 0;
    } else {
      this.points = [];
    }
  }
});

function Impl(graphics) {
  // inner properties
  this._tessTol = 0.25;
  this._distTol = 0.01;
  this._updatePathOffset = false;
  this._paths = null;
  this._pathLength = 0;
  this._pathOffset = 0;
  this._points = null;
  this._pointsOffset = 0;
  this._commandx = 0;
  this._commandy = 0;
  this._paths = [];
  this._points = [];
}

cc.js.mixin(Impl.prototype, {
  moveTo: function moveTo(x, y) {
    if (this._updatePathOffset) {
      this._pathOffset = this._pathLength;
      this._updatePathOffset = false;
    }

    this._addPath();

    this._addPoint(x, y, PointFlags.PT_CORNER);

    this._commandx = x;
    this._commandy = y;
  },
  lineTo: function lineTo(x, y) {
    this._addPoint(x, y, PointFlags.PT_CORNER);

    this._commandx = x;
    this._commandy = y;
  },
  bezierCurveTo: function bezierCurveTo(c1x, c1y, c2x, c2y, x, y) {
    var path = this._curPath;
    var last = path.points[path.points.length - 1];

    if (last.x === c1x && last.y === c1y && c2x === x && c2y === y) {
      this.lineTo(x, y);
      return;
    }

    Helper.tesselateBezier(this, last.x, last.y, c1x, c1y, c2x, c2y, x, y, 0, PointFlags.PT_CORNER);
    this._commandx = x;
    this._commandy = y;
  },
  quadraticCurveTo: function quadraticCurveTo(cx, cy, x, y) {
    var x0 = this._commandx;
    var y0 = this._commandy;
    this.bezierCurveTo(x0 + 2.0 / 3.0 * (cx - x0), y0 + 2.0 / 3.0 * (cy - y0), x + 2.0 / 3.0 * (cx - x), y + 2.0 / 3.0 * (cy - y), x, y);
  },
  arc: function arc(cx, cy, r, startAngle, endAngle, counterclockwise) {
    Helper.arc(this, cx, cy, r, startAngle, endAngle, counterclockwise);
  },
  ellipse: function ellipse(cx, cy, rx, ry) {
    Helper.ellipse(this, cx, cy, rx, ry);
    this._curPath.complex = false;
  },
  circle: function circle(cx, cy, r) {
    Helper.ellipse(this, cx, cy, r, r);
    this._curPath.complex = false;
  },
  rect: function rect(x, y, w, h) {
    this.moveTo(x, y);
    this.lineTo(x, y + h);
    this.lineTo(x + w, y + h);
    this.lineTo(x + w, y);
    this.close();
    this._curPath.complex = false;
  },
  roundRect: function roundRect(x, y, w, h, r) {
    Helper.roundRect(this, x, y, w, h, r);
    this._curPath.complex = false;
  },
  clear: function clear(clean) {
    this._pathLength = 0;
    this._pathOffset = 0;
    this._pointsOffset = 0;
    this._curPath = null;

    if (clean) {
      this._paths.length = 0;
      this._points.length = 0;
    }
  },
  close: function close() {
    this._curPath.closed = true;
  },
  _addPath: function _addPath() {
    var offset = this._pathLength;
    var path = this._paths[offset];

    if (!path) {
      path = new Path();

      this._paths.push(path);
    } else {
      path.reset();
    }

    this._pathLength++;
    this._curPath = path;
    return path;
  },
  _addPoint: function _addPoint(x, y, flags) {
    var path = this._curPath;
    if (!path) return;
    var pt;
    var points = this._points;
    var pathPoints = path.points;
    var offset = this._pointsOffset++;
    pt = points[offset];

    if (!pt) {
      pt = new Point(x, y);
      points.push(pt);
    } else {
      pt.x = x;
      pt.y = y;
    }

    pt.flags = flags;
    pathPoints.push(pt);
  }
});
cc.Graphics._Impl = Impl;
module.exports = Impl;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXGNvcmVcXHJlbmRlcmVyXFx3ZWJnbFxcYXNzZW1ibGVyc1xcZ3JhcGhpY3NcXGltcGwuanMiXSwibmFtZXMiOlsiSGVscGVyIiwicmVxdWlyZSIsIlBvaW50RmxhZ3MiLCJQb2ludCIsImNjIiwiR3JhcGhpY3MiLCJDbGFzcyIsIm5hbWUiLCJWZWMyIiwiY3RvciIsIngiLCJ5IiwicmVzZXQiLCJkeCIsImR5IiwiZG14IiwiZG15IiwiZmxhZ3MiLCJsZW4iLCJQYXRoIiwianMiLCJtaXhpbiIsInByb3RvdHlwZSIsImNsb3NlZCIsIm5iZXZlbCIsImNvbXBsZXgiLCJwb2ludHMiLCJsZW5ndGgiLCJJbXBsIiwiZ3JhcGhpY3MiLCJfdGVzc1RvbCIsIl9kaXN0VG9sIiwiX3VwZGF0ZVBhdGhPZmZzZXQiLCJfcGF0aHMiLCJfcGF0aExlbmd0aCIsIl9wYXRoT2Zmc2V0IiwiX3BvaW50cyIsIl9wb2ludHNPZmZzZXQiLCJfY29tbWFuZHgiLCJfY29tbWFuZHkiLCJtb3ZlVG8iLCJfYWRkUGF0aCIsIl9hZGRQb2ludCIsIlBUX0NPUk5FUiIsImxpbmVUbyIsImJlemllckN1cnZlVG8iLCJjMXgiLCJjMXkiLCJjMngiLCJjMnkiLCJwYXRoIiwiX2N1clBhdGgiLCJsYXN0IiwidGVzc2VsYXRlQmV6aWVyIiwicXVhZHJhdGljQ3VydmVUbyIsImN4IiwiY3kiLCJ4MCIsInkwIiwiYXJjIiwiciIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsImNvdW50ZXJjbG9ja3dpc2UiLCJlbGxpcHNlIiwicngiLCJyeSIsImNpcmNsZSIsInJlY3QiLCJ3IiwiaCIsImNsb3NlIiwicm91bmRSZWN0IiwiY2xlYXIiLCJjbGVhbiIsIm9mZnNldCIsInB1c2giLCJwdCIsInBhdGhQb2ludHMiLCJfSW1wbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUcsSUFBSTFFLEtBQUosQ0FBVU8sQ0FBVixFQUFhQyxDQUFiLENBQUw7QUFDQWUsTUFBQUEsTUFBTSxDQUFDa0QsSUFBUCxDQUFZQyxFQUFaO0FBQ0gsS0FIRCxNQUdPO0FBQ0hBLE1BQUFBLEVBQUUsQ0FBQ25FLENBQUgsR0FBT0EsQ0FBUDtBQUNBbUUsTUFBQUEsRUFBRSxDQUFDbEUsQ0FBSCxHQUFPQSxDQUFQO0FBQ0g7O0FBRURrRSxJQUFBQSxFQUFFLENBQUM1RCxLQUFILEdBQVdBLEtBQVg7QUFDQTZELElBQUFBLFVBQVUsQ0FBQ0YsSUFBWCxDQUFnQkMsRUFBaEI7QUFDSDtBQTlIdUIsQ0FBNUI7QUFrSUF6RSxFQUFFLENBQUNDLFFBQUgsQ0FBWTBFLEtBQVosR0FBb0JuRCxJQUFwQjtBQUNBb0QsTUFBTSxDQUFDQyxPQUFQLEdBQWlCckQsSUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxuIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcbiB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXG4gc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXG5cbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXG5cbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuIFRIRSBTT0ZUV0FSRS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jb25zdCBIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9ncmFwaGljcy9oZWxwZXInKTtcbmNvbnN0IFBvaW50RmxhZ3MgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9ncmFwaGljcy90eXBlcycpLlBvaW50RmxhZ3M7XG5cbmxldCBQb2ludCA9IGNjLkdyYXBoaWNzLlBvaW50ID0gY2MuQ2xhc3Moe1xuICAgIG5hbWU6ICdjYy5HcmFwaGljc1BvaW50JyxcbiAgICBleHRlbmRzOiBjYy5WZWMyLFxuXG4gICAgY3RvciAoeCwgeSkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfSxcblxuICAgIHJlc2V0ICgpIHtcbiAgICAgICAgdGhpcy5keCA9IDA7XG4gICAgICAgIHRoaXMuZHkgPSAwO1xuICAgICAgICB0aGlzLmRteCA9IDA7XG4gICAgICAgIHRoaXMuZG15ID0gMDtcbiAgICAgICAgdGhpcy5mbGFncyA9IDA7XG4gICAgICAgIHRoaXMubGVuID0gMDtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gUGF0aCAoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xufVxuXG5jYy5qcy5taXhpbihQYXRoLnByb3RvdHlwZSwge1xuICAgIHJlc2V0ICgpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uYmV2ZWwgPSAwO1xuICAgICAgICB0aGlzLmNvbXBsZXggPSB0cnVlO1xuXG4gICAgICAgIGlmICh0aGlzLnBvaW50cykge1xuICAgICAgICAgICAgdGhpcy5wb2ludHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gW107XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZnVuY3Rpb24gSW1wbCAoZ3JhcGhpY3MpIHtcbiAgICAvLyBpbm5lciBwcm9wZXJ0aWVzXG4gICAgdGhpcy5fdGVzc1RvbCA9IDAuMjU7XG4gICAgdGhpcy5fZGlzdFRvbCA9IDAuMDE7XG4gICAgdGhpcy5fdXBkYXRlUGF0aE9mZnNldCA9IGZhbHNlO1xuXG4gICAgdGhpcy5fcGF0aHMgPSBudWxsO1xuICAgIHRoaXMuX3BhdGhMZW5ndGggPSAwO1xuICAgIHRoaXMuX3BhdGhPZmZzZXQgPSAwO1xuXG4gICAgdGhpcy5fcG9pbnRzID0gbnVsbDtcbiAgICB0aGlzLl9wb2ludHNPZmZzZXQgPSAwO1xuXG4gICAgdGhpcy5fY29tbWFuZHggPSAwO1xuICAgIHRoaXMuX2NvbW1hbmR5ID0gMDtcblxuICAgIHRoaXMuX3BhdGhzID0gW107XG4gICAgdGhpcy5fcG9pbnRzID0gW107XG59XG5cbmNjLmpzLm1peGluKEltcGwucHJvdG90eXBlLCB7XG4gICAgbW92ZVRvICh4LCB5KSB7XG4gICAgICAgIGlmICh0aGlzLl91cGRhdGVQYXRoT2Zmc2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXRoT2Zmc2V0ID0gdGhpcy5fcGF0aExlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVBhdGhPZmZzZXQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2FkZFBhdGgoKTtcbiAgICAgICAgdGhpcy5fYWRkUG9pbnQoeCwgeSwgUG9pbnRGbGFncy5QVF9DT1JORVIpO1xuXG4gICAgICAgIHRoaXMuX2NvbW1hbmR4ID0geDtcbiAgICAgICAgdGhpcy5fY29tbWFuZHkgPSB5O1xuICAgIH0sXG5cbiAgICBsaW5lVG8gKHgsIHkpIHtcbiAgICAgICAgdGhpcy5fYWRkUG9pbnQoeCwgeSwgUG9pbnRGbGFncy5QVF9DT1JORVIpO1xuXG4gICAgICAgIHRoaXMuX2NvbW1hbmR4ID0geDtcbiAgICAgICAgdGhpcy5fY29tbWFuZHkgPSB5O1xuICAgIH0sXG5cbiAgICBiZXppZXJDdXJ2ZVRvIChjMXgsIGMxeSwgYzJ4LCBjMnksIHgsIHkpIHtcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLl9jdXJQYXRoO1xuICAgICAgICB2YXIgbGFzdCA9IHBhdGgucG9pbnRzW3BhdGgucG9pbnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGlmIChsYXN0LnggPT09IGMxeCAmJiBsYXN0LnkgPT09IGMxeSAmJiBjMnggPT09IHggJiYgYzJ5ID09PSB5KSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVUbyh4LCB5KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIEhlbHBlci50ZXNzZWxhdGVCZXppZXIodGhpcywgbGFzdC54LCBsYXN0LnksIGMxeCwgYzF5LCBjMngsIGMyeSwgeCwgeSwgMCwgUG9pbnRGbGFncy5QVF9DT1JORVIpO1xuXG4gICAgICAgIHRoaXMuX2NvbW1hbmR4ID0geDtcbiAgICAgICAgdGhpcy5fY29tbWFuZHkgPSB5O1xuICAgIH0sXG5cbiAgICBxdWFkcmF0aWNDdXJ2ZVRvIChjeCwgY3ksIHgsIHkpIHtcbiAgICAgICAgdmFyIHgwID0gdGhpcy5fY29tbWFuZHg7XG4gICAgICAgIHZhciB5MCA9IHRoaXMuX2NvbW1hbmR5O1xuICAgICAgICB0aGlzLmJlemllckN1cnZlVG8oeDAgKyAyLjAgLyAzLjAgKiAoY3ggLSB4MCksIHkwICsgMi4wIC8gMy4wICogKGN5IC0geTApLCB4ICsgMi4wIC8gMy4wICogKGN4IC0geCksIHkgKyAyLjAgLyAzLjAgKiAoY3kgLSB5KSwgeCwgeSk7XG4gICAgfSxcblxuICAgIGFyYyAoY3gsIGN5LCByLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgY291bnRlcmNsb2Nrd2lzZSkge1xuICAgICAgICBIZWxwZXIuYXJjKHRoaXMsIGN4LCBjeSwgciwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNvdW50ZXJjbG9ja3dpc2UpO1xuICAgIH0sXG5cbiAgICBlbGxpcHNlIChjeCwgY3ksIHJ4LCByeSkge1xuICAgICAgICBIZWxwZXIuZWxsaXBzZSh0aGlzLCBjeCwgY3ksIHJ4LCByeSk7XG4gICAgICAgIHRoaXMuX2N1clBhdGguY29tcGxleCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBjaXJjbGUgKGN4LCBjeSwgcikge1xuICAgICAgICBIZWxwZXIuZWxsaXBzZSh0aGlzLCBjeCwgY3ksIHIsIHIpO1xuICAgICAgICB0aGlzLl9jdXJQYXRoLmNvbXBsZXggPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgcmVjdCAoeCwgeSwgdywgaCkge1xuICAgICAgICB0aGlzLm1vdmVUbyh4LCB5KTtcbiAgICAgICAgdGhpcy5saW5lVG8oeCwgeSArIGgpO1xuICAgICAgICB0aGlzLmxpbmVUbyh4ICsgdywgeSArIGgpO1xuICAgICAgICB0aGlzLmxpbmVUbyh4ICsgdywgeSk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fY3VyUGF0aC5jb21wbGV4ID0gZmFsc2U7XG4gICAgfSxcblxuICAgIHJvdW5kUmVjdCAoeCwgeSwgdywgaCwgcikge1xuICAgICAgICBIZWxwZXIucm91bmRSZWN0KHRoaXMsIHgsIHksIHcsIGgsIHIpO1xuICAgICAgICB0aGlzLl9jdXJQYXRoLmNvbXBsZXggPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgY2xlYXIgKGNsZWFuKSB7XG4gICAgICAgIHRoaXMuX3BhdGhMZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9wYXRoT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5fcG9pbnRzT2Zmc2V0ID0gMDtcblxuICAgICAgICB0aGlzLl9jdXJQYXRoID0gbnVsbDtcblxuICAgICAgICBpZiAoY2xlYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3BhdGhzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLl9wb2ludHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBjbG9zZSAoKSB7XG4gICAgICAgIHRoaXMuX2N1clBhdGguY2xvc2VkID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgX2FkZFBhdGggKCkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5fcGF0aExlbmd0aDtcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLl9wYXRoc1tvZmZzZXRdO1xuXG4gICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgcGF0aCA9IG5ldyBQYXRoKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3BhdGhzLnB1c2gocGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXRoLnJlc2V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXRoTGVuZ3RoKys7XG4gICAgICAgIHRoaXMuX2N1clBhdGggPSBwYXRoO1xuXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH0sXG5cbiAgICBfYWRkUG9pbnQgKHgsIHksIGZsYWdzKSB7XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fY3VyUGF0aDtcbiAgICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHB0O1xuICAgICAgICB2YXIgcG9pbnRzID0gdGhpcy5fcG9pbnRzO1xuICAgICAgICB2YXIgcGF0aFBvaW50cyA9IHBhdGgucG9pbnRzO1xuXG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLl9wb2ludHNPZmZzZXQrKztcbiAgICAgICAgcHQgPSBwb2ludHNbb2Zmc2V0XTtcblxuICAgICAgICBpZiAoIXB0KSB7XG4gICAgICAgICAgICBwdCA9IG5ldyBQb2ludCh4LCB5KTtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHB0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHB0LnggPSB4O1xuICAgICAgICAgICAgcHQueSA9IHk7XG4gICAgICAgIH1cblxuICAgICAgICBwdC5mbGFncyA9IGZsYWdzO1xuICAgICAgICBwYXRoUG9pbnRzLnB1c2gocHQpO1xuICAgIH0sXG5cbn0pO1xuXG5jYy5HcmFwaGljcy5fSW1wbCA9IEltcGw7XG5tb2R1bGUuZXhwb3J0cyA9IEltcGw7XG4iXSwic291cmNlUm9vdCI6Ii8ifQ==