
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/utils/trans-pool/node-unit.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

var _utils = require("../../value-types/utils");

/****************************************************************************
 Copyright (c) 2019 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var Uint32_Bytes = 4;
var Uint8_Bytes = 1; // Space : [Dirty]                                  [Size:4 Uint32]

var Dirty_Type = Uint32Array;
var Dirty_Members = 1;
var Dirty_Stride = Dirty_Members * Uint32_Bytes; // Space : [TRS]                                    [Size:4 * 10 Float32|Float64]

var TRS_Members = 10;
var TRS_Stride = TRS_Members * _utils.FLOAT_BYTES; // Space : [LocalMatrix]                            [Size:4 * 16 Float32|Float64]

var LocalMatrix_Members = 16;
var LocalMatrix_Stride = LocalMatrix_Members * _utils.FLOAT_BYTES; // Space : [WorldMatrix]                            [Size:4 * 16 Float32|Float64]

var WorldMatrix_Members = 16;
var WorldMatrix_Stride = WorldMatrix_Members * _utils.FLOAT_BYTES; // Space : [Parent Unit]                            [Size:4 Uint32]
// Space : [Parent Index]                           [Size:4 Uint32]

var Parent_Type = Uint32Array;
var Parent_Members = 2;
var Parent_Stride = Parent_Members * Uint32_Bytes; // Space : [ZOrder]                                 [Size:4 Uint32]

var ZOrder_Type = Uint32Array;
var ZOrder_Members = 1;
var ZOrder_Stride = ZOrder_Members * Uint32_Bytes; // Space : [CullingMask]                            [Size:4 Int32]

var CullingMask_Type = Int32Array;
var CullingMask_Members = 1;
var CullingMask_Stride = CullingMask_Members * Uint32_Bytes; // Space : [Opacity]                                [Size:1 Uint8]

var Opacity_Type = Uint8Array;
var Opacity_Members = 1;
var Opacity_Stride = Opacity_Members * Uint8_Bytes; // Space : [Is3D]                                   [Size:1 Uint8]

var Is3D_Type = Uint8Array;
var Is3D_Members = 1;
var Is3D_Stride = Is3D_Members * Uint8_Bytes; // Space : [NodePtr]                                [Size:4 * 2 Uint32]

var Node_Type = Uint32Array;
var Node_Members = 2; // Space : [Skew]                                   [Size:4 * 2 Float32]

var Skew_Members = 2;
var Skew_Stride = Skew_Members * _utils.FLOAT_BYTES;

var UnitBase = require('./unit-base');

var NodeUnit = function NodeUnit(unitID, memPool) {
  UnitBase.call(this, unitID, memPool);
  var contentNum = this._contentNum;
  this.trsList = new _utils.FLOAT_ARRAY_TYPE(contentNum * TRS_Members);
  this.localMatList = new _utils.FLOAT_ARRAY_TYPE(contentNum * LocalMatrix_Members);
  this.worldMatList = new _utils.FLOAT_ARRAY_TYPE(contentNum * WorldMatrix_Members);

  if (CC_JSB && CC_NATIVERENDERER) {
    this.dirtyList = new Dirty_Type(contentNum * Dirty_Members);
    this.parentList = new Parent_Type(contentNum * Parent_Members);
    this.zOrderList = new ZOrder_Type(contentNum * ZOrder_Members);
    this.cullingMaskList = new CullingMask_Type(contentNum * CullingMask_Members);
    this.opacityList = new Opacity_Type(contentNum * Opacity_Members);
    this.is3DList = new Is3D_Type(contentNum * Is3D_Members);
    this.nodeList = new Node_Type(contentNum * Node_Members);
    this.skewList = new _utils.FLOAT_ARRAY_TYPE(contentNum * Skew_Members);

    this._memPool._nativeMemPool.updateNodeData(unitID, this.dirtyList, this.trsList, this.localMatList, this.worldMatList, this.parentList, this.zOrderList, this.cullingMaskList, this.opacityList, this.is3DList, this.nodeList, this.skewList);
  }

  for (var i = 0; i < contentNum; i++) {
    var space = this._spacesData[i];
    space.trs = new _utils.FLOAT_ARRAY_TYPE(this.trsList.buffer, i * TRS_Stride, TRS_Members);
    space.localMat = new _utils.FLOAT_ARRAY_TYPE(this.localMatList.buffer, i * LocalMatrix_Stride, LocalMatrix_Members);
    space.worldMat = new _utils.FLOAT_ARRAY_TYPE(this.worldMatList.buffer, i * WorldMatrix_Stride, WorldMatrix_Members);

    if (CC_JSB && CC_NATIVERENDERER) {
      space.dirty = new Dirty_Type(this.dirtyList.buffer, i * Dirty_Stride, Dirty_Members);
      space.parent = new Parent_Type(this.parentList.buffer, i * Parent_Stride, Parent_Members);
      space.zOrder = new ZOrder_Type(this.zOrderList.buffer, i * ZOrder_Stride, ZOrder_Members);
      space.cullingMask = new CullingMask_Type(this.cullingMaskList.buffer, i * CullingMask_Stride, CullingMask_Members);
      space.opacity = new Opacity_Type(this.opacityList.buffer, i * Opacity_Stride, Opacity_Members);
      space.is3D = new Is3D_Type(this.is3DList.buffer, i * Is3D_Stride, Is3D_Members);
      space.skew = new _utils.FLOAT_ARRAY_TYPE(this.skewList.buffer, i * Skew_Stride, Skew_Members);
    }
  }
};

(function () {
  var Super = function Super() {};

  Super.prototype = UnitBase.prototype;
  NodeUnit.prototype = new Super();
})();

module.exports = NodeUnit;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXGNvcmVcXHV0aWxzXFx0cmFucy1wb29sXFxub2RlLXVuaXQuanMiXSwibmFtZXMiOlsiVWludDMyX0J5dGVzIiwiVWludDhfQnl0ZXMiLCJEaXJ0eV9UeXBlIiwiVWludDMyQXJyYXkiLCJEaXJ0eV9NZW1iZXJzIiwiRGlydHlfU3RyaWRlIiwiVFJTX01lbWJlcnMiLCJUUlNfU3RyaWRlIiwiRkxPQVRfQllURVMiLCJMb2NhbE1hdHJpeF9NZW1iZXJzIiwiTG9jYWxNYXRyaXhfU3RyaWRlIiwiV29ybGRNYXRyaXhfTWVtYmVycyIsIldvcmxkTWF0cml4X1N0cmlkZSIsIlBhcmVudF9UeXBlIiwiUGFyZW50X01lbWJlcnMiLCJQYXJlbnRfU3RyaWRlIiwiWk9yZGVyX1R5cGUiLCJaT3JkZXJfTWVtYmVycyIsIlpPcmRlcl9TdHJpZGUiLCJDdWxsaW5nTWFza19UeXBlIiwiSW50MzJBcnJheSIsIkN1bGxpbmdNYXNrX01lbWJlcnMiLCJDdWxsaW5nTWFza19TdHJpZGUiLCJPcGFjaXR5X1R5cGUiLCJVaW50OEFycmF5IiwiT3BhY2l0eV9NZW1iZXJzIiwiT3BhY2l0eV9TdHJpZGUiLCJJczNEX1R5cGUiLCJJczNEX01lbWJlcnMiLCJJczNEX1N0cmlkZSIsIk5vZGVfVHlwZSIsIk5vZGVfTWVtYmVycyIsIlNrZXdfTWVtYmVycyIsIlNrZXdfU3RyaWRlIiwiVW5pdEJhc2UiLCJyZXF1aXJlIiwiTm9kZVVuaXQiLCJ1bml0SUQiLCJtZW1Qb29sIiwiY2FsbCIsImNvbnRlbnROdW0iLCJfY29udGVudE51bSIsInRyc0xpc3QiLCJGTE9BVF9BUlJBWV9UWVBFIiwibG9jYWxNYXRMaXN0Iiwid29ybGRNYXRMaXN0IiwiQ0NfSlNCIiwiQ0NfTkFUSVZFUkVOREVSRVIiLCJkaXJ0eUxpc3QiLCJwYXJlbnRMaXN0Iiwiek9yZGVyTGlzdCIsImN1bGxpbmdNYXNrTGlzdCIsIm9wYWNpdHlMaXN0IiwiaXMzRExpc3QiLCJub2RlTGlzdCIsInNrZXdMaXN0IiwiX21lbVBvb2wiLCJfbmF0aXZlTWVtUG9vbCIsInVwZGF0ZU5vZGVEYXRhIiwiaSIsInNwYWNlIiwiX3NwYWNlc0RhdGEiLCJ0cnMiLCJidWZmZXIiLCJsb2NhbE1hdCIsIndvcmxkTWF0IiwiZGlydHkiLCJwYXJlbnQiLCJ6T3JkZXIiLCJjdWxsaW5nTWFzayIsIm9wYWNpdHkiLCJpczNEIiwic2tldyIsIlN1cGVyIiwicHJvdG90eXBlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQXlCQTs7QUF6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUEsSUFBTUEsWUFBWSxHQUFHLENBQXJCO0FBQ0EsSUFBTUMsV0FBVyxHQUFHLENBQXBCLEVBRUE7O0FBQ0EsSUFBTUMsVUFBVSxHQUFHQyxXQUFuQjtBQUNBLElBQU1DLGFBQWEsR0FBRyxDQUF0QjtBQUNBLElBQU1DLFlBQVksR0FBR0QsYUFBYSxHQUFHSixZQUFyQyxFQUVBOztBQUNBLElBQU1NLFdBQVcsR0FBRyxFQUFwQjtBQUNBLElBQU1DLFVBQVUsR0FBR0QsV0FBVyxHQUFHRSxrQkFBakMsRUFFQTs7QUFDQSxJQUFNQyxtQkFBbUIsR0FBRyxFQUE1QjtBQUNBLElBQU1DLGtCQUFrQixHQUFHRCxtQkFBbUIsR0FBR0Qsa0JBQWpELEVBRUE7O0FBQ0EsSUFBTUcsbUJBQW1CLEdBQUcsRUFBNUI7QUFDQSxJQUFNQyxrQkFBa0IsR0FBR0QsbUJBQW1CLEdBQUdILGtCQUFqRCxFQUVBO0FBQ0E7O0FBQ0EsSUFBTUssV0FBVyxHQUFHVixXQUFwQjtBQUNBLElBQU1XLGNBQWMsR0FBRyxDQUF2QjtBQUNBLElBQU1DLGFBQWEsR0FBR0QsY0FBYyxHQUFHZCxZQUF2QyxFQUVBOztBQUNBLElBQU1nQixXQUFXLEdBQUdiLFdB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RUFBa0RKLENBQUMsR0FBR3JDLGtCQUF0RCxFQUEwRUQsbUJBQTFFLENBQXBCO0FBQ0F1QyxNQUFBQSxLQUFLLENBQUNVLE9BQU4sR0FBZ0IsSUFBSS9DLFlBQUosQ0FBaUIsS0FBSzZCLFdBQUwsQ0FBaUJXLE1BQWxDLEVBQTBDSixDQUFDLEdBQUdqQyxjQUE5QyxFQUE4REQsZUFBOUQsQ0FBaEI7QUFDQW1DLE1BQUFBLEtBQUssQ0FBQ1csSUFBTixHQUFhLElBQUk1QyxTQUFKLENBQWMsS0FBSzBCLFFBQUwsQ0FBY1UsTUFBNUIsRUFBb0NKLENBQUMsR0FBRzlCLFdBQXhDLEVBQXFERCxZQUFyRCxDQUFiO0FBQ0FnQyxNQUFBQSxLQUFLLENBQUNZLElBQU4sR0FBYSxJQUFJN0IsdUJBQUosQ0FBcUIsS0FBS1ksUUFBTCxDQUFjUSxNQUFuQyxFQUEyQ0osQ0FBQyxHQUFHMUIsV0FBL0MsRUFBNERELFlBQTVELENBQWI7QUFDSDtBQUNKO0FBQ0osQ0FuREQ7O0FBcURBLENBQUMsWUFBVTtBQUNQLE1BQUl5QyxLQUFLLEdBQUcsU0FBUkEsS0FBUSxHQUFVLENBQUUsQ0FBeEI7O0FBQ0FBLEVBQUFBLEtBQUssQ0FBQ0MsU0FBTixHQUFrQnhDLFFBQVEsQ0FBQ3dDLFNBQTNCO0FBQ0F0QyxFQUFBQSxRQUFRLENBQUNzQyxTQUFULEdBQXFCLElBQUlELEtBQUosRUFBckI7QUFDSCxDQUpEOztBQU1BRSxNQUFNLENBQUNDLE9BQVAsR0FBaUJ4QyxRQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTkgWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXHJcblxyXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxyXG4gd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcclxuIHVzZWQgZm9yIGRldmVsb3BpbmcgZ2FtZXMuIFlvdSBhcmUgbm90IGdyYW50ZWQgdG8gcHVibGlzaCwgZGlzdHJpYnV0ZSxcclxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmltcG9ydCB7IEZMT0FUX0FSUkFZX1RZUEUsIEZMT0FUX0JZVEVTIH0gZnJvbSAnLi4vLi4vdmFsdWUtdHlwZXMvdXRpbHMnXHJcblxyXG5jb25zdCBVaW50MzJfQnl0ZXMgPSA0O1xyXG5jb25zdCBVaW50OF9CeXRlcyA9IDE7XHJcblxyXG4vLyBTcGFjZSA6IFtEaXJ0eV0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCBVaW50MzJdXHJcbmNvbnN0IERpcnR5X1R5cGUgPSBVaW50MzJBcnJheTtcclxuY29uc3QgRGlydHlfTWVtYmVycyA9IDE7XHJcbmNvbnN0IERpcnR5X1N0cmlkZSA9IERpcnR5X01lbWJlcnMgKiBVaW50MzJfQnl0ZXM7XHJcblxyXG4vLyBTcGFjZSA6IFtUUlNdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCAqIDEwIEZsb2F0MzJ8RmxvYXQ2NF1cclxuY29uc3QgVFJTX01lbWJlcnMgPSAxMDtcclxuY29uc3QgVFJTX1N0cmlkZSA9IFRSU19NZW1iZXJzICogRkxPQVRfQllURVM7XHJcblxyXG4vLyBTcGFjZSA6IFtMb2NhbE1hdHJpeF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCAqIDE2IEZsb2F0MzJ8RmxvYXQ2NF1cclxuY29uc3QgTG9jYWxNYXRyaXhfTWVtYmVycyA9IDE2O1xyXG5jb25zdCBMb2NhbE1hdHJpeF9TdHJpZGUgPSBMb2NhbE1hdHJpeF9NZW1iZXJzICogRkxPQVRfQllURVM7XHJcblxyXG4vLyBTcGFjZSA6IFtXb3JsZE1hdHJpeF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCAqIDE2IEZsb2F0MzJ8RmxvYXQ2NF1cclxuY29uc3QgV29ybGRNYXRyaXhfTWVtYmVycyA9IDE2O1xyXG5jb25zdCBXb3JsZE1hdHJpeF9TdHJpZGUgPSBXb3JsZE1hdHJpeF9NZW1iZXJzICogRkxPQVRfQllURVM7XHJcblxyXG4vLyBTcGFjZSA6IFtQYXJlbnQgVW5pdF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCBVaW50MzJdXHJcbi8vIFNwYWNlIDogW1BhcmVudCBJbmRleF0gICAgICAgICAgICAgICAgICAgICAgICAgICBbU2l6ZTo0IFVpbnQzMl1cclxuY29uc3QgUGFyZW50X1R5cGUgPSBVaW50MzJBcnJheTtcclxuY29uc3QgUGFyZW50X01lbWJlcnMgPSAyO1xyXG5jb25zdCBQYXJlbnRfU3RyaWRlID0gUGFyZW50X01lbWJlcnMgKiBVaW50MzJfQnl0ZXM7XHJcblxyXG4vLyBTcGFjZSA6IFtaT3JkZXJdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCBVaW50MzJdXHJcbmNvbnN0IFpPcmRlcl9UeXBlID0gVWludDMyQXJyYXk7XHJcbmNvbnN0IFpPcmRlcl9NZW1iZXJzID0gMTtcclxuY29uc3QgWk9yZGVyX1N0cmlkZSA9IFpPcmRlcl9NZW1iZXJzICogVWludDMyX0J5dGVzO1xyXG5cclxuLy8gU3BhY2UgOiBbQ3VsbGluZ01hc2tdICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtTaXplOjQgSW50MzJdXHJcbmNvbnN0IEN1bGxpbmdNYXNrX1R5cGUgPSBJbnQzMkFycmF5O1xyXG5jb25zdCBDdWxsaW5nTWFza19NZW1iZXJzID0gMTtcclxuY29uc3QgQ3VsbGluZ01hc2tfU3RyaWRlID0gQ3VsbGluZ01hc2tfTWVtYmVycyAqIFVpbnQzMl9CeXRlcztcclxuXHJcbi8vIFNwYWNlIDogW09wYWNpdHldICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbU2l6ZToxIFVpbnQ4XVxyXG5jb25zdCBPcGFjaXR5X1R5cGUgPSBVaW50OEFycmF5O1xyXG5jb25zdCBPcGFjaXR5X01lbWJlcnMgPSAxO1xyXG5jb25zdCBPcGFjaXR5X1N0cmlkZSA9IE9wYWNpdHlfTWVtYmVycyAqIFVpbnQ4X0J5dGVzO1xyXG5cclxuLy8gU3BhY2UgOiBbSXMzRF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtTaXplOjEgVWludDhdXHJcbmNvbnN0IElzM0RfVHlwZSA9IFVpbnQ4QXJyYXk7XHJcbmNvbnN0IElzM0RfTWVtYmVycyA9IDE7XHJcbmNvbnN0IElzM0RfU3RyaWRlID0gSXMzRF9NZW1iZXJzICogVWludDhfQnl0ZXM7XHJcblxyXG4vLyBTcGFjZSA6IFtOb2RlUHRyXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCAqIDIgVWludDMyXVxyXG5jb25zdCBOb2RlX1R5cGUgPSBVaW50MzJBcnJheTtcclxuY29uc3QgTm9kZV9NZW1iZXJzID0gMjtcclxuXHJcbi8vIFNwYWNlIDogW1NrZXddICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbU2l6ZTo0ICogMiBGbG9hdDMyXVxyXG5jb25zdCBTa2V3X01lbWJlcnMgPSAyO1xyXG5jb25zdCBTa2V3X1N0cmlkZSA9IFNrZXdfTWVtYmVycyAqIEZMT0FUX0JZVEVTO1xyXG5cclxubGV0IFVuaXRCYXNlID0gcmVxdWlyZSgnLi91bml0LWJhc2UnKTtcclxubGV0IE5vZGVVbml0ID0gZnVuY3Rpb24gKHVuaXRJRCwgbWVtUG9vbCkge1xyXG4gICAgVW5pdEJhc2UuY2FsbCh0aGlzLCB1bml0SUQsIG1lbVBvb2wpO1xyXG5cclxuICAgIGxldCBjb250ZW50TnVtID0gdGhpcy5fY29udGVudE51bTtcclxuICAgIHRoaXMudHJzTGlzdCA9IG5ldyBGTE9BVF9BUlJBWV9UWVBFKGNvbnRlbnROdW0gKiBUUlNfTWVtYmVycyk7XHJcbiAgICB0aGlzLmxvY2FsTWF0TGlzdCA9IG5ldyBGTE9BVF9BUlJBWV9UWVBFKGNvbnRlbnROdW0gKiBMb2NhbE1hdHJpeF9NZW1iZXJzKTtcclxuICAgIHRoaXMud29ybGRNYXRMaXN0ID0gbmV3IEZMT0FUX0FSUkFZX1RZUEUoY29udGVudE51bSAqIFdvcmxkTWF0cml4X01lbWJlcnMpO1xyXG5cclxuICAgIGlmIChDQ19KU0IgJiYgQ0NfTkFUSVZFUkVOREVSRVIpIHtcclxuICAgICAgICB0aGlzLmRpcnR5TGlzdCA9IG5ldyBEaXJ0eV9UeXBlKGNvbnRlbnROdW0gKiBEaXJ0eV9NZW1iZXJzKTtcclxuICAgICAgICB0aGlzLnBhcmVudExpc3QgPSBuZXcgUGFyZW50X1R5cGUoY29udGVudE51bSAqIFBhcmVudF9NZW1iZXJzKTtcclxuICAgICAgICB0aGlzLnpPcmRlckxpc3QgPSBuZXcgWk9yZGVyX1R5cGUoY29udGVudE51bSAqIFpPcmRlcl9NZW1iZXJzKTtcclxuICAgICAgICB0aGlzLmN1bGxpbmdNYXNrTGlzdCA9IG5ldyBDdWxsaW5nTWFza19UeXBlKGNvbnRlbnROdW0gKiBDdWxsaW5nTWFza19NZW1iZXJzKTtcclxuICAgICAgICB0aGlzLm9wYWNpdHlMaXN0ID0gbmV3IE9wYWNpdHlfVHlwZShjb250ZW50TnVtICogT3BhY2l0eV9NZW1iZXJzKTtcclxuICAgICAgICB0aGlzLmlzM0RMaXN0ID0gbmV3IElzM0RfVHlwZShjb250ZW50TnVtICogSXMzRF9NZW1iZXJzKTtcclxuICAgICAgICB0aGlzLm5vZGVMaXN0ID0gbmV3IE5vZGVfVHlwZShjb250ZW50TnVtICogTm9kZV9NZW1iZXJzKTtcclxuICAgICAgICB0aGlzLnNrZXdMaXN0ID0gbmV3IEZMT0FUX0FSUkFZX1RZUEUoY29udGVudE51bSAqIFNrZXdfTWVtYmVycyk7XHJcblxyXG4gICAgICAgIHRoaXMuX21lbVBvb2wuX25hdGl2ZU1lbVBvb2wudXBkYXRlTm9kZURhdGEoXHJcbiAgICAgICAgICAgIHVuaXRJRCxcclxuICAgICAgICAgICAgdGhpcy5kaXJ0eUxpc3QsXHJcbiAgICAgICAgICAgIHRoaXMudHJzTGlzdCxcclxuICAgICAgICAgICAgdGhpcy5sb2NhbE1hdExpc3QsXHJcbiAgICAgICAgICAgIHRoaXMud29ybGRNYXRMaXN0LFxyXG4gICAgICAgICAgICB0aGlzLnBhcmVudExpc3QsXHJcbiAgICAgICAgICAgIHRoaXMuek9yZGVyTGlzdCxcclxuICAgICAgICAgICAgdGhpcy5jdWxsaW5nTWFza0xpc3QsXHJcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eUxpc3QsXHJcbiAgICAgICAgICAgIHRoaXMuaXMzRExpc3QsXHJcbiAgICAgICAgICAgIHRoaXMubm9kZUxpc3QsXHJcbiAgICAgICAgICAgIHRoaXMuc2tld0xpc3RcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudE51bTsgaSArKykge1xyXG4gICAgICAgIGxldCBzcGFjZSA9IHRoaXMuX3NwYWNlc0RhdGFbaV07XHJcblxyXG4gICAgICAgIHNwYWNlLnRycyA9IG5ldyBGTE9BVF9BUlJBWV9UWVBFKHRoaXMudHJzTGlzdC5idWZmZXIsIGkgKiBUUlNfU3RyaWRlLCBUUlNfTWVtYmVycyk7XHJcbiAgICAgICAgc3BhY2UubG9jYWxNYXQgPSBuZXcgRkxPQVRfQVJSQVlfVFlQRSh0aGlzLmxvY2FsTWF0TGlzdC5idWZmZXIsIGkgKiBMb2NhbE1hdHJpeF9TdHJpZGUsIExvY2FsTWF0cml4X01lbWJlcnMpO1xyXG4gICAgICAgIHNwYWNlLndvcmxkTWF0ID0gbmV3IEZMT0FUX0FSUkFZX1RZUEUodGhpcy53b3JsZE1hdExpc3QuYnVmZmVyLCBpICogV29ybGRNYXRyaXhfU3RyaWRlLCBXb3JsZE1hdHJpeF9NZW1iZXJzKTtcclxuXHJcbiAgICAgICAgaWYgKENDX0pTQiAmJiBDQ19OQVRJVkVSRU5ERVJFUikge1xyXG4gICAgICAgICAgICBzcGFjZS5kaXJ0eSA9IG5ldyBEaXJ0eV9UeXBlKHRoaXMuZGlydHlMaXN0LmJ1ZmZlciwgaSAqIERpcnR5X1N0cmlkZSwgRGlydHlfTWVtYmVycyk7XHJcbiAgICAgICAgICAgIHNwYWNlLnBhcmVudCA9IG5ldyBQYXJlbnRfVHlwZSh0aGlzLnBhcmVudExpc3QuYnVmZmVyLCBpICogUGFyZW50X1N0cmlkZSwgUGFyZW50X01lbWJlcnMpO1xyXG4gICAgICAgICAgICBzcGFjZS56T3JkZXIgPSBuZXcgWk9yZGVyX1R5cGUodGhpcy56T3JkZXJMaXN0LmJ1ZmZlciwgaSAqIFpPcmRlcl9TdHJpZGUsIFpPcmRlcl9NZW1iZXJzKTtcclxuICAgICAgICAgICAgc3BhY2UuY3VsbGluZ01hc2sgPSBuZXcgQ3VsbGluZ01hc2tfVHlwZSh0aGlzLmN1bGxpbmdNYXNrTGlzdC5idWZmZXIsIGkgKiBDdWxsaW5nTWFza19TdHJpZGUsIEN1bGxpbmdNYXNrX01lbWJlcnMpO1xyXG4gICAgICAgICAgICBzcGFjZS5vcGFjaXR5ID0gbmV3IE9wYWNpdHlfVHlwZSh0aGlzLm9wYWNpdHlMaXN0LmJ1ZmZlciwgaSAqIE9wYWNpdHlfU3RyaWRlLCBPcGFjaXR5X01lbWJlcnMpO1xyXG4gICAgICAgICAgICBzcGFjZS5pczNEID0gbmV3IElzM0RfVHlwZSh0aGlzLmlzM0RMaXN0LmJ1ZmZlciwgaSAqIElzM0RfU3RyaWRlLCBJczNEX01lbWJlcnMpO1xyXG4gICAgICAgICAgICBzcGFjZS5za2V3ID0gbmV3IEZMT0FUX0FSUkFZX1RZUEUodGhpcy5za2V3TGlzdC5idWZmZXIsIGkgKiBTa2V3X1N0cmlkZSwgU2tld19NZW1iZXJzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIGxldCBTdXBlciA9IGZ1bmN0aW9uKCl7fTtcclxuICAgIFN1cGVyLnByb3RvdHlwZSA9IFVuaXRCYXNlLnByb3RvdHlwZTtcclxuICAgIE5vZGVVbml0LnByb3RvdHlwZSA9IG5ldyBTdXBlcigpO1xyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOb2RlVW5pdDsiXSwic291cmNlUm9vdCI6Ii8ifQ==