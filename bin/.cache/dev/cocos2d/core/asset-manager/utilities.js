
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/asset-manager/utilities.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2019 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
  worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
  not use Cocos Creator software for developing other software or tools that's
  used for developing games. You are not granted to publish, distribute,
  sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var dependUtil = require('./depend-util');

var _require = require('./helper'),
    isScene = _require.isScene,
    decodeUuid = _require.decodeUuid;

var _require2 = require('./shared'),
    assets = _require2.assets;

var _require3 = require('../platform/utils'),
    callInNextTick = _require3.callInNextTick;

var MissingObjectReporter = CC_EDITOR && Editor.require('app://editor/page/scene-utils/missing-object-reporter');

require('../assets/CCAsset');

var utils = {
  processOptions: function processOptions(options) {
    if (CC_EDITOR) return;
    var uuids = options.uuids;
    var paths = options.paths;
    var types = options.types;
    var bundles = options.deps;
    var realEntries = options.paths = Object.create(null);

    if (options.debug === false) {
      for (var i = 0, l = uuids.length; i < l; i++) {
        uuids[i] = decodeUuid(uuids[i]);
      }

      for (var id in paths) {
        var entry = paths[id];
        var type = entry[1];
        entry[1] = types[type];
      }
    } else {
      var out = Object.create(null);

      for (var _i = 0, _l = uuids.length; _i < _l; _i++) {
        var uuid = uuids[_i];
        uuids[_i] = out[uuid] = decodeUuid(uuid);
      }

      uuids = out;
    }

    for (var _id in paths) {
      var _entry = paths[_id];
      realEntries[uuids[_id]] = _entry;
    }

    var scenes = options.scenes;

    for (var name in scenes) {
      var _uuid = scenes[name];
      scenes[name] = uuids[_uuid];
    }

    var packs = options.packs;

    for (var packId in packs) {
      var packedIds = packs[packId];

      for (var j = 0; j < packedIds.length; ++j) {
        packedIds[j] = uuids[packedIds[j]];
      }
    }

    var versions = options.versions;

    if (versions) {
      for (var folder in versions) {
        var entries = versions[folder];

        for (var _i2 = 0; _i2 < entries.length; _i2 += 2) {
          var _uuid2 = entries[_i2];
          entries[_i2] = uuids[_uuid2] || _uuid2;
        }
      }
    }

    var redirect = options.redirect;

    if (redirect) {
      for (var _i3 = 0; _i3 < redirect.length; _i3 += 2) {
        redirect[_i3] = uuids[redirect[_i3]];
        redirect[_i3 + 1] = bundles[redirect[_i3 + 1]];
      }
    }
  },
  clear: function clear(task, clearRef) {
    for (var i = 0, l = task.input.length; i < l; i++) {
      var item = task.input[i];

      if (clearRef) {
        !item.isNative && item.content && item.content.decRef && item.content.decRef(false);
      }

      item.recycle();
    }

    task.input = null;
  },
  urlAppendTimestamp: function urlAppendTimestamp(url) {
    if (cc.assetManager.downloader.appendTimeStamp && typeof url === 'string') {
      if (/\?/.test(url)) return url + '&_t=' + (new Date() - 0);else return url + '?_t=' + (new Date() - 0);
    }

    return url;
  },
  retry: function retry(process, times, wait, onComplete, index) {
    index = index || 0;
    process(index, function (err, result) {
      index++;

      if (!err || index > times) {
        onComplete && onComplete(err, result);
      } else {
        setTimeout(function () {
          utils.retry(process, times, wait, onComplete, index);
        }, wait);
      }
    });
  },
  getDepends: function getDepends(uuid, data, exclude, depends, preload, asyncLoadAssets, config) {
    try {
      var info = dependUtil.parse(uuid, data);
      var includeNative = true;
      if (data instanceof cc.Asset && (!data.__nativeDepend__ || data._nativeAsset)) includeNative = false;

      if (!preload) {
        asyncLoadAssets = !CC_EDITOR && (!!data.asyncLoadAssets || asyncLoadAssets && !info.preventDeferredLoadDependents);

        for (var i = 0, l = info.deps.length; i < l; i++) {
          var dep = info.deps[i];

          if (!(dep in exclude)) {
            exclude[dep] = true;
            depends.push({
              uuid: dep,
              __asyncLoadAssets__: asyncLoadAssets,
              bundle: config && config.name
            });
          }
        }

        if (includeNative && !asyncLoadAssets && !info.preventPreloadNativeObject && info.nativeDep) {
          config && (info.nativeDep.bundle = config.name);
          depends.push(Object.assign({}, info.nativeDep));
        }
      } else {
        for (var _i4 = 0, _l2 = info.deps.length; _i4 < _l2; _i4++) {
          var _dep = info.deps[_i4];

          if (!(_dep in exclude)) {
            exclude[_dep] = true;
            depends.push({
              uuid: _dep,
              bundle: config && config.name
            });
          }
        }

        if (includeNative && info.nativeDep) {
          config && (info.nativeDep.bundle = config.name);
          depends.push(Object.assign({}, info.nativeDep));
        }
      }
    } catch (e) {
      cc.error(e.message, e.stack);
    }
  },
  cache: function cache(id, asset, cacheAsset) {
    if (!asset) return;

    var _isScene = isScene(asset);

    if (!_isScene && cacheAsset) {
      assets.add(id, asset);
    }

    if (_isScene) {
      if (CC_EDITOR && !asset.scene) {
        Editor.error('Sorry, the scene data of "%s" is corrupted!', asset._uuid);
      }
    }
  },
  setProperties: function setProperties(uuid, asset, assetsMap) {
    var missingAsset = false;
    var depends = asset.__depends__;

    if (depends) {
      var missingAssetReporter = null;

      for (var i = 0, l = depends.length; i < l; i++) {
        var depend = depends[i];
        var dependAsset = assetsMap[depend.uuid + '@import'];

        if (!dependAsset) {
          if (CC_EDITOR) {
            !missingAssetReporter && (missingAssetReporter = new MissingObjectReporter(asset));
            missingAssetReporter.stashByOwner(depend.owner, depend.prop, Editor.serialize.asAsset(depend.uuid));
          } else {
            cc.error('The asset ' + depend.uuid + ' is missing!');
          }

          missingAsset = true;
        } else {
          depend.owner[depend.prop] = dependAsset.addRef();
        }
      }

      missingAssetReporter && missingAssetReporter.reportByOwner();
      asset.__depends__ = undefined;
    }

    if (asset.__nativeDepend__) {
      if (!asset._nativeAsset) {
        if (assetsMap[uuid + '@native']) {
          asset._nativeAsset = assetsMap[uuid + '@native'];
        } else {
          missingAsset = true;

          if (CC_EDITOR) {
            console.error("the native asset of " + uuid + " is missing!");
          }
        }
      }

      asset.__nativeDepend__ = undefined;
    }

    return missingAsset;
  },
  gatherAsset: function gatherAsset(task) {
    var source = task.source;

    if (!task.options.__outputAsArray__ && source.length === 1) {
      task.output = source[0].content;
    } else {
      var output = task.output = [];

      for (var i = 0, l = source.length; i < l; i++) {
        output.push(source[i].content);
      }
    }
  },
  forEach: function forEach(array, process, onComplete) {
    var count = 0;
    var errs = [];
    if (array.length === 0) onComplete && onComplete(errs);

    for (var i = 0, l = array.length; i < l; i++) {
      process(array[i], function (err) {
        if (err) {
          errs.push(err);
        }

        count++;

        if (count === l) {
          onComplete && onComplete(errs);
        }
      });
    }
  },
  parseParameters: function parseParameters(options, onProgress, onComplete) {
    if (onComplete === undefined) {
      var isCallback = typeof options === 'function';

      if (onProgress) {
        onComplete = onProgress;

        if (!isCallback) {
          onProgress = null;
        }
      } else if (onProgress === undefined && isCallback) {
        onComplete = options;
        options = null;
        onProgress = null;
      }

      if (onProgress !== undefined && isCallback) {
        onProgress = options;
        options = null;
      }
    }

    options = options || Object.create(null);
    return {
      options: options,
      onProgress: onProgress,
      onComplete: onComplete
    };
  },
  parseLoadResArgs: function parseLoadResArgs(type, onProgress, onComplete) {
    if (onComplete === undefined) {
      var isValidType = cc.js.isChildClassOf(type, cc.Asset);

      if (onProgress) {
        onComplete = onProgress;

        if (isValidType) {
          onProgress = null;
        }
      } else if (onProgress === undefined && !isValidType) {
        onComplete = type;
        onProgress = null;
        type = null;
      }

      if (onProgress !== undefined && !isValidType) {
        onProgress = type;
        type = null;
      }
    }

    return {
      type: type,
      onProgress: onProgress,
      onComplete: onComplete
    };
  },
  checkCircleReference: function checkCircleReference(owner, uuid, map, checked) {
    if (!checked) {
      checked = Object.create(null);
    }

    var item = map[uuid];

    if (!item || checked[uuid]) {
      return false;
    }

    checked[uuid] = true;
    var result = false;
    var deps = dependUtil.getDeps(uuid);

    if (deps) {
      for (var i = 0, l = deps.length; i < l; i++) {
        var dep = deps[i];

        if (dep === owner || utils.checkCircleReference(owner, dep, map, checked)) {
          result = true;
          break;
        }
      }
    }

    return result;
  },
  asyncify: function asyncify(cb) {
    return function (p1, p2) {
      if (!cb) return;
      var refs = [];

      if (Array.isArray(p2)) {
        p2.forEach(function (x) {
          return x instanceof cc.Asset && refs.push(x.addRef());
        });
      } else {
        p2 instanceof cc.Asset && refs.push(p2.addRef());
      }

      callInNextTick(function () {
        refs.forEach(function (x) {
          return x.decRef(false);
        });
        cb(p1, p2);
      });
    };
  }
};
module.exports = utils;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXGNvcmVcXGFzc2V0LW1hbmFnZXJcXHV0aWxpdGllcy5qcyJdLCJuYW1lcyI6WyJkZXBlbmRVdGlsIiwicmVxdWlyZSIsImlzU2NlbmUiLCJkZWNvZGVVdWlkIiwiYXNzZXRzIiwiY2FsbEluTmV4dFRpY2siLCJNaXNzaW5nT2JqZWN0UmVwb3J0ZXIiLCJDQ19FRElUT1IiLCJFZGl0b3IiLCJ1dGlscyIsInByb2Nlc3NPcHRpb25zIiwib3B0aW9ucyIsInV1aWRzIiwicGF0aHMiLCJ0eXBlcyIsImJ1bmRsZXMiLCJkZXBzIiwicmVhbEVudHJpZXMiLCJPYmplY3QiLCJjcmVhdGUiLCJkZWJ1ZyIsImkiLCJsIiwibGVuZ3RoIiwiaWQiLCJlbnRyeSIsInR5cGUiLCJvdXQiLCJ1dWlkIiwic2NlbmVzIiwibmFtZSIsInBhY2tzIiwicGFja0lkIiwicGFja2VkSWRzIiwiaiIsInZlcnNpb25zIiwiZm9sZGVyIiwiZW50cmllcyIsInJlZGlyZWN0IiwiY2xlYXIiLCJ0YXNrIiwiY2xlYXJSZWYiLCJpbnB1dCIsIml0ZW0iLCJpc05hdGl2ZSIsImNvbnRlbnQiLCJkZWNSZWYiLCJyZWN5Y2xlIiwidXJsQXBwZW5kVGltZXN0YW1wIiwidXJsIiwiY2MiLCJhc3NldE1hbmFnZXIiLCJkb3dubG9hZGVyIiwiYXBwZW5kVGltZVN0YW1wIiwidGVzdCIsIkRhdGUiLCJyZXRyeSIsInByb2Nlc3MiLCJ0aW1lcyIsIndhaXQiLCJvbkNvbXBsZXRlIiwiaW5kZXgiLCJlcnIiLCJyZXN1bHQiLCJzZXRUaW1lb3V0IiwiZ2V0RGVwZW5kcyIsImRhdGEiLCJleGNsdWRlIiwiZGVwZW5kcyIsInByZWxvYWQiLCJhc3luY0xvYWRBc3NldHMiLCJjb25maWciLCJpbmZvIiwicGFyc2UiLCJpbmNsdWRlTmF0aXZlIiwiQXNzZXQiLCJfX25hdGl2ZURlcGVuZF9fIiwiX25hdGl2ZUFzc2V0IiwicHJldmVudERlZmVycmVkTG9hZERlcGVuZGVudHMiLCJkZXAiLCJwdXNoIiwiX19hc3luY0xvYWRBc3NldHNfXyIsImJ1bmRsZSIsInByZXZlbnRQcmVsb2FkTmF0aXZlT2JqZWN0IiwibmF0aXZlRGVwIiwiYXNzaWduIiwiZSIsImVycm9yIiwibWVzc2FnZSIsInN0YWNrIiwiY2FjaGUiLCJhc3NldCIsImNhY2hlQXNzZXQiLCJfaXNTY2VuZSIsImFkZCIsInNjZW5lIiwiX3V1aWQiLCJzZXRQcm9wZXJ0aWVzIiwiYXNzZXRzTWFwIiwibWlzc2luZ0Fzc2V0IiwiX19kZXBlbmRzX18iLCJtaXNzaW5nQXNzZXRSZXBvcnRlciIsImRlcGVuZCIsImRlcGVuZEFzc2V0Iiwic3Rhc2hCeU93bmVyIiwib3duZXIiLCJwcm9wIiwic2VyaWFsaXplIiwiYXNBc3NldCIsImFkZFJlZiIsInJlcG9ydEJ5T3duZXIiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwiZ2F0aGVyQXNzZXQiLCJzb3VyY2UiLCJfX291dHB1dEFzQXJyYXlfXyIsIm91dHB1dCIsImZvckVhY2giLCJhcnJheSIsImNvdW50IiwiZXJycyIsInBhcnNlUGFyYW1ldGVycyIsIm9uUHJvZ3Jlc3MiLCJpc0NhbGxiYWNrIiwicGFyc2VMb2FkUmVzQXJncyIsImlzVmFsaWRUeXBlIiwianMiLCJpc0NoaWxkQ2xhc3NPZiIsImNoZWNrQ2lyY2xlUmVmZXJlbmNlIiwibWFwIiwiY2hlY2tlZCIsImdldERlcHMiLCJhc3luY2lmeSIsImNiIiwicDEiLCJwMiIsInJlZnMiLCJBcnJheSIsImlzQXJyYXkiLCJ4IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQU1BLFVBQVUsR0FBR0MsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O2VBQ2dDQSxPQUFPLENB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QUFDakJtSSxRQUFBQSxJQUFJLENBQUNuQixPQUFMLENBQWEsVUFBQXNCLENBQUM7QUFBQSxpQkFBSUEsQ0FBQyxDQUFDN0YsTUFBRixDQUFTLEtBQVQsQ0FBSjtBQUFBLFNBQWQ7QUFDQXVGLFFBQUFBLEVBQUUsQ0FBQ0MsRUFBRCxFQUFLQyxFQUFMLENBQUY7QUFDSCxPQUhhLENBQWQ7QUFJSCxLQVpEO0FBYUg7QUEzVE8sQ0FBWjtBQThUQUssTUFBTSxDQUFDQyxPQUFQLEdBQWlCcEksS0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gQ29weXJpZ2h0IChjKSAyMDE5IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cclxuXHJcbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcclxuICB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXHJcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxyXG4gIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcclxuICB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXHJcbiAgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXHJcblxyXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cclxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXHJcblxyXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXHJcbiBUSEUgU09GVFdBUkUuXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5jb25zdCBkZXBlbmRVdGlsID0gcmVxdWlyZSgnLi9kZXBlbmQtdXRpbCcpO1xyXG5jb25zdCB7IGlzU2NlbmUsIGRlY29kZVV1aWQgfSA9IHJlcXVpcmUoJy4vaGVscGVyJyk7XHJcbmNvbnN0IHsgYXNzZXRzIH0gPSByZXF1aXJlKCcuL3NoYXJlZCcpO1xyXG5jb25zdCB7IGNhbGxJbk5leHRUaWNrIH0gPSByZXF1aXJlKCcuLi9wbGF0Zm9ybS91dGlscycpO1xyXG5jb25zdCBNaXNzaW5nT2JqZWN0UmVwb3J0ZXIgPSBDQ19FRElUT1IgJiYgRWRpdG9yLnJlcXVpcmUoJ2FwcDovL2VkaXRvci9wYWdlL3NjZW5lLXV0aWxzL21pc3Npbmctb2JqZWN0LXJlcG9ydGVyJyk7XHJcbnJlcXVpcmUoJy4uL2Fzc2V0cy9DQ0Fzc2V0Jyk7XHJcblxyXG52YXIgdXRpbHMgPSB7XHJcblxyXG4gICAgcHJvY2Vzc09wdGlvbnMgKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoQ0NfRURJVE9SKSByZXR1cm47XHJcbiAgICAgICAgdmFyIHV1aWRzID0gb3B0aW9ucy51dWlkcztcclxuICAgICAgICB2YXIgcGF0aHMgPSBvcHRpb25zLnBhdGhzO1xyXG4gICAgICAgIHZhciB0eXBlcyA9IG9wdGlvbnMudHlwZXM7XHJcbiAgICAgICAgdmFyIGJ1bmRsZXMgPSBvcHRpb25zLmRlcHM7XHJcbiAgICAgICAgdmFyIHJlYWxFbnRyaWVzID0gb3B0aW9ucy5wYXRocyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLmRlYnVnID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHV1aWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdXVpZHNbaV0gPSBkZWNvZGVVdWlkKHV1aWRzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaWQgaW4gcGF0aHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlbnRyeSA9IHBhdGhzW2lkXTtcclxuICAgICAgICAgICAgICAgIGxldCB0eXBlID0gZW50cnlbMV07XHJcbiAgICAgICAgICAgICAgICBlbnRyeVsxXSA9IHR5cGVzW3R5cGVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgb3V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSB1dWlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB1dWlkID0gdXVpZHNbaV07XHJcbiAgICAgICAgICAgICAgICB1dWlkc1tpXSA9IG91dFt1dWlkXSA9IGRlY29kZVV1aWQodXVpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXVpZHMgPSBvdXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpZCBpbiBwYXRocykge1xyXG4gICAgICAgICAgICBsZXQgZW50cnkgPSBwYXRoc1tpZF07XHJcbiAgICAgICAgICAgIHJlYWxFbnRyaWVzW3V1aWRzW2lkXV0gPSBlbnRyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzY2VuZXMgPSBvcHRpb25zLnNjZW5lcztcclxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHNjZW5lcykge1xyXG4gICAgICAgICAgICBsZXQgdXVpZCA9IHNjZW5lc1tuYW1lXTtcclxuICAgICAgICAgICAgc2NlbmVzW25hbWVdID0gdXVpZHNbdXVpZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcGFja3MgPSBvcHRpb25zLnBhY2tzO1xyXG4gICAgICAgIGZvciAobGV0IHBhY2tJZCBpbiBwYWNrcykge1xyXG4gICAgICAgICAgICBsZXQgcGFja2VkSWRzID0gcGFja3NbcGFja0lkXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYWNrZWRJZHMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgICAgICAgIHBhY2tlZElkc1tqXSA9IHV1aWRzW3BhY2tlZElkc1tqXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB2ZXJzaW9ucyA9IG9wdGlvbnMudmVyc2lvbnM7XHJcbiAgICAgICAgaWYgKHZlcnNpb25zKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGZvbGRlciBpbiB2ZXJzaW9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVudHJpZXMgPSB2ZXJzaW9uc1tmb2xkZXJdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHV1aWQgPSBlbnRyaWVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJpZXNbaV0gPSB1dWlkc1t1dWlkXSB8fCB1dWlkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVkaXJlY3QgPSBvcHRpb25zLnJlZGlyZWN0O1xyXG4gICAgICAgIGlmIChyZWRpcmVjdCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlZGlyZWN0Lmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgICByZWRpcmVjdFtpXSA9IHV1aWRzW3JlZGlyZWN0W2ldXTtcclxuICAgICAgICAgICAgICAgIHJlZGlyZWN0W2kgKyAxXSA9IGJ1bmRsZXNbcmVkaXJlY3RbaSArIDFdXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGNsZWFyICh0YXNrLCBjbGVhclJlZikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGFzay5pbnB1dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0YXNrLmlucHV0W2ldO1xyXG4gICAgICAgICAgICBpZiAoY2xlYXJSZWYpIHtcclxuICAgICAgICAgICAgICAgICFpdGVtLmlzTmF0aXZlICYmIGl0ZW0uY29udGVudCAmJiBpdGVtLmNvbnRlbnQuZGVjUmVmICYmIGl0ZW0uY29udGVudC5kZWNSZWYoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGl0ZW0ucmVjeWNsZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXNrLmlucHV0ID0gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgdXJsQXBwZW5kVGltZXN0YW1wICh1cmwpIHtcclxuICAgICAgICBpZiAoY2MuYXNzZXRNYW5hZ2VyLmRvd25sb2FkZXIuYXBwZW5kVGltZVN0YW1wICYmIHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGlmICgvXFw/Ly50ZXN0KHVybCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJyZfdD0nICsgKG5ldyBEYXRlKCkgLSAwKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICc/X3Q9JyArIChuZXcgRGF0ZSgpIC0gMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9LFxyXG5cclxuICAgIHJldHJ5IChwcm9jZXNzLCB0aW1lcywgd2FpdCwgb25Db21wbGV0ZSwgaW5kZXgpIHtcclxuICAgICAgICBpbmRleCA9IGluZGV4IHx8IDA7XHJcbiAgICAgICAgcHJvY2VzcyhpbmRleCwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgIGlmICghZXJyIHx8IGluZGV4ID4gdGltZXMpIHtcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShlcnIsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB1dGlscy5yZXRyeShwcm9jZXNzLCB0aW1lcywgd2FpdCwgb25Db21wbGV0ZSwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfSwgd2FpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0RGVwZW5kcyAodXVpZCwgZGF0YSwgZXhjbHVkZSwgZGVwZW5kcywgcHJlbG9hZCwgYXN5bmNMb2FkQXNzZXRzLCBjb25maWcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgaW5mbyA9IGRlcGVuZFV0aWwucGFyc2UodXVpZCwgZGF0YSk7XHJcbiAgICAgICAgICAgIHZhciBpbmNsdWRlTmF0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBjYy5Bc3NldCAmJiAoIWRhdGEuX19uYXRpdmVEZXBlbmRfXyB8fCBkYXRhLl9uYXRpdmVBc3NldCkpIGluY2x1ZGVOYXRpdmUgPSBmYWxzZTsgXHJcbiAgICAgICAgICAgIGlmICghcHJlbG9hZCkge1xyXG4gICAgICAgICAgICAgICAgYXN5bmNMb2FkQXNzZXRzID0gIUNDX0VESVRPUiAmJiAoISFkYXRhLmFzeW5jTG9hZEFzc2V0cyB8fCAoYXN5bmNMb2FkQXNzZXRzICYmICFpbmZvLnByZXZlbnREZWZlcnJlZExvYWREZXBlbmRlbnRzKSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGluZm8uZGVwcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGVwID0gaW5mby5kZXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGRlcCBpbiBleGNsdWRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRlW2RlcF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRzLnB1c2goe3V1aWQ6IGRlcCwgX19hc3luY0xvYWRBc3NldHNfXzogYXN5bmNMb2FkQXNzZXRzLCBidW5kbGU6IGNvbmZpZyAmJiBjb25maWcubmFtZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZU5hdGl2ZSAmJiAhYXN5bmNMb2FkQXNzZXRzICYmICFpbmZvLnByZXZlbnRQcmVsb2FkTmF0aXZlT2JqZWN0ICYmIGluZm8ubmF0aXZlRGVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnICYmIChpbmZvLm5hdGl2ZURlcC5idW5kbGUgPSBjb25maWcubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVwZW5kcy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIGluZm8ubmF0aXZlRGVwKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gaW5mby5kZXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZXAgPSBpbmZvLmRlcHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGVwIGluIGV4Y2x1ZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVbZGVwXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZHMucHVzaCh7dXVpZDogZGVwLCBidW5kbGU6IGNvbmZpZyAmJiBjb25maWcubmFtZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlTmF0aXZlICYmIGluZm8ubmF0aXZlRGVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnICYmIChpbmZvLm5hdGl2ZURlcC5idW5kbGUgPSBjb25maWcubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVwZW5kcy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIGluZm8ubmF0aXZlRGVwKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY2MuZXJyb3IoZS5tZXNzYWdlLCBlLnN0YWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWNoZSAoaWQsIGFzc2V0LCBjYWNoZUFzc2V0KSB7XHJcbiAgICAgICAgaWYgKCFhc3NldCkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBfaXNTY2VuZSA9IGlzU2NlbmUoYXNzZXQpO1xyXG4gICAgICAgIGlmICghX2lzU2NlbmUgJiYgY2FjaGVBc3NldCkge1xyXG4gICAgICAgICAgICBhc3NldHMuYWRkKGlkLCBhc3NldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfaXNTY2VuZSkge1xyXG4gICAgICAgICAgICBpZiAoQ0NfRURJVE9SICYmICFhc3NldC5zY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgRWRpdG9yLmVycm9yKCdTb3JyeSwgdGhlIHNjZW5lIGRhdGEgb2YgXCIlc1wiIGlzIGNvcnJ1cHRlZCEnLCBhc3NldC5fdXVpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFByb3BlcnRpZXMgKHV1aWQsIGFzc2V0LCBhc3NldHNNYXApIHtcclxuXHJcbiAgICAgICAgdmFyIG1pc3NpbmdBc3NldCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBkZXBlbmRzID0gYXNzZXQuX19kZXBlbmRzX187XHJcbiAgICAgICAgaWYgKGRlcGVuZHMpIHtcclxuICAgICAgICAgICAgdmFyIG1pc3NpbmdBc3NldFJlcG9ydGVyID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkZXBlbmRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlcGVuZCA9IGRlcGVuZHNbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVwZW5kQXNzZXQgPSBhc3NldHNNYXBbZGVwZW5kLnV1aWQgKyAnQGltcG9ydCddO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkZXBlbmRBc3NldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChDQ19FRElUT1IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIW1pc3NpbmdBc3NldFJlcG9ydGVyICYmIChtaXNzaW5nQXNzZXRSZXBvcnRlciA9IG5ldyBNaXNzaW5nT2JqZWN0UmVwb3J0ZXIoYXNzZXQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWlzc2luZ0Fzc2V0UmVwb3J0ZXIuc3Rhc2hCeU93bmVyKGRlcGVuZC5vd25lciwgZGVwZW5kLnByb3AsIEVkaXRvci5zZXJpYWxpemUuYXNBc3NldChkZXBlbmQudXVpZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZXJyb3IoJ1RoZSBhc3NldCAnICsgZGVwZW5kLnV1aWQgKyAnIGlzIG1pc3NpbmchJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG1pc3NpbmdBc3NldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXBlbmQub3duZXJbZGVwZW5kLnByb3BdID0gZGVwZW5kQXNzZXQuYWRkUmVmKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1pc3NpbmdBc3NldFJlcG9ydGVyICYmIG1pc3NpbmdBc3NldFJlcG9ydGVyLnJlcG9ydEJ5T3duZXIoKTtcclxuICAgICAgICAgICAgYXNzZXQuX19kZXBlbmRzX18gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChhc3NldC5fX25hdGl2ZURlcGVuZF9fKSB7XHJcbiAgICAgICAgICAgIGlmICghYXNzZXQuX25hdGl2ZUFzc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXNzZXRzTWFwW3V1aWQgKyAnQG5hdGl2ZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQuX25hdGl2ZUFzc2V0ID0gYXNzZXRzTWFwW3V1aWQgKyAnQG5hdGl2ZSddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWlzc2luZ0Fzc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ0NfRURJVE9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYHRoZSBuYXRpdmUgYXNzZXQgb2YgJHt1dWlkfSBpcyBtaXNzaW5nIWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhc3NldC5fX25hdGl2ZURlcGVuZF9fID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWlzc2luZ0Fzc2V0O1xyXG4gICAgfSxcclxuXHJcbiAgICBnYXRoZXJBc3NldCAodGFzaykge1xyXG4gICAgICAgIGxldCBzb3VyY2UgPSB0YXNrLnNvdXJjZTtcclxuICAgICAgICBpZiAoIXRhc2sub3B0aW9ucy5fX291dHB1dEFzQXJyYXlfXyAmJiBzb3VyY2UubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRhc2sub3V0cHV0ID0gc291cmNlWzBdLmNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0gdGFzay5vdXRwdXQgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzb3VyY2UubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChzb3VyY2VbaV0uY29udGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGZvckVhY2ggKGFycmF5LCBwcm9jZXNzLCBvbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICB2YXIgZXJycyA9IFtdO1xyXG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IDApIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShlcnJzKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBwcm9jZXNzKGFycmF5W2ldLCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJycy5wdXNoKGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb3VudCArKztcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShlcnJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBwYXJzZVBhcmFtZXRlcnMgKG9wdGlvbnMsIG9uUHJvZ3Jlc3MsIG9uQ29tcGxldGUpIHtcclxuICAgICAgICBpZiAob25Db21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBpc0NhbGxiYWNrID0gdHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbic7XHJcbiAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlID0gb25Qcm9ncmVzcztcclxuICAgICAgICAgICAgICAgIGlmICghaXNDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9uUHJvZ3Jlc3MgPT09IHVuZGVmaW5lZCAmJiBpc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlID0gb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3MgIT09IHVuZGVmaW5lZCAmJiBpc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzID0gb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIHsgb3B0aW9ucywgb25Qcm9ncmVzcywgb25Db21wbGV0ZSB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBwYXJzZUxvYWRSZXNBcmdzICh0eXBlLCBvblByb2dyZXNzLCBvbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgaWYgKG9uQ29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB2YXIgaXNWYWxpZFR5cGUgPSBjYy5qcy5pc0NoaWxkQ2xhc3NPZih0eXBlLCBjYy5Bc3NldCk7XHJcbiAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlID0gb25Qcm9ncmVzcztcclxuICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9uUHJvZ3Jlc3MgPT09IHVuZGVmaW5lZCAmJiAhaXNWYWxpZFR5cGUpIHtcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUgPSB0eXBlO1xyXG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob25Qcm9ncmVzcyAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcyA9IHR5cGU7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyB0eXBlLCBvblByb2dyZXNzLCBvbkNvbXBsZXRlIH07XHJcbiAgICB9LFxyXG5cclxuICAgIGNoZWNrQ2lyY2xlUmVmZXJlbmNlIChvd25lciwgdXVpZCwgbWFwLCBjaGVja2VkKSB7XHJcbiAgICAgICAgaWYgKCFjaGVja2VkKSB7IFxyXG4gICAgICAgICAgICBjaGVja2VkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGl0ZW0gPSBtYXBbdXVpZF07XHJcbiAgICAgICAgaWYgKCFpdGVtIHx8IGNoZWNrZWRbdXVpZF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGVja2VkW3V1aWRdID0gdHJ1ZTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGRlcHMgPSBkZXBlbmRVdGlsLmdldERlcHModXVpZCk7XHJcbiAgICAgICAgaWYgKGRlcHMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkZXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlcCA9IGRlcHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVwID09PSBvd25lciB8fCB1dGlscy5jaGVja0NpcmNsZVJlZmVyZW5jZShvd25lciwgZGVwLCBtYXAsIGNoZWNrZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSxcclxuXHJcbiAgICBhc3luY2lmeSAoY2IpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHAxLCBwMikge1xyXG4gICAgICAgICAgICBpZiAoIWNiKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxldCByZWZzID0gW107XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHAyKSkge1xyXG4gICAgICAgICAgICAgICAgcDIuZm9yRWFjaCh4ID0+IHggaW5zdGFuY2VvZiBjYy5Bc3NldCAmJiByZWZzLnB1c2goeC5hZGRSZWYoKSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcDIgaW5zdGFuY2VvZiBjYy5Bc3NldCAmJiByZWZzLnB1c2gocDIuYWRkUmVmKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbGxJbk5leHRUaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlZnMuZm9yRWFjaCh4ID0+IHguZGVjUmVmKGZhbHNlKSk7XHJcbiAgICAgICAgICAgICAgICBjYihwMSwgcDIpO1xyXG4gICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1dGlsczsiXSwic291cmNlUm9vdCI6Ii8ifQ==