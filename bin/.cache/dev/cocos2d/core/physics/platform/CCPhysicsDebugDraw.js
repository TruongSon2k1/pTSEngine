
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/physics/platform/CCPhysicsDebugDraw.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var PTM_RATIO = require('../CCPhysicsTypes').PTM_RATIO;

var _tmp_vec2 = cc.v2();

var GREEN_COLOR = cc.Color.GREEN;
var RED_COLOR = cc.Color.RED;

function PhysicsDebugDraw(drawer) {
  b2.Draw.call(this);
  this._drawer = drawer;
  this._xf = this._dxf = new b2.Transform();
}

cc.js.extend(PhysicsDebugDraw, b2.Draw);
cc.js.mixin(PhysicsDebugDraw.prototype, {
  _DrawPolygon: function _DrawPolygon(vertices, vertexCount) {
    var drawer = this._drawer;

    for (var i = 0; i < vertexCount; i++) {
      b2.Transform.MulXV(this._xf, vertices[i], _tmp_vec2);
      var x = _tmp_vec2.x * PTM_RATIO,
          y = _tmp_vec2.y * PTM_RATIO;
      if (i === 0) drawer.moveTo(x, y);else {
        drawer.lineTo(x, y);
      }
    }

    drawer.close();
  },
  DrawPolygon: function DrawPolygon(vertices, vertexCount, color) {
    this._applyStrokeColor(color);

    this._DrawPolygon(vertices, vertexCount);

    this._drawer.stroke();
  },
  DrawSolidPolygon: function DrawSolidPolygon(vertices, vertexCount, color) {
    this._applyFillColor(color);

    this._DrawPolygon(vertices, vertexCount);

    this._drawer.fill();

    this._drawer.stroke();
  },
  _DrawCircle: function _DrawCircle(center, radius) {
    var p = this._xf.p;

    this._drawer.circle((center.x + p.x) * PTM_RATIO, (center.y + p.y) * PTM_RATIO, radius * PTM_RATIO);
  },
  DrawCircle: function DrawCircle(center, radius, color) {
    this._applyStrokeColor(color);

    this._DrawCircle(center, radius);

    this._drawer.stroke();
  },
  DrawSolidCircle: function DrawSolidCircle(center, radius, axis, color) {
    this._applyFillColor(color);

    this._DrawCircle(center, radius);

    this._drawer.fill();
  },
  DrawSegment: function DrawSegment(p1, p2, color) {
    var drawer = this._drawer;

    if (p1.x === p2.x && p1.y === p2.y) {
      this._applyFillColor(color);

      this._DrawCircle(p1, 2 / PTM_RATIO);

      drawer.fill();
      return;
    }

    this._applyStrokeColor(color);

    b2.Transform.MulXV(this._xf, p1, _tmp_vec2);
    drawer.moveTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    b2.Transform.MulXV(this._xf, p2, _tmp_vec2);
    drawer.lineTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    drawer.stroke();
  },
  DrawTransform: function DrawTransform(xf) {
    var drawer = this._drawer;
    drawer.strokeColor = RED_COLOR;
    _tmp_vec2.x = _tmp_vec2.y = 0;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.moveTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    _tmp_vec2.x = 1;
    _tmp_vec2.y = 0;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.lineTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    drawer.stroke();
    drawer.strokeColor = GREEN_COLOR;
    _tmp_vec2.x = _tmp_vec2.y = 0;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.moveTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    _tmp_vec2.x = 0;
    _tmp_vec2.y = 1;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.lineTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    drawer.stroke();
  },
  DrawPoint: function DrawPoint(center, radius, color) {},
  _applyStrokeColor: function _applyStrokeColor(color) {
    var strokeColor = this._drawer.strokeColor;
    strokeColor.r = color.r * 255;
    strokeColor.g = color.g * 255;
    strokeColor.b = color.b * 255;
    strokeColor.a = 150;
    this._drawer.strokeColor = strokeColor;
  },
  _applyFillColor: function _applyFillColor(color) {
    var fillColor = this._drawer.fillColor;
    fillColor.r = color.r * 255;
    fillColor.g = color.g * 255;
    fillColor.b = color.b * 255;
    fillColor.a = 150;
    this._drawer.fillColor = fillColor;
  },
  PushTransform: function PushTransform(xf) {
    this._xf = xf;
  },
  PopTransform: function PopTransform() {
    this._xf = this._dxf;
  }
});
module.exports = PhysicsDebugDraw;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXGNvcmVcXHBoeXNpY3NcXHBsYXRmb3JtXFxDQ1BoeXNpY3NEZWJ1Z0RyYXcuanMiXSwibmFtZXMiOlsiUFRNX1JBVElPIiwicmVxdWlyZSIsIl90bXBfdmVjMiIsImNjIiwidjIiLCJHUkVFTl9DT0xPUiIsIkNvbG9yIiwiR1JFRU4iLCJSRURfQ09MT1IiLCJSRUQiLCJQaHlzaWNzRGVidWdEcmF3IiwiZHJhd2VyIiwiYjIiLCJEcmF3IiwiY2FsbCIsIl9kcmF3ZXIiLCJfeGYiLCJfZHhmIiwiVHJhbnNmb3JtIiwianMiLCJleHRlbmQiLCJtaXhpbiIsInByb3RvdHlwZSIsIl9EcmF3UG9seWdvbiIsInZlcnRpY2VzIiwidmVydGV4Q291bnQiLCJpIiwiTXVsWFYiLCJ4IiwieSIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlIiwiRHJhd1BvbHlnb24iLCJjb2xvciIsIl9hcHBseVN0cm9rZUNvbG9yIiwic3Ryb2tlIiwiRHJhd1NvbGlkUG9seWdvbiIsIl9hcHBseUZpbGxDb2xvciIsImZpbGwiLCJfRHJhd0NpcmNsZSIsImNlbnRlciIsInJhZGl1cyIsInAiLCJjaXJjbGUiLCJEcmF3Q2lyY2xlIiwiRHJhd1NvbGlkQ2lyY2xlIiwiYXhpcyIsIkRyYXdTZWdtZW50IiwicDEiLCJwMiIsIkRyYXdUcmFuc2Zvcm0iLCJ4ZiIsInN0cm9rZUNvbG9yIiwiRHJhd1BvaW50IiwiciIsImciLCJiIiwiYSIsImZpbGxDb2xvciIsIlB1c2hUcmFuc2Zvcm0iLCJQb3BUcmFuc2Zvcm0iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsbUJBQUQsQ0FBUCxDQUE2QkQsU0FBL0M7O0FBRUEsSUFBSUUsU0FBUyxHQUFHQyxFQUFFLENBQUNDLEVBQUgsRUFBaEI7O0FBRUEsSUFBSUMsV0FBVyxHQUFHRixFQUFFLENBQUNHLEtBQUgsQ0FBU0MsS0FBM0I7QUFDQSxJQUFJQyxTQUFTLEdBQUdMLEVBQUUsQ0FBQ0csS0FBSCxDQUFTRyxHQUF6Qjs7QUFFQSxTQUFTQyxnQkFBVCxDQUEyQkMsTUFBM0IsRUFBbUM7QUFDL0JDLEVBQUFBLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRQyxJQUFSLENBQWEsSUFBYjtBQUNBLE9BQUtDLE9BQUwsR0FBZUosTUFBZjtBQUNBLE9BQUtLLEdBQUwsR0FBVyxLQUFLQyxJQUFMLEdBQVksSUFBSUwsRUFBRSxDQUFDTSxTQUFQLEVBQXZCO0FBQ0g7O0FBRURmLEVBQUUsQ0FBQ2dCLEVBQUgsQ0FBTUMsTUFBTixDQUFhVixnQkFBYixFQUErQkUsRUFBRSxDQUFDQyxJQUFsQztBQUVBVixFQUFFLENBQUNnQixFQUFILENBQU1FLEtBQU4sQ0FBWVgsZ0JBQWdCLENBQUNZLFNBQTdCLEVBQXdDO0FBQ3BDQyxFQUFBQSxZQURvQyx3QkFDdEJDLFFBRHNCLEVBQ1pDLFdBRFksRUFDQztBQUNqQyxRQUFJZCxNQUFNLEdBQUcsS0FBS0ksT0FBbEI7O0FBRUEsU0FBSyxJQUFJVyxDQUFDLEdBQUMsQ0FBWCxFQUFjQSxDQUFDLEdBQUNELFdBQWhCLEVBQTZCQyxDQUFDLEVBQTlCLEVBQWtDO0FBQzlCZCxNQUFBQSxFQUFFLENBQUNNLFNBQUgsQ0FBYVMsS0FBYixDQUFtQixLQUFLWCxHQUF4QixFQUE2QlEsUUFBUSxDQUFDRSxDQUFELENBQXJDLEVBQTBDeEIsU0FBMUM7QUFDQSxVQUFJMEIsQ0FBQyxHQUFHMUIsU0FBUyxDQUFDMEIsQ0FBVixHQUFjNUIsU0FBdEI7QUFBQSxVQUNJNkIsQ0FBQyxHQUFHM0IsU0FBUyxDQUFDMkIsQ0FBVixHQUFjN0IsU0FEdEI7QUFFQSxVQUFJMEIsQ0FBQyxLQUFLLENBQVYsRUFDSWYsTUFBTSxDQUFDbUIsTUFBUCxDQUFjRixDQUFkLEVBQWlCQyxDQUFqQixFQURKLEtBRUs7QUFDRGxCLFFBQUFBLE1BQU0sQ0FBQ29CLE1BQVAsQ0FBY0gsQ0FBZCxFQUFpQkMsQ0FBakI7QUFDSDtBQUNKOztBQUVEbEIsSUFBQUEsTUFBTSxDQUFDcUIsS0FBUDtBQUNILEdBaEJtQztBQWtCcENDLEVBQUFBLFdBbEJvQyx1QkFrQnZCVCxRQWxCdUIsRUFrQmJDLFdBbEJhLEVBa0JBUyxLQWxCQSxFQWtCTztBQUN2QyxTQUFLQyxpQkFBTCxDQUF1QkQsS0FBdkI7O0FBQ0EsU0FBS1gsWUFBTCxDQUFrQkMsUUFBbEIsRUFBNEJDLFdBQTVCOztBQUNBLFNBQUtWLE9BQUwsQ0FBYXFCLE1BQWI7QUFDSCxHQXRCbUM7QUF3QnBDQyxFQUFBQSxnQkF4Qm9DLDRCQXdCbEJiLFFBeEJrQixFQXdCUkMsV0F4QlEsRUF3QktTLEtBeEJMLEVBd0JZO0FBQzVDLFNBQUtJLGVBQUwsQ0FBcUJKLEtBQXJCOztBQUNBLFNBQUtYLFlBQUwsQ0FBa0JDLFFBQWxCLEVBQTRCQyxXQUE1Qjs7QUFDQSxTQUFLVixPQUFMLENBQWF3QixJQUFiOztBQUNBLFNBQUt4QixPQUFMLENBQWFxQixNQUFiO0FBQ0gsR0E3Qm1DO0FBK0JwQ0ksRUFBQUEsV0EvQm9DLHVCQStCdkJDLE1BL0J1QixFQStCZkMsTUEvQmUsRUErQlA7QUFDekIsUUFBSUMsQ0FBQyxHQUFHLEtBQUszQixHQUFMLENBQVMyQixDQUFqQjs7QUFDQSxTQUFLNUIsT0FBTCxDQUFhNkIsTUFBYixDQUFvQixDQUFDSCxNQUFNLENBQUNiLENBQVAsR0FBV2UsQ0FBQyxDQUFDZixDQUFkLElBQW1CNUIsU0FBdkMsRUFBa0QsQ0FBQ3lDLE1BQU0sQ0FBQ1osQ0FBUCxHQUFXYyxDQUFDLENBQUNkLENBQWQsSUFBbUI3QixTQUFyRSxFQUFnRjBDLE1BQU0sR0FBRzFDLFNBQXpGO0FBQ0gsR0FsQ21DO0FBb0NwQzZDLEVBQUFBLFVBcENvQyxzQkFvQ3hCSixNQXBDd0IsRUFvQ2hCQyxNQXBDZ0IsRUFvQ1JSLEtBcENRLEVBb0NEO0FBQy9CLFNBQUtDLGlCQUFMLENBQXVCRCxLQUF2Qjs7QUFDQSxTQUFLTSxXQUFMLENBQWlCQyxNQUFqQixFQUF5QkMsTUFBekI7O0FBQ0EsU0FBSzNCLE9BQUwsQ0FBYXFCLE1BQWI7QUFDSCxHQXhDbUM7QUEwQ3BDVSxFQUFBQSxlQTFDb0MsMkJBMENuQkwsTUExQ21CLEVBMENYQyxNQTFDVyxFQTBDSEssSUExQ0csRUEwQ0diLEtBMUNILEVBMENVO0FBQzFDLFNBQUtJLGVBQUwsQ0FBcUJKLEtBQXJCOztBQUNBLFNBQUtNLFdBQUwsQ0FBaUJDLE1BQWpCLEVBQXlCQyxNQUF6Qjs7QUFDQSxTQUFLM0IsT0FBTCxDQUFhd0IsSUFBYjtBQUNILEdBOUNtQztBQWdEcENTLEVBQUFBLFdBaERvQyx1QkFnRHZCQyxFQWhEdUIsRUFnRG5CQyxFQWhEbUIsRUFnRGZoQixLQWhEZSxFQWdEUjtBQUN4QixRQUFJdkIsTUFBTSxHQUFHLEtBQUtJLE9BQWxCOztBQUVBLFFBQUlrQyxFQUFFLENBQUNyQixDQUFILEtBQVNzQixFQUFFLENBQUN0QixDQUFaLElBQWlCcUIsRUFBRSxDQUFDcEIsQ0FBSCxLQUFTcUIsRUFBRSxDQUFDckIsQ0FBakMsRUFBb0M7QUFDaEMsV0FBS1MsZUFBTCxDQUFxQkosS0FBckI7O0FBQ0EsV0FBS00sV0FBTCxDQUFpQlMsRUFBakIsRUFBcUIsSUFBRWpELFNBQXZCOztBQUNBVyxNQUFBQSxNQUFNLENBQUM0QixJQUFQO0FBQ0E7QUFDSDs7QUFDRCxTQUFLSixpQkFBTCxDQUF1QkQsS0FBdkI7O0FBRUF0QixJQUFBQSxFQUFFLENBQUNNLFNBQUgsQ0FBYVMsS0FBYixDQUFtQixLQUFLWCxHQUF4QixFQUE2QmlDLEVBQTdCLEVBQWlDL0MsU0FBakM7QUFDQVMsSUFBQUEsTUFBTSxDQUFDbUIsTUFBUCxDQUFjNUIsU0FBUyxDQUFDMEIsQ0FBVixHQUFjNUIsU0FBNUIsRUFBdUNFLFNBQVMsQ0FBQzJCLENBQVYsR0FBYzdCLFNBQXJEO0FBQ0FZLElBQUFBLEVBQUUsQ0FBQ00sU0FBSCxDQUFhUyxLQUFiLENBQW1CLEtBQUtYLEdBQXhCLEVBQTZCa0MsRUFBN0IsRUFBaUNoRCxTQUFqQztBQUNBUyxJQUFBQSxNQUFNLENBQUNvQixNQUFQLENBQWM3QixTQUFTLENBQUMwQixDQUFWLEdBQWM1QixTQUE1QixFQUF1Q0UsU0FBUyxDQUFDMkIsQ0FBVixHQUFjN0IsU0FBckQ7QUFDQVcsSUFBQUEsTUFBTSxDQUFDeUIsTUFBUDtBQUNILEdBaEVtQztBQWtFcENlLEVBQUFBLGFBbEVvQyx5QkFrRXJCQyxFQWxFcUIsRUFrRWpCO0FBQ2YsUUFBSXpDLE1BQU0sR0FBRyxLQUFLSSxPQUFsQjtBQUVBSixJQUFBQSxNQUFNLENBQUMwQyxXQUFQLEdBQXFCN0MsU0FBckI7QUFFQU4sSUFBQUEsU0FBUyxDQUFDMEIsQ0FBVixHQUFjMUIsU0FBUyxDQUFDMkIsQ0FBVixHQUFjLENBQTVCO0FBQ0FqQixJQUFBQSxFQUFFLENBQUNNLFNBQUgsQ0FBYVMsS0FBYixDQUFtQnlCLEVBQW5CLEVBQXVCbEQsU0FBdkIsRUFBa0NBLFNBQWxDO0FBQ0FTLElBQUFBLE1BQU0sQ0FBQ21CLE1BQVAsQ0FBYzVCLFNBQVMsQ0FBQzBCLENBQVYsR0FBYzVCLFNBQTVCLEVBQXVDRSxTQUFTLENBQUMyQixDQUFWLEdBQWM3QixTQUFyRDtBQUVBRSxJQUFBQSxTQUFTLENBQUMwQixDQUFWLEdBQWMsQ0FBZDtBQUFpQjFCLElBQUFBLFNBQVMsQ0FBQzJCLENBQVYsR0FBYyxDQUFkO0FBQ2pCakIsSUFBQUEsRUFBRSxDQUFDTSxTQUFILENBQWFTLEtBQWIsQ0FBbUJ5QixFQUFuQixFQUF1QmxELFNBQXZCLEVBQWtDQSxTQUFsQztBQUNBUyxJQUFBQSxNQUFNLENBQUNvQixNQUFQLENBQWM3QixTQUFTLENBQUMwQixDQUFWLEdBQWM1QixTQUE1QixFQUF1Q0UsU0FBUyxDQUFDMkIsQ0FBVixHQUFjN0IsU0FBckQ7QUFFQVcsSUFBQUEsTUFBTSxDQUFDeUIsTUFBUDtBQUVBekIsSUFBQUEsTUFBTSxDQUFDMEMsV0FBUCxHQUFxQmhELFdBQXJCO0FBRUFILElBQUFBLFNBQVMsQ0FBQzBCLENBQVYsR0FBYzFCLFNBQVMsQ0FBQzJCLENBQVYsR0FBYyxDQUE1QjtBQUNBakIsSUFBQUEsRUFBRSxDQUFDTSxTQUFILENBQWFTLEtBQWIsQ0FBbUJ5QixFQUFuQixFQUF1QmxELFNBQXZCLEVBQWtDQSxTQUFsQztBQUNBUyxJQUFBQSxNQUFNLENBQUNtQixNQUFQLENBQWM1QixTQUFTLENBQUMwQixDQUFWLEdBQWM1QixTQUE1QixFQUF1Q0UsU0FBUyxDQUFDMkIsQ0FBVixHQUFjN0IsU0FBckQ7QUFFQUUsSUFBQUEsU0FBUyxDQUFDMEIsQ0FBVixHQUFjLENBQWQ7QUFBaUIxQixJQUFBQSxTQUFTLENBQUMyQixDQUFWLEdBQWMsQ0FBZDtBQUNqQmpCLElBQUFBLEVBQUUsQ0FBQ00sU0FBSCxDQUFhUyxLQUFiLENBQW1CeUIsRUFBbkIsRUFBdUJsRCxTQUF2QixFQUFrQ0EsU0FBbEM7QUFDQVMsSUFBQUEsTUFBTSxDQUFDb0IsTUFBUCxDQUFjN0IsU0FBUyxDQUFDMEIsQ0FBVixHQUFjNUIsU0FBNUIsRUFBdUNFLFNBQVMsQ0FBQzJCLENBQVYsR0FBYzdCLFNBQXJEO0FBRUFXLElBQUFBLE1BQU0sQ0FBQ3lCLE1BQVA7QUFDSCxHQTVGbUM7QUE4RnBDa0IsRUFBQUEsU0E5Rm9DLHFCQThGekJiLE1BOUZ5QixFQThGakJDLE1BOUZpQixFQThGVFIsS0E5RlMsRUE4RkYsQ0FDakMsQ0EvRm1DO0FBaUdwQ0MsRUFBQUEsaUJBakdvQyw2QkFpR2pCRCxLQWpHaUIsRUFpR1Y7QUFDdEIsUUFBSW1CLFdBQVcsR0FBRyxLQUFLdEMsT0FBTCxDQUFhc0MsV0FBL0I7QUFDQUEsSUFBQUEsV0FBVyxDQUFDRSxDQUFaLEdBQWdCckIsS0FBSyxDQUFDcUIsQ0FBTixHQUFRLEdBQXhCO0FBQ0FGLElBQUFBLFdBQVcsQ0FBQ0csQ0FBWixHQUFnQnRCLEtBQUssQ0FBQ3NCLENBQU4sR0FBUSxHQUF4QjtBQUNBSCxJQUFBQSxXQUFXLENBQUNJLENBQVosR0FBZ0J2QixLQUFLLENBQUN1QixDQUFOLEdBQVEsR0FBeEI7QUFDQUosSUFBQUEsV0FBVyxDQUFDSyxDQUFaLEdBQWdCLEdBQWhCO0FBQ0EsU0FBSzNDLE9BQUwsQ0FBYXNDLFdBQWIsR0FBMkJBLFdBQTNCO0FBQ0gsR0F4R21DO0FBMEdwQ2YsRUFBQUEsZUExR29DLDJCQTBHbkJKLEtBMUdtQixFQTBHWjtBQUNwQixRQUFJeUIsU0FBUyxHQUFHLEtBQUs1QyxPQUFMLENBQWE0QyxTQUE3QjtBQUNBQSxJQUFBQSxTQUFTLENBQUNKLENBQVYsR0FBY3JCLEtBQUssQ0FBQ3FCLENBQU4sR0FBUSxHQUF0QjtBQUNBSSxJQUFBQSxTQUFTLENBQUNILENBQVYsR0FBY3RCLEtBQUssQ0FBQ3NCLENBQU4sR0FBUSxHQUF0QjtBQUNBRyxJQUFBQSxTQUFTLENBQUNGLENBQVYsR0FBY3ZCLEtBQUssQ0FBQ3VCLENBQU4sR0FBUSxHQUF0QjtBQUNBRSxJQUFBQSxTQUFTLENBQUNELENBQVYsR0FBYyxHQUFkO0FBRUEsU0FBSzNDLE9BQUwsQ0FBYTRDLFNBQWIsR0FBeUJBLFNBQXpCO0FBQ0gsR0FsSG1DO0FBb0hwQ0MsRUFBQUEsYUFwSG9DLHlCQW9IckJSLEVBcEhxQixFQW9IakI7QUFDZixTQUFLcEMsR0FBTCxHQUFXb0MsRUFBWDtBQUNILEdBdEhtQztBQXdIcENTLEVBQUFBLFlBeEhvQywwQkF3SHBCO0FBQ1osU0FBSzdDLEdBQUwsR0FBVyxLQUFLQyxJQUFoQjtBQUNIO0FBMUhtQyxDQUF4QztBQTZIQTZDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnJELGdCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cclxuXHJcbiBodHRwczovL3d3dy5jb2Nvcy5jb20vXHJcblxyXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBlbmdpbmUgc291cmNlIGNvZGUgKHRoZSBcIlNvZnR3YXJlXCIpLCBhIGxpbWl0ZWQsXHJcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXHJcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxyXG4gbm90IHVzZSBDb2NvcyBDcmVhdG9yIHNvZnR3YXJlIGZvciBkZXZlbG9waW5nIG90aGVyIHNvZnR3YXJlIG9yIHRvb2xzIHRoYXQnc1xyXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxyXG4gc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXHJcblxyXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cclxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXHJcblxyXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXHJcbiBUSEUgU09GVFdBUkUuXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgUFRNX1JBVElPID0gcmVxdWlyZSgnLi4vQ0NQaHlzaWNzVHlwZXMnKS5QVE1fUkFUSU87XHJcblxyXG5sZXQgX3RtcF92ZWMyID0gY2MudjIoKTtcclxuXHJcbmxldCBHUkVFTl9DT0xPUiA9IGNjLkNvbG9yLkdSRUVOO1xyXG5sZXQgUkVEX0NPTE9SID0gY2MuQ29sb3IuUkVEO1xyXG5cclxuZnVuY3Rpb24gUGh5c2ljc0RlYnVnRHJhdyAoZHJhd2VyKSB7XHJcbiAgICBiMi5EcmF3LmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLl9kcmF3ZXIgPSBkcmF3ZXI7XHJcbiAgICB0aGlzLl94ZiA9IHRoaXMuX2R4ZiA9IG5ldyBiMi5UcmFuc2Zvcm0oKTtcclxufVxyXG5cclxuY2MuanMuZXh0ZW5kKFBoeXNpY3NEZWJ1Z0RyYXcsIGIyLkRyYXcpO1xyXG5cclxuY2MuanMubWl4aW4oUGh5c2ljc0RlYnVnRHJhdy5wcm90b3R5cGUsIHtcclxuICAgIF9EcmF3UG9seWdvbiAodmVydGljZXMsIHZlcnRleENvdW50KSB7XHJcbiAgICAgICAgdmFyIGRyYXdlciA9IHRoaXMuX2RyYXdlcjtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8dmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBiMi5UcmFuc2Zvcm0uTXVsWFYodGhpcy5feGYsIHZlcnRpY2VzW2ldLCBfdG1wX3ZlYzIpO1xyXG4gICAgICAgICAgICBsZXQgeCA9IF90bXBfdmVjMi54ICogUFRNX1JBVElPLFxyXG4gICAgICAgICAgICAgICAgeSA9IF90bXBfdmVjMi55ICogUFRNX1JBVElPO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMClcclxuICAgICAgICAgICAgICAgIGRyYXdlci5tb3ZlVG8oeCwgeSk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZHJhd2VyLmxpbmVUbyh4LCB5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZHJhd2VyLmNsb3NlKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIERyYXdQb2x5Z29uICh2ZXJ0aWNlcywgdmVydGV4Q291bnQsIGNvbG9yKSB7XHJcbiAgICAgICAgdGhpcy5fYXBwbHlTdHJva2VDb2xvcihjb2xvcik7XHJcbiAgICAgICAgdGhpcy5fRHJhd1BvbHlnb24odmVydGljZXMsIHZlcnRleENvdW50KTtcclxuICAgICAgICB0aGlzLl9kcmF3ZXIuc3Ryb2tlKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIERyYXdTb2xpZFBvbHlnb24gKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCwgY29sb3IpIHtcclxuICAgICAgICB0aGlzLl9hcHBseUZpbGxDb2xvcihjb2xvcik7XHJcbiAgICAgICAgdGhpcy5fRHJhd1BvbHlnb24odmVydGljZXMsIHZlcnRleENvdW50KTtcclxuICAgICAgICB0aGlzLl9kcmF3ZXIuZmlsbCgpO1xyXG4gICAgICAgIHRoaXMuX2RyYXdlci5zdHJva2UoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX0RyYXdDaXJjbGUgKGNlbnRlciwgcmFkaXVzKSB7XHJcbiAgICAgICAgbGV0IHAgPSB0aGlzLl94Zi5wO1xyXG4gICAgICAgIHRoaXMuX2RyYXdlci5jaXJjbGUoKGNlbnRlci54ICsgcC54KSAqIFBUTV9SQVRJTywgKGNlbnRlci55ICsgcC55KSAqIFBUTV9SQVRJTywgcmFkaXVzICogUFRNX1JBVElPKTtcclxuICAgIH0sXHJcblxyXG4gICAgRHJhd0NpcmNsZSAoY2VudGVyLCByYWRpdXMsIGNvbG9yKSB7XHJcbiAgICAgICAgdGhpcy5fYXBwbHlTdHJva2VDb2xvcihjb2xvcik7XHJcbiAgICAgICAgdGhpcy5fRHJhd0NpcmNsZShjZW50ZXIsIHJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy5fZHJhd2VyLnN0cm9rZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBEcmF3U29saWRDaXJjbGUgKGNlbnRlciwgcmFkaXVzLCBheGlzLCBjb2xvcikge1xyXG4gICAgICAgIHRoaXMuX2FwcGx5RmlsbENvbG9yKGNvbG9yKTtcclxuICAgICAgICB0aGlzLl9EcmF3Q2lyY2xlKGNlbnRlciwgcmFkaXVzKTtcclxuICAgICAgICB0aGlzLl9kcmF3ZXIuZmlsbCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBEcmF3U2VnbWVudCAocDEsIHAyLCBjb2xvcikge1xyXG4gICAgICAgIHZhciBkcmF3ZXIgPSB0aGlzLl9kcmF3ZXI7XHJcblxyXG4gICAgICAgIGlmIChwMS54ID09PSBwMi54ICYmIHAxLnkgPT09IHAyLnkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXBwbHlGaWxsQ29sb3IoY29sb3IpO1xyXG4gICAgICAgICAgICB0aGlzLl9EcmF3Q2lyY2xlKHAxLCAyL1BUTV9SQVRJTyk7XHJcbiAgICAgICAgICAgIGRyYXdlci5maWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYXBwbHlTdHJva2VDb2xvcihjb2xvcik7XHJcblxyXG4gICAgICAgIGIyLlRyYW5zZm9ybS5NdWxYVih0aGlzLl94ZiwgcDEsIF90bXBfdmVjMik7XHJcbiAgICAgICAgZHJhd2VyLm1vdmVUbyhfdG1wX3ZlYzIueCAqIFBUTV9SQVRJTywgX3RtcF92ZWMyLnkgKiBQVE1fUkFUSU8pO1xyXG4gICAgICAgIGIyLlRyYW5zZm9ybS5NdWxYVih0aGlzLl94ZiwgcDIsIF90bXBfdmVjMik7XHJcbiAgICAgICAgZHJhd2VyLmxpbmVUbyhfdG1wX3ZlYzIueCAqIFBUTV9SQVRJTywgX3RtcF92ZWMyLnkgKiBQVE1fUkFUSU8pO1xyXG4gICAgICAgIGRyYXdlci5zdHJva2UoKTsgICBcclxuICAgIH0sXHJcblxyXG4gICAgRHJhd1RyYW5zZm9ybSAoeGYpIHtcclxuICAgICAgICB2YXIgZHJhd2VyID0gdGhpcy5fZHJhd2VyO1xyXG5cclxuICAgICAgICBkcmF3ZXIuc3Ryb2tlQ29sb3IgPSBSRURfQ09MT1I7XHJcblxyXG4gICAgICAgIF90bXBfdmVjMi54ID0gX3RtcF92ZWMyLnkgPSAwO1xyXG4gICAgICAgIGIyLlRyYW5zZm9ybS5NdWxYVih4ZiwgX3RtcF92ZWMyLCBfdG1wX3ZlYzIpO1xyXG4gICAgICAgIGRyYXdlci5tb3ZlVG8oX3RtcF92ZWMyLnggKiBQVE1fUkFUSU8sIF90bXBfdmVjMi55ICogUFRNX1JBVElPKTtcclxuICAgICAgICBcclxuICAgICAgICBfdG1wX3ZlYzIueCA9IDE7IF90bXBfdmVjMi55ID0gMDtcclxuICAgICAgICBiMi5UcmFuc2Zvcm0uTXVsWFYoeGYsIF90bXBfdmVjMiwgX3RtcF92ZWMyKTtcclxuICAgICAgICBkcmF3ZXIubGluZVRvKF90bXBfdmVjMi54ICogUFRNX1JBVElPLCBfdG1wX3ZlYzIueSAqIFBUTV9SQVRJTyk7XHJcblxyXG4gICAgICAgIGRyYXdlci5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgZHJhd2VyLnN0cm9rZUNvbG9yID0gR1JFRU5fQ09MT1I7XHJcblxyXG4gICAgICAgIF90bXBfdmVjMi54ID0gX3RtcF92ZWMyLnkgPSAwO1xyXG4gICAgICAgIGIyLlRyYW5zZm9ybS5NdWxYVih4ZiwgX3RtcF92ZWMyLCBfdG1wX3ZlYzIpO1xyXG4gICAgICAgIGRyYXdlci5tb3ZlVG8oX3RtcF92ZWMyLnggKiBQVE1fUkFUSU8sIF90bXBfdmVjMi55ICogUFRNX1JBVElPKTtcclxuICAgICAgICBcclxuICAgICAgICBfdG1wX3ZlYzIueCA9IDA7IF90bXBfdmVjMi55ID0gMTtcclxuICAgICAgICBiMi5UcmFuc2Zvcm0uTXVsWFYoeGYsIF90bXBfdmVjMiwgX3RtcF92ZWMyKTtcclxuICAgICAgICBkcmF3ZXIubGluZVRvKF90bXBfdmVjMi54ICogUFRNX1JBVElPLCBfdG1wX3ZlYzIueSAqIFBUTV9SQVRJTyk7XHJcblxyXG4gICAgICAgIGRyYXdlci5zdHJva2UoKTtcclxuICAgIH0sXHJcblxyXG4gICAgRHJhd1BvaW50IChjZW50ZXIsIHJhZGl1cywgY29sb3IpIHtcclxuICAgIH0sXHJcblxyXG4gICAgX2FwcGx5U3Ryb2tlQ29sb3IgKGNvbG9yKSB7XHJcbiAgICAgICAgbGV0IHN0cm9rZUNvbG9yID0gdGhpcy5fZHJhd2VyLnN0cm9rZUNvbG9yO1xyXG4gICAgICAgIHN0cm9rZUNvbG9yLnIgPSBjb2xvci5yKjI1NTtcclxuICAgICAgICBzdHJva2VDb2xvci5nID0gY29sb3IuZyoyNTU7XHJcbiAgICAgICAgc3Ryb2tlQ29sb3IuYiA9IGNvbG9yLmIqMjU1O1xyXG4gICAgICAgIHN0cm9rZUNvbG9yLmEgPSAxNTA7XHJcbiAgICAgICAgdGhpcy5fZHJhd2VyLnN0cm9rZUNvbG9yID0gc3Ryb2tlQ29sb3I7XHJcbiAgICB9LFxyXG5cclxuICAgIF9hcHBseUZpbGxDb2xvciAoY29sb3IpIHtcclxuICAgICAgICBsZXQgZmlsbENvbG9yID0gdGhpcy5fZHJhd2VyLmZpbGxDb2xvcjtcclxuICAgICAgICBmaWxsQ29sb3IuciA9IGNvbG9yLnIqMjU1O1xyXG4gICAgICAgIGZpbGxDb2xvci5nID0gY29sb3IuZyoyNTU7XHJcbiAgICAgICAgZmlsbENvbG9yLmIgPSBjb2xvci5iKjI1NTtcclxuICAgICAgICBmaWxsQ29sb3IuYSA9IDE1MDtcclxuXHJcbiAgICAgICAgdGhpcy5fZHJhd2VyLmZpbGxDb2xvciA9IGZpbGxDb2xvcjtcclxuICAgIH0sXHJcblxyXG4gICAgUHVzaFRyYW5zZm9ybSAoeGYpIHtcclxuICAgICAgICB0aGlzLl94ZiA9IHhmO1xyXG4gICAgfSxcclxuXHJcbiAgICBQb3BUcmFuc2Zvcm0gKCkge1xyXG4gICAgICAgIHRoaXMuX3hmID0gdGhpcy5fZHhmO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGh5c2ljc0RlYnVnRHJhdztcclxuIl0sInNvdXJjZVJvb3QiOiIvIn0=