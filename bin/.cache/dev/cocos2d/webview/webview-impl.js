
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/webview/webview-impl.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var utils = require('../core/platform/utils');

var sys = require('../core/platform/CCSys');

var _mat4_temp = cc.mat4();

var WebViewImpl = cc.Class({
  name: "WebViewImpl",
  ctor: function ctor() {
    // this.setContentSize(cc.size(300, 200));
    this._EventList = {};
    this._visible = false;
    this._parent = null;
    this._div = null;
    this._iframe = null;
    this._listener = null;
    this._forceUpdate = false; // update matrix cache

    this._m00 = 0;
    this._m01 = 0;
    this._m04 = 0;
    this._m05 = 0;
    this._m12 = 0;
    this._m13 = 0;
    this._w = 0;
    this._h = 0; //

    this.__eventListeners = {};
  },
  _updateVisibility: function _updateVisibility() {
    if (!this._div) return;
    var div = this._div;

    if (this._visible) {
      div.style.visibility = 'visible';
    } else {
      div.style.visibility = 'hidden';
    }
  },
  _updateSize: function _updateSize(w, h) {
    var div = this._div;

    if (div) {
      div.style.width = w + "px";
      div.style.height = h + "px";
    }
  },
  _initEvent: function _initEvent() {
    var iframe = this._iframe;

    if (iframe) {
      var cbs = this.__eventListeners,
          self = this;

      cbs.load = function () {
        self._forceUpdate = true;

        self._dispatchEvent(WebViewImpl.EventType.LOADED);
      };

      cbs.error = function () {
        self._dispatchEvent(WebViewImpl.EventType.ERROR);
      };

      iframe.addEventListener("load", cbs.load);
      iframe.addEventListener("error", cbs.error);
    }
  },
  _initStyle: function _initStyle() {
    if (!this._div) return;
    var div = this._div;
    div.style.position = "absolute";
    div.style.bottom = "0px";
    div.style.left = "0px";
  },
  _setOpacity: function _setOpacity(opacity) {
    var iframe = this._iframe;

    if (iframe && iframe.style) {
      iframe.style.opacity = opacity / 255;
    }
  },
  _createDom: function _createDom(w, h) {
    if (WebViewImpl._polyfill.enableDiv) {
      this._div = document.createElement("div");
      this._div.style["-webkit-overflow"] = "auto";
      this._div.style["-webkit-overflow-scrolling"] = "touch";
      this._iframe = document.createElement("iframe");

      this._div.appendChild(this._iframe);

      this._iframe.style.width = "100%";
      this._iframe.style.height = "100%";
    } else {
      this._div = this._iframe = document.createElement("iframe");
    }

    if (WebViewImpl._polyfill.enableBG) this._div.style["background"] = "#FFF";
    this._div.style.height = h + "px";
    this._div.style.width = w + "px";
    this._div.style.overflow = "scroll";
    this._iframe.style.border = "none";
    cc.game.container.appendChild(this._div);

    this._updateVisibility();
  },
  _createNativeControl: function _createNativeControl(w, h) {
    this._createDom(w, h);

    this._initStyle();

    this._initEvent();
  },
  createDomElementIfNeeded: CC_EDITOR ? function (w, h) {
    this._div = document.createElement('div');
    this._div.style.background = 'rgba(255, 255, 255, 0.8)';
    this._div.style.color = 'rgb(51, 51, 51)';
    this._div.style.height = w + 'px';
    this._div.style.width = h + 'px';
    this._div.style.position = 'absolute';
    this._div.style.bottom = '0px';
    this._div.style.left = '0px';
    this._div.style['word-wrap'] = 'break-word';
    cc.game.container.appendChild(this._div);
  } : function (w, h) {
    if (!this._div) {
      this._createNativeControl(w, h);
    } else {
      this._updateSize(w, h);
    }
  },
  removeDom: function removeDom() {
    var div = this._div;

    if (div) {
      var hasChild = utils.contains(cc.game.container, div);
      if (hasChild) cc.game.container.removeChild(div);
      this._div = null;
    }

    var iframe = this._iframe;

    if (iframe) {
      var cbs = this.__eventListeners;
      iframe.removeEventListener("load", cbs.load);
      iframe.removeEventListener("error", cbs.error);
      cbs.load = null;
      cbs.error = null;
      this._iframe = null;
    }
  },
  setOnJSCallback: function setOnJSCallback(callback) {},
  setJavascriptInterfaceScheme: function setJavascriptInterfaceScheme(scheme) {},
  // private method
  loadData: function loadData(data, MIMEType, encoding, baseURL) {},
  loadHTMLString: function loadHTMLString(string, baseURL) {},

  /**
   * Load an URL
   * @param {String} url
   */
  loadURL: CC_EDITOR ? function (url) {
    this._div.innerText = url;
  } : function (url) {
    var iframe = this._iframe;

    if (iframe) {
      iframe.src = url;
      var self = this;

      var cb = function cb() {
        self._loaded = true;

        self._updateVisibility();

        iframe.removeEventListener("load", cb);
      };

      iframe.addEventListener("load", cb);

      this._dispatchEvent(WebViewImpl.EventType.LOADING);
    }
  },

  /**
   * Stop loading
   */
  stopLoading: function stopLoading() {
    cc.logID(7800);
  },

  /**
   * Reload the WebView
   */
  reload: function reload() {
    var iframe = this._iframe;

    if (iframe) {
      var win = iframe.contentWindow;
      if (win && win.location) win.location.reload();
    }
  },

  /**
   * Determine whether to go back
   */
  canGoBack: function canGoBack() {
    cc.logID(7801);
    return true;
  },

  /**
   * Determine whether to go forward
   */
  canGoForward: function canGoForward() {
    cc.logID(7802);
    return true;
  },

  /**
   * go back
   */
  goBack: function goBack() {
    try {
      if (WebViewImpl._polyfill.closeHistory) return cc.logID(7803);
      var iframe = this._iframe;

      if (iframe) {
        var win = iframe.contentWindow;
        if (win && win.location) win.history.back.call(win);
      }
    } catch (err) {
      cc.log(err);
    }
  },

  /**
   * go forward
   */
  goForward: function goForward() {
    try {
      if (WebViewImpl._polyfill.closeHistory) return cc.logID(7804);
      var iframe = this._iframe;

      if (iframe) {
        var win = iframe.contentWindow;
        if (win && win.location) win.history.forward.call(win);
      }
    } catch (err) {
      cc.log(err);
    }
  },

  /**
   * In the webview execution within a period of js string
   * @param {String} str
   */
  evaluateJS: function evaluateJS(str) {
    var iframe = this._iframe;

    if (iframe) {
      var win = iframe.contentWindow;

      try {
        win.eval(str);

        this._dispatchEvent(WebViewImpl.EventType.JS_EVALUATED);
      } catch (err) {
        console.error(err);
      }
    }
  },

  /**
   * Limited scale
   */
  setScalesPageToFit: function setScalesPageToFit() {
    cc.logID(7805);
  },

  /**
   * The binding event
   * @param {WebViewImpl.EventType} event
   * @param {Function} callback
   */
  setEventListener: function setEventListener(event, callback) {
    this._EventList[event] = callback;
  },

  /**
   * Delete events
   * @param {WebViewImpl.EventType} event
   */
  removeEventListener: function removeEventListener(event) {
    this._EventList[event] = null;
  },
  _dispatchEvent: function _dispatchEvent(event) {
    var callback = this._EventList[event];
    if (callback) callback.call(this, this, this._iframe.src);
  },
  _createRenderCmd: function _createRenderCmd() {
    return new WebViewImpl.RenderCmd(this);
  },
  destroy: function destroy() {
    this.removeDom();
  },
  setVisible: function setVisible(visible) {
    if (this._visible !== visible) {
      this._visible = !!visible;

      this._updateVisibility();
    }
  },
  updateMatrix: function updateMatrix(node) {
    if (!this._div || !this._visible) return;
    node.getWorldMatrix(_mat4_temp);

    var renderCamera = cc.Camera._findRendererCamera(node);

    if (renderCamera) {
      renderCamera.worldMatrixToScreen(_mat4_temp, _mat4_temp, cc.game.canvas.width, cc.game.canvas.height);
    }

    var _mat4_tempm = _mat4_temp.m;

    if (!this._forceUpdate && this._m00 === _mat4_tempm[0] && this._m01 === _mat4_tempm[1] && this._m04 === _mat4_tempm[4] && this._m05 === _mat4_tempm[5] && this._m12 === _mat4_tempm[12] && this._m13 === _mat4_tempm[13] && this._w === node._contentSize.width && this._h === node._contentSize.height) {
      return;
    } // update matrix cache


    this._m00 = _mat4_tempm[0];
    this._m01 = _mat4_tempm[1];
    this._m04 = _mat4_tempm[4];
    this._m05 = _mat4_tempm[5];
    this._m12 = _mat4_tempm[12];
    this._m13 = _mat4_tempm[13];
    this._w = node._contentSize.width;
    this._h = node._contentSize.height;
    var dpr = cc.view._devicePixelRatio;
    var scaleX = 1 / dpr;
    var scaleY = 1 / dpr;
    var container = cc.game.container;
    var a = _mat4_tempm[0] * scaleX,
        b = _mat4_tempm[1],
        c = _mat4_tempm[4],
        d = _mat4_tempm[5] * scaleY;
    var offsetX = container && container.style.paddingLeft ? parseInt(container.style.paddingLeft) : 0;
    var offsetY = container && container.style.paddingBottom ? parseInt(container.style.paddingBottom) : 0;

    this._updateSize(this._w, this._h);

    var w = this._w * scaleX;
    var h = this._h * scaleY;
    var appx = w * _mat4_tempm[0] * node._anchorPoint.x;
    var appy = h * _mat4_tempm[5] * node._anchorPoint.y;
    var tx = _mat4_tempm[12] * scaleX - appx + offsetX,
        ty = _mat4_tempm[13] * scaleY - appy + offsetY;
    var matrix = "matrix(" + a + "," + -b + "," + -c + "," + d + "," + tx + "," + -ty + ")";
    this._div.style['transform'] = matrix;
    this._div.style['-webkit-transform'] = matrix;
    this._div.style['transform-origin'] = '0px 100% 0px';
    this._div.style['-webkit-transform-origin'] = '0px 100% 0px'; // chagned iframe opacity

    this._setOpacity(node.opacity);

    this._forceUpdate = false;
  }
});
WebViewImpl.EventType = {
  LOADING: 0,
  LOADED: 1,
  ERROR: 2,
  JS_EVALUATED: 3
};
var polyfill = WebViewImpl._polyfill = {
  devicePixelRatio: false,
  enableDiv: false
};
if (sys.os === sys.OS_IOS) polyfill.enableDiv = true;

if (sys.isMobile) {
  if (sys.browserType === sys.BROWSER_TYPE_FIREFOX) {
    polyfill.enableBG = true;
  }
} else {
  if (sys.browserType === sys.BROWSER_TYPE_IE) {
    polyfill.closeHistory = true;
  }
}

module.exports = WebViewImpl;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXZcXGNvY29zMmRcXHdlYnZpZXdcXHdlYnZpZXctaW1wbC5qcyJdLCJuYW1lcyI6WyJ1dGlscyIsInJlcXVpcmUiLCJzeXMiLCJfbWF0NF90ZW1wIiwiY2MiLCJtYXQ0IiwiV2ViVmlld0ltcGwiLCJDbGFzcyIsIm5hbWUiLCJjdG9yIiwiX0V2ZW50TGlzdCIsIl92aXNpYmxlIiwiX3BhcmVudCIsIl9kaXYiLCJfaWZyYW1lIiwiX2xpc3RlbmVyIiwiX2ZvcmNlVXBkYXRlIiwiX20wMCIsIl9tMDEiLCJfbTA0IiwiX20wNSIsIl9tMTIiLCJfbTEzIiwiX3ciLCJfaCIsIl9fZXZlbnRMaXN0ZW5lcnMiLCJfdXBkYXRlVmlzaWJpbGl0eSIsImRpdiIsInN0eWxlIiwidmlzaWJpbGl0eSIsIl91cGRhdGVTaXplIiwidyIsImgiLCJ3aWR0aCIsImhlaWdodCIsIl9pbml0RXZlbnQiLCJpZnJhbWUiLCJjYnMiLCJzZWxmIiwibG9hZCIsIl9kaXNwYXRjaEV2ZW50IiwiRXZlbnRUeXBlIiwiTE9BREVEIiwiZXJyb3IiLCJFUlJPUiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaW5pdFN0eWxlIiwicG9zaXRpb24iLCJib3R0b20iLCJsZWZ0IiwiX3NldE9wYWNpdHkiLCJvcGFjaXR5IiwiX2NyZWF0ZURvbSIsIl9wb2x5ZmlsbCIsImVuYWJsZURpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZW5hYmxlQkciLCJvdmVyZmxvdyIsImJvcmRlciIsImdhbWUiLCJjb250YWluZXIiLCJfY3JlYXRlTmF0aXZlQ29udHJvbCIsImNyZWF0ZURvbUVsZW1lbnRJZk5lZWRlZCIsIkNDX0VESVRPUiIsImJhY2tncm91bmQiLCJjb2xvciIsInJlbW92ZURvbSIsImhhc0NoaWxkIiwiY29udGFpbnMiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRPbkpTQ2FsbGJhY2siLCJjYWxsYmFjayIsInNldEphdmFzY3JpcHRJbnRlcmZhY2VTY2hlbWUiLCJzY2hlbWUiLCJsb2FkRGF0YSIsImRhdGEiLCJNSU1FVHlwZSIsImVuY29kaW5nIiwiYmFzZVVSTCIsImxvYWRIVE1MU3RyaW5nIiwic3RyaW5nIiwibG9hZFVSTCIsInVybCIsImlubmVyVGV4dCIsInNyYyIsImNiIiwiX2xvYWRlZCIsIkxPQURJTkciLCJzdG9wTG9hZGluZyIsImxvZ0lEIiwicmVsb2FkIiwid2luIiwiY29udGVudFdpbmRvdyIsImxvY2F0aW9uIiwiY2FuR29CYWNrIiwiY2FuR29Gb3J3YXJkIiwiZ29CYWNrIiwiY2xvc2VIaXN0b3J5IiwiaGlzdG9yeSIsImJhY2siLCJjYWxsIiwiZXJyIiwibG9nIiwiZ29Gb3J3YXJkIiwiZm9yd2FyZCIsImV2YWx1YXRlSlMiLCJzdHIiLCJldmFsIiwiSlNfRVZBTFVBVEVEIiwiY29uc29sZSIsInNldFNjYWxlc1BhZ2VUb0ZpdCIsInNldEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIl9jcmVhdGVSZW5kZXJDbWQiLCJSZW5kZXJDbWQiLCJkZXN0cm95Iiwic2V0VmlzaWJsZSIsInZpc2libGUiLCJ1cGRhdGVNYXRyaXgiLCJub2RlIiwiZ2V0V29ybGRNYXRyaXgiLCJyZW5kZXJDYW1lcmEiLCJDYW1lcmEiLCJfZmluZFJlbmRlcmVyQ2FtZXJhIiwid29ybGRNYXRyaXhUb1NjcmVlbiIsImNhbnZhcyIsIl9tYXQ0X3RlbXBtIiwibSIsIl9jb250ZW50U2l6ZSIsImRwciIsInZpZXciLCJfZGV2aWNlUGl4ZWxSYXRpbyIsInNjYWxlWCIsInNjYWxlWSIsImEiLCJiIiwiYyIsImQiLCJvZmZzZXRYIiwicGFkZGluZ0xlZnQiLCJwYXJzZUludCIsIm9mZnNldFkiLCJwYWRkaW5nQm90dG9tIiwiYXBweCIsIl9hbmNob3JQb2ludCIsIngiLCJhcHB5IiwieSIsInR4IiwidHkiLCJtYXRyaXgiLCJwb2x5ZmlsbCIsImRldmljZVBpeGVsUmF0aW8iLCJvcyIsIk9TX0lPUyIsImlzTW9iaWxlIiwiYnJvd3NlclR5cGUiLCJCUk9XU0VSX1RZUEVfRklSRUZPWCIsIkJST1dTRVJfVFlQRV9JRSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxJQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyx3QkFBRCxDQUFyQjs7QUFDQSxJQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBQyx3QkFBRCxDQUFuQjs7QUFFQSxJQUFJRSxVQUFVLEdBQUdDLEVBQUUsQ0FBQ0MsSUFBSCxFQUFqQjs7QUFFQSxJQUFJQyxXQUFXLEdBQUdGLEVBQUUsQ0FBQ0csS0FBSCxDQUFTO0FBQ3ZCQyxFQUFBQSxJQUFJLEVBQUUsYUFEaUI7QUFHdkJDLEVBQUFBLElBSHVCLGtCQUdmO0FBQ0o7QUFDQSxTQUFLQyxVQUFMLEdBQWtCLEVBQWxCO0FBRUEsU0FBS0MsUUFBTCxHQUFnQixLQUFoQjtBQUNBLFNBQUtDLE9BQUwsR0FBZSxJQUFmO0FBQ0EsU0FBS0MsSUFBTCxHQUFZLElBQVo7QUFDQSxTQUFLQyxPQUFMLEdBQWUsSUFBZjtBQUNBLFNBQUtDLFNBQUwsR0FBaUIsSUFBakI7QUFDQSxTQUFLQyxZQUFMLEdBQW9CLEtBQXBCLENBVEksQ0FXSjs7QUFDQSxTQUFLQyxJQUFMLEdBQVksQ0FBWjtBQUNBLFNBQUtDLElBQUwsR0FBWSxDQUFaO0FBQ0EsU0FBS0MsSUFBTCxHQUFZLENBQVo7QUFDQSxTQUFLQyxJQUFMLEdBQVksQ0FBWjtBQUNBLFNBQUtDLElBQUwsR0FBWSxDQUFaO0FBQ0EsU0FBS0MsSUFBTCxHQUFZLENBQVo7QUFDQSxTQUFLQyxFQUFMLEdBQVUsQ0FBVjtBQUNBLFNBQUtDLEVBQUwsR0FBVSxDQUFWLENBbkJJLENBb0JKOztBQUNBLFNBQUtDLGdCQUFMLEdBQXdCLEVBQXhCO0FB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QUFDbkNzRyxFQUFBQSxnQkFBZ0IsRUFBRSxLQURpQjtBQUVuQ3JHLEVBQUFBLFNBQVMsRUFBRTtBQUZ3QixDQUF2QztBQUtBLElBQUlwRCxHQUFHLENBQUMwSixFQUFKLEtBQVcxSixHQUFHLENBQUMySixNQUFuQixFQUNJSCxRQUFRLENBQUNwRyxTQUFULEdBQXFCLElBQXJCOztBQUVKLElBQUlwRCxHQUFHLENBQUM0SixRQUFSLEVBQWtCO0FBQ2QsTUFBSTVKLEdBQUcsQ0FBQzZKLFdBQUosS0FBb0I3SixHQUFHLENBQUM4SixvQkFBNUIsRUFBa0Q7QUFDOUNOLElBQUFBLFFBQVEsQ0FBQ2hHLFFBQVQsR0FBb0IsSUFBcEI7QUFDSDtBQUNKLENBSkQsTUFLSztBQUNELE1BQUl4RCxHQUFHLENBQUM2SixXQUFKLEtBQW9CN0osR0FBRyxDQUFDK0osZUFBNUIsRUFBNkM7QUFDekNQLElBQUFBLFFBQVEsQ0FBQ3RELFlBQVQsR0FBd0IsSUFBeEI7QUFDSDtBQUNKOztBQUVEOEQsTUFBTSxDQUFDQyxPQUFQLEdBQWlCN0osV0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gQ29weXJpZ2h0IChjKSAyMDE3LTIwMTggWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXHJcblxyXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxyXG4gd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxyXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcclxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcclxuIHVzZWQgZm9yIGRldmVsb3BpbmcgZ2FtZXMuIFlvdSBhcmUgbm90IGdyYW50ZWQgdG8gcHVibGlzaCwgZGlzdHJpYnV0ZSxcclxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxyXG5cclxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXHJcbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnLi4vY29yZS9wbGF0Zm9ybS91dGlscycpO1xyXG5jb25zdCBzeXMgPSByZXF1aXJlKCcuLi9jb3JlL3BsYXRmb3JtL0NDU3lzJyk7XHJcblxyXG5sZXQgX21hdDRfdGVtcCA9IGNjLm1hdDQoKTtcclxuXHJcbmxldCBXZWJWaWV3SW1wbCA9IGNjLkNsYXNzKHtcclxuICAgIG5hbWU6IFwiV2ViVmlld0ltcGxcIixcclxuXHJcbiAgICBjdG9yICgpIHtcclxuICAgICAgICAvLyB0aGlzLnNldENvbnRlbnRTaXplKGNjLnNpemUoMzAwLCAyMDApKTtcclxuICAgICAgICB0aGlzLl9FdmVudExpc3QgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5fdmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZGl2ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9pZnJhbWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9mb3JjZVVwZGF0ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUgbWF0cml4IGNhY2hlXHJcbiAgICAgICAgdGhpcy5fbTAwID0gMDtcclxuICAgICAgICB0aGlzLl9tMDEgPSAwO1xyXG4gICAgICAgIHRoaXMuX20wNCA9IDA7XHJcbiAgICAgICAgdGhpcy5fbTA1ID0gMDtcclxuICAgICAgICB0aGlzLl9tMTIgPSAwO1xyXG4gICAgICAgIHRoaXMuX20xMyA9IDA7XHJcbiAgICAgICAgdGhpcy5fdyA9IDA7XHJcbiAgICAgICAgdGhpcy5faCA9IDA7XHJcbiAgICAgICAgLy9cclxuICAgICAgICB0aGlzLl9fZXZlbnRMaXN0ZW5lcnMgPSB7fTtcclxuICAgIH0sXHJcblxyXG4gICAgX3VwZGF0ZVZpc2liaWxpdHkgKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZGl2KSByZXR1cm47XHJcbiAgICAgICAgbGV0IGRpdiA9IHRoaXMuX2RpdjtcclxuICAgICAgICBpZiAodGhpcy5fdmlzaWJsZSkge1xyXG4gICAgICAgICAgICBkaXYuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRpdi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfdXBkYXRlU2l6ZSAodywgaCkge1xyXG4gICAgICAgIGxldCBkaXYgPSB0aGlzLl9kaXY7XHJcbiAgICAgICAgaWYgKGRpdikge1xyXG4gICAgICAgICAgICBkaXYuc3R5bGUud2lkdGggPSB3ICsgXCJweFwiO1xyXG4gICAgICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gaCArIFwicHhcIjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0RXZlbnQgKCkge1xyXG4gICAgICAgIGxldCBpZnJhbWUgPSB0aGlzLl9pZnJhbWU7XHJcbiAgICAgICAgaWYgKGlmcmFtZSkge1xyXG4gICAgICAgICAgICBsZXQgY2JzID0gdGhpcy5fX2V2ZW50TGlzdGVuZXJzLCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgY2JzLmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9mb3JjZVVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kaXNwYXRjaEV2ZW50KFdlYlZpZXdJbXBsLkV2ZW50VHlwZS5MT0FERUQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjYnMuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kaXNwYXRjaEV2ZW50KFdlYlZpZXdJbXBsLkV2ZW50VHlwZS5FUlJPUik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBjYnMubG9hZCk7XHJcbiAgICAgICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgY2JzLmVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0U3R5bGUgKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZGl2KSByZXR1cm47XHJcbiAgICAgICAgbGV0IGRpdiA9IHRoaXMuX2RpdjtcclxuICAgICAgICBkaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgZGl2LnN0eWxlLmJvdHRvbSA9IFwiMHB4XCI7XHJcbiAgICAgICAgZGl2LnN0eWxlLmxlZnQgPSBcIjBweFwiO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0T3BhY2l0eSAob3BhY2l0eSkge1xyXG4gICAgICAgIGxldCBpZnJhbWUgPSB0aGlzLl9pZnJhbWU7XHJcbiAgICAgICAgaWYgKGlmcmFtZSAmJiBpZnJhbWUuc3R5bGUpIHtcclxuICAgICAgICAgICAgaWZyYW1lLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMjU1O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX2NyZWF0ZURvbSAodywgaCkge1xyXG4gICAgICAgIGlmIChXZWJWaWV3SW1wbC5fcG9seWZpbGwuZW5hYmxlRGl2KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpdi5zdHlsZVtcIi13ZWJraXQtb3ZlcmZsb3dcIl0gPSBcImF1dG9cIjtcclxuICAgICAgICAgICAgdGhpcy5fZGl2LnN0eWxlW1wiLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmdcIl0gPSBcInRvdWNoXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2lmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpdi5hcHBlbmRDaGlsZCh0aGlzLl9pZnJhbWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9pZnJhbWUuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgdGhpcy5faWZyYW1lLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGl2ID0gdGhpcy5faWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChXZWJWaWV3SW1wbC5fcG9seWZpbGwuZW5hYmxlQkcpXHJcbiAgICAgICAgICAgIHRoaXMuX2Rpdi5zdHlsZVtcImJhY2tncm91bmRcIl0gPSBcIiNGRkZcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fZGl2LnN0eWxlLmhlaWdodCA9IGggKyBcInB4XCI7XHJcbiAgICAgICAgdGhpcy5fZGl2LnN0eWxlLndpZHRoID0gdyArIFwicHhcIjtcclxuICAgICAgICB0aGlzLl9kaXYuc3R5bGUub3ZlcmZsb3cgPSBcInNjcm9sbFwiO1xyXG4gICAgICAgIHRoaXMuX2lmcmFtZS5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgICAgY2MuZ2FtZS5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fZGl2KTtcclxuICAgICAgICB0aGlzLl91cGRhdGVWaXNpYmlsaXR5KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVOYXRpdmVDb250cm9sICh3LCBoKSB7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlRG9tKHcsIGgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRTdHlsZSgpO1xyXG4gICAgICAgIHRoaXMuX2luaXRFdmVudCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGVEb21FbGVtZW50SWZOZWVkZWQ6IENDX0VESVRPUiA/IGZ1bmN0aW9uICh3LCBoKSB7XHJcbiAgICAgICAgdGhpcy5fZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5fZGl2LnN0eWxlLmJhY2tncm91bmQgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJztcclxuICAgICAgICB0aGlzLl9kaXYuc3R5bGUuY29sb3IgPSAncmdiKDUxLCA1MSwgNTEpJztcclxuICAgICAgICB0aGlzLl9kaXYuc3R5bGUuaGVpZ2h0ID0gdyArICdweCc7XHJcbiAgICAgICAgdGhpcy5fZGl2LnN0eWxlLndpZHRoID0gaCArICdweCc7XHJcbiAgICAgICAgdGhpcy5fZGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICB0aGlzLl9kaXYuc3R5bGUuYm90dG9tID0gJzBweCc7XHJcbiAgICAgICAgdGhpcy5fZGl2LnN0eWxlLmxlZnQgPSAnMHB4JztcclxuICAgICAgICB0aGlzLl9kaXYuc3R5bGVbJ3dvcmQtd3JhcCddID0gJ2JyZWFrLXdvcmQnO1xyXG4gICAgICAgIGNjLmdhbWUuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2Rpdik7XHJcbiAgICB9IDogZnVuY3Rpb24gKHcsIGgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2Rpdikge1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVOYXRpdmVDb250cm9sKHcsIGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2l6ZSh3LCBoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbW92ZURvbSAoKSB7XHJcbiAgICAgICAgbGV0IGRpdiA9IHRoaXMuX2RpdjtcclxuICAgICAgICBpZiAoZGl2KSB7XHJcbiAgICAgICAgICAgIGxldCBoYXNDaGlsZCA9IHV0aWxzLmNvbnRhaW5zKGNjLmdhbWUuY29udGFpbmVyLCBkaXYpO1xyXG4gICAgICAgICAgICBpZiAoaGFzQ2hpbGQpXHJcbiAgICAgICAgICAgICAgICBjYy5nYW1lLmNvbnRhaW5lci5yZW1vdmVDaGlsZChkaXYpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGl2ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGlmcmFtZSA9IHRoaXMuX2lmcmFtZTtcclxuICAgICAgICBpZiAoaWZyYW1lKSB7XHJcbiAgICAgICAgICAgIGxldCBjYnMgPSB0aGlzLl9fZXZlbnRMaXN0ZW5lcnM7XHJcbiAgICAgICAgICAgIGlmcmFtZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCBjYnMubG9hZCk7XHJcbiAgICAgICAgICAgIGlmcmFtZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgY2JzLmVycm9yKTtcclxuICAgICAgICAgICAgY2JzLmxvYWQgPSBudWxsO1xyXG4gICAgICAgICAgICBjYnMuZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9pZnJhbWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0T25KU0NhbGxiYWNrIChjYWxsYmFjaykge30sXHJcbiAgICBzZXRKYXZhc2NyaXB0SW50ZXJmYWNlU2NoZW1lIChzY2hlbWUpIHt9LFxyXG4gICAgLy8gcHJpdmF0ZSBtZXRob2RcclxuICAgIGxvYWREYXRhIChkYXRhLCBNSU1FVHlwZSwgZW5jb2RpbmcsIGJhc2VVUkwpIHt9LFxyXG4gICAgbG9hZEhUTUxTdHJpbmcgKHN0cmluZywgYmFzZVVSTCkge30sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGFuIFVSTFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybFxyXG4gICAgICovXHJcbiAgICBsb2FkVVJMOiBDQ19FRElUT1IgPyBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgdGhpcy5fZGl2LmlubmVyVGV4dCA9IHVybDtcclxuICAgIH0gOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgbGV0IGlmcmFtZSA9IHRoaXMuX2lmcmFtZTtcclxuICAgICAgICBpZiAoaWZyYW1lKSB7XHJcbiAgICAgICAgICAgIGlmcmFtZS5zcmMgPSB1cmw7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgbGV0IGNiID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fbG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGYuX3VwZGF0ZVZpc2liaWxpdHkoKTtcclxuICAgICAgICAgICAgICAgIGlmcmFtZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLCBjYik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBjYik7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoV2ViVmlld0ltcGwuRXZlbnRUeXBlLkxPQURJTkcpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIGxvYWRpbmdcclxuICAgICAqL1xyXG4gICAgc3RvcExvYWRpbmcgKCkge1xyXG4gICAgICAgIGNjLmxvZ0lEKDc4MDApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbG9hZCB0aGUgV2ViVmlld1xyXG4gICAgICovXHJcbiAgICByZWxvYWQgKCkge1xyXG4gICAgICAgIGxldCBpZnJhbWUgPSB0aGlzLl9pZnJhbWU7XHJcbiAgICAgICAgaWYgKGlmcmFtZSkge1xyXG4gICAgICAgICAgICBsZXQgd2luID0gaWZyYW1lLmNvbnRlbnRXaW5kb3c7XHJcbiAgICAgICAgICAgIGlmICh3aW4gJiYgd2luLmxvY2F0aW9uKVxyXG4gICAgICAgICAgICAgICAgd2luLmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciB0byBnbyBiYWNrXHJcbiAgICAgKi9cclxuICAgIGNhbkdvQmFjayAoKSB7XHJcbiAgICAgICAgY2MubG9nSUQoNzgwMSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZ28gZm9yd2FyZFxyXG4gICAgICovXHJcbiAgICBjYW5Hb0ZvcndhcmQgKCkge1xyXG4gICAgICAgIGNjLmxvZ0lEKDc4MDIpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIGdvIGJhY2tcclxuICAgICAqL1xyXG4gICAgZ29CYWNrICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoV2ViVmlld0ltcGwuX3BvbHlmaWxsLmNsb3NlSGlzdG9yeSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYy5sb2dJRCg3ODAzKTtcclxuICAgICAgICAgICAgbGV0IGlmcmFtZSA9IHRoaXMuX2lmcmFtZTtcclxuICAgICAgICAgICAgaWYgKGlmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpbiA9IGlmcmFtZS5jb250ZW50V2luZG93O1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbiAmJiB3aW4ubG9jYXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgd2luLmhpc3RvcnkuYmFjay5jYWxsKHdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY2MubG9nKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIGdvIGZvcndhcmRcclxuICAgICAqL1xyXG4gICAgZ29Gb3J3YXJkICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoV2ViVmlld0ltcGwuX3BvbHlmaWxsLmNsb3NlSGlzdG9yeSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYy5sb2dJRCg3ODA0KTtcclxuICAgICAgICAgICAgbGV0IGlmcmFtZSA9IHRoaXMuX2lmcmFtZTtcclxuICAgICAgICAgICAgaWYgKGlmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpbiA9IGlmcmFtZS5jb250ZW50V2luZG93O1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbiAmJiB3aW4ubG9jYXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgd2luLmhpc3RvcnkuZm9yd2FyZC5jYWxsKHdpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY2MubG9nKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluIHRoZSB3ZWJ2aWV3IGV4ZWN1dGlvbiB3aXRoaW4gYSBwZXJpb2Qgb2YganMgc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXHJcbiAgICAgKi9cclxuICAgIGV2YWx1YXRlSlMgKHN0cikge1xyXG4gICAgICAgIGxldCBpZnJhbWUgPSB0aGlzLl9pZnJhbWU7XHJcbiAgICAgICAgaWYgKGlmcmFtZSkge1xyXG4gICAgICAgICAgICBsZXQgd2luID0gaWZyYW1lLmNvbnRlbnRXaW5kb3c7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB3aW4uZXZhbChzdHIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2hFdmVudChXZWJWaWV3SW1wbC5FdmVudFR5cGUuSlNfRVZBTFVBVEVEKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGltaXRlZCBzY2FsZVxyXG4gICAgICovXHJcbiAgICBzZXRTY2FsZXNQYWdlVG9GaXQgKCkge1xyXG4gICAgICAgIGNjLmxvZ0lEKDc4MDUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBiaW5kaW5nIGV2ZW50XHJcbiAgICAgKiBAcGFyYW0ge1dlYlZpZXdJbXBsLkV2ZW50VHlwZX0gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIHNldEV2ZW50TGlzdGVuZXIgKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX0V2ZW50TGlzdFtldmVudF0gPSBjYWxsYmFjaztcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgZXZlbnRzXHJcbiAgICAgKiBAcGFyYW0ge1dlYlZpZXdJbXBsLkV2ZW50VHlwZX0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lciAoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLl9FdmVudExpc3RbZXZlbnRdID0gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgX2Rpc3BhdGNoRXZlbnQgKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGNhbGxiYWNrID0gdGhpcy5fRXZlbnRMaXN0W2V2ZW50XTtcclxuICAgICAgICBpZiAoY2FsbGJhY2spXHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcywgdGhpcywgdGhpcy5faWZyYW1lLnNyYyk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jcmVhdGVSZW5kZXJDbWQgKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgV2ViVmlld0ltcGwuUmVuZGVyQ21kKHRoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBkZXN0cm95ICgpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZURvbSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRWaXNpYmxlICh2aXNpYmxlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Zpc2libGUgIT09IHZpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9ICEhdmlzaWJsZTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlVmlzaWJpbGl0eSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlTWF0cml4IChub2RlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kaXYgfHwgIXRoaXMuX3Zpc2libGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgbm9kZS5nZXRXb3JsZE1hdHJpeChfbWF0NF90ZW1wKTtcclxuXHJcbiAgICAgICAgbGV0IHJlbmRlckNhbWVyYSA9IGNjLkNhbWVyYS5fZmluZFJlbmRlcmVyQ2FtZXJhKG5vZGUpO1xyXG4gICAgICAgIGlmIChyZW5kZXJDYW1lcmEpIHtcclxuICAgICAgICAgICAgcmVuZGVyQ2FtZXJhLndvcmxkTWF0cml4VG9TY3JlZW4oX21hdDRfdGVtcCwgX21hdDRfdGVtcCwgY2MuZ2FtZS5jYW52YXMud2lkdGgsIGNjLmdhbWUuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgX21hdDRfdGVtcG0gPSBfbWF0NF90ZW1wLm07XHJcbiAgICAgICAgaWYgKCF0aGlzLl9mb3JjZVVwZGF0ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9tMDAgPT09IF9tYXQ0X3RlbXBtWzBdICYmIHRoaXMuX20wMSA9PT0gX21hdDRfdGVtcG1bMV0gJiZcclxuICAgICAgICAgICAgdGhpcy5fbTA0ID09PSBfbWF0NF90ZW1wbVs0XSAmJiB0aGlzLl9tMDUgPT09IF9tYXQ0X3RlbXBtWzVdICYmXHJcbiAgICAgICAgICAgIHRoaXMuX20xMiA9PT0gX21hdDRfdGVtcG1bMTJdICYmIHRoaXMuX20xMyA9PT0gX21hdDRfdGVtcG1bMTNdICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3cgPT09IG5vZGUuX2NvbnRlbnRTaXplLndpZHRoICYmIHRoaXMuX2ggPT09IG5vZGUuX2NvbnRlbnRTaXplLmhlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgbWF0cml4IGNhY2hlXHJcbiAgICAgICAgdGhpcy5fbTAwID0gX21hdDRfdGVtcG1bMF07XHJcbiAgICAgICAgdGhpcy5fbTAxID0gX21hdDRfdGVtcG1bMV07XHJcbiAgICAgICAgdGhpcy5fbTA0ID0gX21hdDRfdGVtcG1bNF07XHJcbiAgICAgICAgdGhpcy5fbTA1ID0gX21hdDRfdGVtcG1bNV07XHJcbiAgICAgICAgdGhpcy5fbTEyID0gX21hdDRfdGVtcG1bMTJdO1xyXG4gICAgICAgIHRoaXMuX20xMyA9IF9tYXQ0X3RlbXBtWzEzXTtcclxuICAgICAgICB0aGlzLl93ID0gbm9kZS5fY29udGVudFNpemUud2lkdGg7XHJcbiAgICAgICAgdGhpcy5faCA9IG5vZGUuX2NvbnRlbnRTaXplLmhlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IGRwciA9IGNjLnZpZXcuX2RldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgbGV0IHNjYWxlWCA9IDEgLyBkcHI7XHJcbiAgICAgICAgbGV0IHNjYWxlWSA9IDEgLyBkcHI7XHJcblxyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBjYy5nYW1lLmNvbnRhaW5lcjtcclxuICAgICAgICBsZXQgYSA9IF9tYXQ0X3RlbXBtWzBdICogc2NhbGVYLCBiID0gX21hdDRfdGVtcG1bMV0sIGMgPSBfbWF0NF90ZW1wbVs0XSwgZCA9IF9tYXQ0X3RlbXBtWzVdICogc2NhbGVZO1xyXG5cclxuICAgICAgICBsZXQgb2Zmc2V0WCA9IGNvbnRhaW5lciAmJiBjb250YWluZXIuc3R5bGUucGFkZGluZ0xlZnQgPyBwYXJzZUludChjb250YWluZXIuc3R5bGUucGFkZGluZ0xlZnQpIDogMDtcclxuICAgICAgICBsZXQgb2Zmc2V0WSA9IGNvbnRhaW5lciAmJiBjb250YWluZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA/IHBhcnNlSW50KGNvbnRhaW5lci5zdHlsZS5wYWRkaW5nQm90dG9tKSA6IDA7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlU2l6ZSh0aGlzLl93LCB0aGlzLl9oKTtcclxuICAgICAgICBsZXQgdyA9IHRoaXMuX3cgKiBzY2FsZVg7XHJcbiAgICAgICAgbGV0IGggPSB0aGlzLl9oICogc2NhbGVZO1xyXG5cclxuICAgICAgICBsZXQgYXBweCA9ICh3ICogX21hdDRfdGVtcG1bMF0pICogbm9kZS5fYW5jaG9yUG9pbnQueDtcclxuICAgICAgICBsZXQgYXBweSA9IChoICogX21hdDRfdGVtcG1bNV0pICogbm9kZS5fYW5jaG9yUG9pbnQueTtcclxuXHJcblxyXG4gICAgICAgIGxldCB0eCA9IF9tYXQ0X3RlbXBtWzEyXSAqIHNjYWxlWCAtIGFwcHggKyBvZmZzZXRYLCB0eSA9IF9tYXQ0X3RlbXBtWzEzXSAqIHNjYWxlWSAtIGFwcHkgKyBvZmZzZXRZO1xyXG5cclxuICAgICAgICBsZXQgbWF0cml4ID0gXCJtYXRyaXgoXCIgKyBhICsgXCIsXCIgKyAtYiArIFwiLFwiICsgLWMgKyBcIixcIiArIGQgKyBcIixcIiArIHR4ICsgXCIsXCIgKyAtdHkgKyBcIilcIjtcclxuICAgICAgICB0aGlzLl9kaXYuc3R5bGVbJ3RyYW5zZm9ybSddID0gbWF0cml4O1xyXG4gICAgICAgIHRoaXMuX2Rpdi5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9IG1hdHJpeDtcclxuICAgICAgICB0aGlzLl9kaXYuc3R5bGVbJ3RyYW5zZm9ybS1vcmlnaW4nXSA9ICcwcHggMTAwJSAwcHgnO1xyXG4gICAgICAgIHRoaXMuX2Rpdi5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luJ10gPSAnMHB4IDEwMCUgMHB4JztcclxuXHJcbiAgICAgICAgLy8gY2hhZ25lZCBpZnJhbWUgb3BhY2l0eVxyXG4gICAgICAgIHRoaXMuX3NldE9wYWNpdHkobm9kZS5vcGFjaXR5KTtcclxuICAgICAgICB0aGlzLl9mb3JjZVVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbldlYlZpZXdJbXBsLkV2ZW50VHlwZSA9IHtcclxuICAgIExPQURJTkc6IDAsXHJcbiAgICBMT0FERUQ6IDEsXHJcbiAgICBFUlJPUjogMixcclxuICAgIEpTX0VWQUxVQVRFRDogM1xyXG59O1xyXG5cclxubGV0IHBvbHlmaWxsID0gV2ViVmlld0ltcGwuX3BvbHlmaWxsID0ge1xyXG4gICAgZGV2aWNlUGl4ZWxSYXRpbzogZmFsc2UsXHJcbiAgICBlbmFibGVEaXY6IGZhbHNlXHJcbn07XHJcblxyXG5pZiAoc3lzLm9zID09PSBzeXMuT1NfSU9TKVxyXG4gICAgcG9seWZpbGwuZW5hYmxlRGl2ID0gdHJ1ZTtcclxuXHJcbmlmIChzeXMuaXNNb2JpbGUpIHtcclxuICAgIGlmIChzeXMuYnJvd3NlclR5cGUgPT09IHN5cy5CUk9XU0VSX1RZUEVfRklSRUZPWCkge1xyXG4gICAgICAgIHBvbHlmaWxsLmVuYWJsZUJHID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5lbHNlIHtcclxuICAgIGlmIChzeXMuYnJvd3NlclR5cGUgPT09IHN5cy5CUk9XU0VSX1RZUEVfSUUpIHtcclxuICAgICAgICBwb2x5ZmlsbC5jbG9zZUhpc3RvcnkgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlZpZXdJbXBsO1xyXG4iXSwic291cmNlUm9vdCI6Ii8ifQ==